function Zk(i,u){return function(){return i.apply(u,arguments)}}const{toString:eA}=Object.prototype,{getPrototypeOf:Tg}=Object,Og=(i=>u=>{const d=eA.call(u);return i[d]||(i[d]=d.slice(8,-1).toLowerCase())})(Object.create(null)),Ms=i=>(i=i.toLowerCase(),u=>Og(u)===i),Eu=i=>u=>typeof u===i,{isArray:ra}=Array,Fi=Eu("undefined");function K9(i){return i!==null&&!Fi(i)&&i.constructor!==null&&!Fi(i.constructor)&&mo(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const tA=Ms("ArrayBuffer");function G9(i){let u;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?u=ArrayBuffer.isView(i):u=i&&i.buffer&&tA(i.buffer),u}const Y9=Eu("string"),mo=Eu("function"),nA=Eu("number"),Pg=i=>i!==null&&typeof i=="object",X9=i=>i===!0||i===!1,fu=i=>{if(Og(i)!=="object")return!1;const u=Tg(i);return(u===null||u===Object.prototype||Object.getPrototypeOf(u)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},J9=Ms("Date"),Q9=Ms("File"),Z9=Ms("Blob"),e7=Ms("FileList"),t7=i=>Pg(i)&&mo(i.pipe),n7=i=>{const u="[object FormData]";return i&&(typeof FormData=="function"&&i instanceof FormData||eA.call(i)===u||mo(i.toString)&&i.toString()===u)},s7=Ms("URLSearchParams"),o7=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zi(i,u,{allOwnKeys:d=!1}={}){if(i===null||typeof i>"u")return;let p,b;if(typeof i!="object"&&(i=[i]),ra(i))for(p=0,b=i.length;p<b;p++)u.call(null,i[p],p,i);else{const v=d?Object.getOwnPropertyNames(i):Object.keys(i),E=v.length;let A;for(p=0;p<E;p++)A=v[p],u.call(null,i[A],A,i)}}function sA(i,u){u=u.toLowerCase();const d=Object.keys(i);let p=d.length,b;for(;p-- >0;)if(b=d[p],u===b.toLowerCase())return b;return null}const oA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),rA=i=>!Fi(i)&&i!==oA;function cg(){const{caseless:i}=rA(this)&&this||{},u={},d=(p,b)=>{const v=i&&sA(u,b)||b;fu(u[v])&&fu(p)?u[v]=cg(u[v],p):fu(p)?u[v]=cg({},p):ra(p)?u[v]=p.slice():u[v]=p};for(let p=0,b=arguments.length;p<b;p++)arguments[p]&&zi(arguments[p],d);return u}const r7=(i,u,d,{allOwnKeys:p}={})=>(zi(u,(b,v)=>{d&&mo(b)?i[v]=Zk(b,d):i[v]=b},{allOwnKeys:p}),i),a7=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),i7=(i,u,d,p)=>{i.prototype=Object.create(u.prototype,p),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:u.prototype}),d&&Object.assign(i.prototype,d)},c7=(i,u,d,p)=>{let b,v,E;const A={};if(u=u||{},i==null)return u;do{for(b=Object.getOwnPropertyNames(i),v=b.length;v-- >0;)E=b[v],(!p||p(E,i,u))&&!A[E]&&(u[E]=i[E],A[E]=!0);i=d!==!1&&Tg(i)}while(i&&(!d||d(i,u))&&i!==Object.prototype);return u},l7=(i,u,d)=>{i=String(i),(d===void 0||d>i.length)&&(d=i.length),d-=u.length;const p=i.indexOf(u,d);return p!==-1&&p===d},u7=i=>{if(!i)return null;if(ra(i))return i;let u=i.length;if(!nA(u))return null;const d=new Array(u);for(;u-- >0;)d[u]=i[u];return d},f7=(i=>u=>i&&u instanceof i)(typeof Uint8Array<"u"&&Tg(Uint8Array)),d7=(i,u)=>{const p=(i&&i[Symbol.iterator]).call(i);let b;for(;(b=p.next())&&!b.done;){const v=b.value;u.call(i,v[0],v[1])}},m7=(i,u)=>{let d;const p=[];for(;(d=i.exec(u))!==null;)p.push(d);return p},p7=Ms("HTMLFormElement"),g7=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(d,p,b){return p.toUpperCase()+b}),Ik=(({hasOwnProperty:i})=>(u,d)=>i.call(u,d))(Object.prototype),h7=Ms("RegExp"),aA=(i,u)=>{const d=Object.getOwnPropertyDescriptors(i),p={};zi(d,(b,v)=>{u(b,v,i)!==!1&&(p[v]=b)}),Object.defineProperties(i,p)},b7=i=>{aA(i,(u,d)=>{if(mo(i)&&["arguments","caller","callee"].indexOf(d)!==-1)return!1;const p=i[d];if(mo(p)){if(u.enumerable=!1,"writable"in u){u.writable=!1;return}u.set||(u.set=()=>{throw Error("Can not rewrite read-only method '"+d+"'")})}})},y7=(i,u)=>{const d={},p=b=>{b.forEach(v=>{d[v]=!0})};return ra(i)?p(i):p(String(i).split(u)),d},v7=()=>{},C7=(i,u)=>(i=+i,Number.isFinite(i)?i:u),eg="abcdefghijklmnopqrstuvwxyz",Lk="0123456789",iA={DIGIT:Lk,ALPHA:eg,ALPHA_DIGIT:eg+eg.toUpperCase()+Lk},E7=(i=16,u=iA.ALPHA_DIGIT)=>{let d="";const{length:p}=u;for(;i--;)d+=u[Math.random()*p|0];return d};function _7(i){return!!(i&&mo(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const S7=i=>{const u=new Array(10),d=(p,b)=>{if(Pg(p)){if(u.indexOf(p)>=0)return;if(!("toJSON"in p)){u[b]=p;const v=ra(p)?[]:{};return zi(p,(E,A)=>{const M=d(E,b+1);!Fi(M)&&(v[A]=M)}),u[b]=void 0,v}}return p};return d(i,0)},K={isArray:ra,isArrayBuffer:tA,isBuffer:K9,isFormData:n7,isArrayBufferView:G9,isString:Y9,isNumber:nA,isBoolean:X9,isObject:Pg,isPlainObject:fu,isUndefined:Fi,isDate:J9,isFile:Q9,isBlob:Z9,isRegExp:h7,isFunction:mo,isStream:t7,isURLSearchParams:s7,isTypedArray:f7,isFileList:e7,forEach:zi,merge:cg,extend:r7,trim:o7,stripBOM:a7,inherits:i7,toFlatObject:c7,kindOf:Og,kindOfTest:Ms,endsWith:l7,toArray:u7,forEachEntry:d7,matchAll:m7,isHTMLForm:p7,hasOwnProperty:Ik,hasOwnProp:Ik,reduceDescriptors:aA,freezeMethods:b7,toObjectSet:y7,toCamelCase:g7,noop:v7,toFiniteNumber:C7,findKey:sA,global:oA,isContextDefined:rA,ALPHABET:iA,generateString:E7,isSpecCompliantForm:_7,toJSONObject:S7};function Ke(i,u,d,p,b){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",u&&(this.code=u),d&&(this.config=d),p&&(this.request=p),b&&(this.response=b)}K.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const cA=Ke.prototype,lA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{lA[i]={value:i}});Object.defineProperties(Ke,lA);Object.defineProperty(cA,"isAxiosError",{value:!0});Ke.from=(i,u,d,p,b,v)=>{const E=Object.create(cA);return K.toFlatObject(i,E,function(M){return M!==Error.prototype},A=>A!=="isAxiosError"),Ke.call(E,i.message,u,d,p,b),E.cause=i,E.name=i.name,v&&Object.assign(E,v),E};const w7=null;function lg(i){return K.isPlainObject(i)||K.isArray(i)}function uA(i){return K.endsWith(i,"[]")?i.slice(0,-2):i}function $k(i,u,d){return i?i.concat(u).map(function(b,v){return b=uA(b),!d&&v?"["+b+"]":b}).join(d?".":""):u}function x7(i){return K.isArray(i)&&!i.some(lg)}const k7=K.toFlatObject(K,{},null,function(u){return/^is[A-Z]/.test(u)});function _u(i,u,d){if(!K.isObject(i))throw new TypeError("target must be an object");u=u||new FormData,d=K.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Pe,ve){return!K.isUndefined(ve[Pe])});const p=d.metaTokens,b=d.visitor||J,v=d.dots,E=d.indexes,M=(d.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(u);if(!K.isFunction(b))throw new TypeError("visitor must be a function");function $(he){if(he===null)return"";if(K.isDate(he))return he.toISOString();if(!M&&K.isBlob(he))throw new Ke("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(he)||K.isTypedArray(he)?M&&typeof Blob=="function"?new Blob([he]):Buffer.from(he):he}function J(he,Pe,ve){let Be=he;if(he&&!ve&&typeof he=="object"){if(K.endsWith(Pe,"{}"))Pe=p?Pe:Pe.slice(0,-2),he=JSON.stringify(he);else if(K.isArray(he)&&x7(he)||(K.isFileList(he)||K.endsWith(Pe,"[]"))&&(Be=K.toArray(he)))return Pe=uA(Pe),Be.forEach(function(ne,Xe){!(K.isUndefined(ne)||ne===null)&&u.append(E===!0?$k([Pe],Xe,v):E===null?Pe:Pe+"[]",$(ne))}),!1}return lg(he)?!0:(u.append($k(ve,Pe,v),$(he)),!1)}const fe=[],Ee=Object.assign(k7,{defaultVisitor:J,convertValue:$,isVisitable:lg});function Te(he,Pe){if(!K.isUndefined(he)){if(fe.indexOf(he)!==-1)throw Error("Circular reference detected in "+Pe.join("."));fe.push(he),K.forEach(he,function(Be,Ye){(!(K.isUndefined(Be)||Be===null)&&b.call(u,Be,K.isString(Ye)?Ye.trim():Ye,Pe,Ee))===!0&&Te(Be,Pe?Pe.concat(Ye):[Ye])}),fe.pop()}}if(!K.isObject(i))throw new TypeError("data must be an object");return Te(i),u}function Fk(i){const u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(p){return u[p]})}function Dg(i,u){this._pairs=[],i&&_u(i,this,u)}const fA=Dg.prototype;fA.append=function(u,d){this._pairs.push([u,d])};fA.toString=function(u){const d=u?function(p){return u.call(this,p,Fk)}:Fk;return this._pairs.map(function(b){return d(b[0])+"="+d(b[1])},"").join("&")};function A7(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function dA(i,u,d){if(!u)return i;const p=d&&d.encode||A7,b=d&&d.serialize;let v;if(b?v=b(u,d):v=K.isURLSearchParams(u)?u.toString():new Dg(u,d).toString(p),v){const E=i.indexOf("#");E!==-1&&(i=i.slice(0,E)),i+=(i.indexOf("?")===-1?"?":"&")+v}return i}class N7{constructor(){this.handlers=[]}use(u,d,p){return this.handlers.push({fulfilled:u,rejected:d,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(u){this.handlers[u]&&(this.handlers[u]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(u){K.forEach(this.handlers,function(p){p!==null&&u(p)})}}const Mk=N7,mA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R7=typeof URLSearchParams<"u"?URLSearchParams:Dg,T7=typeof FormData<"u"?FormData:null,O7=typeof Blob<"u"?Blob:null,P7=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),D7=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),_s={isBrowser:!0,classes:{URLSearchParams:R7,FormData:T7,Blob:O7},isStandardBrowserEnv:P7,isStandardBrowserWebWorkerEnv:D7,protocols:["http","https","file","blob","url","data"]};function B7(i,u){return _u(i,new _s.classes.URLSearchParams,Object.assign({visitor:function(d,p,b,v){return _s.isNode&&K.isBuffer(d)?(this.append(p,d.toString("base64")),!1):v.defaultVisitor.apply(this,arguments)}},u))}function I7(i){return K.matchAll(/\w+|\[(\w*)]/g,i).map(u=>u[0]==="[]"?"":u[1]||u[0])}function L7(i){const u={},d=Object.keys(i);let p;const b=d.length;let v;for(p=0;p<b;p++)v=d[p],u[v]=i[v];return u}function pA(i){function u(d,p,b,v){let E=d[v++];const A=Number.isFinite(+E),M=v>=d.length;return E=!E&&K.isArray(b)?b.length:E,M?(K.hasOwnProp(b,E)?b[E]=[b[E],p]:b[E]=p,!A):((!b[E]||!K.isObject(b[E]))&&(b[E]=[]),u(d,p,b[E],v)&&K.isArray(b[E])&&(b[E]=L7(b[E])),!A)}if(K.isFormData(i)&&K.isFunction(i.entries)){const d={};return K.forEachEntry(i,(p,b)=>{u(I7(p),b,d,0)}),d}return null}const $7={"Content-Type":void 0};function F7(i,u,d){if(K.isString(i))try{return(u||JSON.parse)(i),K.trim(i)}catch(p){if(p.name!=="SyntaxError")throw p}return(d||JSON.stringify)(i)}const Su={transitional:mA,adapter:["xhr","http"],transformRequest:[function(u,d){const p=d.getContentType()||"",b=p.indexOf("application/json")>-1,v=K.isObject(u);if(v&&K.isHTMLForm(u)&&(u=new FormData(u)),K.isFormData(u))return b&&b?JSON.stringify(pA(u)):u;if(K.isArrayBuffer(u)||K.isBuffer(u)||K.isStream(u)||K.isFile(u)||K.isBlob(u))return u;if(K.isArrayBufferView(u))return u.buffer;if(K.isURLSearchParams(u))return d.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),u.toString();let A;if(v){if(p.indexOf("application/x-www-form-urlencoded")>-1)return B7(u,this.formSerializer).toString();if((A=K.isFileList(u))||p.indexOf("multipart/form-data")>-1){const M=this.env&&this.env.FormData;return _u(A?{"files[]":u}:u,M&&new M,this.formSerializer)}}return v||b?(d.setContentType("application/json",!1),F7(u)):u}],transformResponse:[function(u){const d=this.transitional||Su.transitional,p=d&&d.forcedJSONParsing,b=this.responseType==="json";if(u&&K.isString(u)&&(p&&!this.responseType||b)){const E=!(d&&d.silentJSONParsing)&&b;try{return JSON.parse(u)}catch(A){if(E)throw A.name==="SyntaxError"?Ke.from(A,Ke.ERR_BAD_RESPONSE,this,null,this.response):A}}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_s.classes.FormData,Blob:_s.classes.Blob},validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};K.forEach(["delete","get","head"],function(u){Su.headers[u]={}});K.forEach(["post","put","patch"],function(u){Su.headers[u]=K.merge($7)});const Bg=Su,M7=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U7=i=>{const u={};let d,p,b;return i&&i.split(`
`).forEach(function(E){b=E.indexOf(":"),d=E.substring(0,b).trim().toLowerCase(),p=E.substring(b+1).trim(),!(!d||u[d]&&M7[d])&&(d==="set-cookie"?u[d]?u[d].push(p):u[d]=[p]:u[d]=u[d]?u[d]+", "+p:p)}),u},Uk=Symbol("internals");function Oi(i){return i&&String(i).trim().toLowerCase()}function du(i){return i===!1||i==null?i:K.isArray(i)?i.map(du):String(i)}function z7(i){const u=Object.create(null),d=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=d.exec(i);)u[p[1]]=p[2];return u}function H7(i){return/^[-_a-zA-Z]+$/.test(i.trim())}function tg(i,u,d,p,b){if(K.isFunction(p))return p.call(this,u,d);if(b&&(u=d),!!K.isString(u)){if(K.isString(p))return u.indexOf(p)!==-1;if(K.isRegExp(p))return p.test(u)}}function j7(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(u,d,p)=>d.toUpperCase()+p)}function V7(i,u){const d=K.toCamelCase(" "+u);["get","set","has"].forEach(p=>{Object.defineProperty(i,p+d,{value:function(b,v,E){return this[p].call(this,u,b,v,E)},configurable:!0})})}class wu{constructor(u){u&&this.set(u)}set(u,d,p){const b=this;function v(A,M,$){const J=Oi(M);if(!J)throw new Error("header name must be a non-empty string");const fe=K.findKey(b,J);(!fe||b[fe]===void 0||$===!0||$===void 0&&b[fe]!==!1)&&(b[fe||M]=du(A))}const E=(A,M)=>K.forEach(A,($,J)=>v($,J,M));return K.isPlainObject(u)||u instanceof this.constructor?E(u,d):K.isString(u)&&(u=u.trim())&&!H7(u)?E(U7(u),d):u!=null&&v(d,u,p),this}get(u,d){if(u=Oi(u),u){const p=K.findKey(this,u);if(p){const b=this[p];if(!d)return b;if(d===!0)return z7(b);if(K.isFunction(d))return d.call(this,b,p);if(K.isRegExp(d))return d.exec(b);throw new TypeError("parser must be boolean|regexp|function")}}}has(u,d){if(u=Oi(u),u){const p=K.findKey(this,u);return!!(p&&this[p]!==void 0&&(!d||tg(this,this[p],p,d)))}return!1}delete(u,d){const p=this;let b=!1;function v(E){if(E=Oi(E),E){const A=K.findKey(p,E);A&&(!d||tg(p,p[A],A,d))&&(delete p[A],b=!0)}}return K.isArray(u)?u.forEach(v):v(u),b}clear(u){const d=Object.keys(this);let p=d.length,b=!1;for(;p--;){const v=d[p];(!u||tg(this,this[v],v,u,!0))&&(delete this[v],b=!0)}return b}normalize(u){const d=this,p={};return K.forEach(this,(b,v)=>{const E=K.findKey(p,v);if(E){d[E]=du(b),delete d[v];return}const A=u?j7(v):String(v).trim();A!==v&&delete d[v],d[A]=du(b),p[A]=!0}),this}concat(...u){return this.constructor.concat(this,...u)}toJSON(u){const d=Object.create(null);return K.forEach(this,(p,b)=>{p!=null&&p!==!1&&(d[b]=u&&K.isArray(p)?p.join(", "):p)}),d}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([u,d])=>u+": "+d).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(u){return u instanceof this?u:new this(u)}static concat(u,...d){const p=new this(u);return d.forEach(b=>p.set(b)),p}static accessor(u){const p=(this[Uk]=this[Uk]={accessors:{}}).accessors,b=this.prototype;function v(E){const A=Oi(E);p[A]||(V7(b,E),p[A]=!0)}return K.isArray(u)?u.forEach(v):v(u),this}}wu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.freezeMethods(wu.prototype);K.freezeMethods(wu);const Fs=wu;function ng(i,u){const d=this||Bg,p=u||d,b=Fs.from(p.headers);let v=p.data;return K.forEach(i,function(A){v=A.call(d,v,b.normalize(),u?u.status:void 0)}),b.normalize(),v}function gA(i){return!!(i&&i.__CANCEL__)}function Hi(i,u,d){Ke.call(this,i??"canceled",Ke.ERR_CANCELED,u,d),this.name="CanceledError"}K.inherits(Hi,Ke,{__CANCEL__:!0});function W7(i,u,d){const p=d.config.validateStatus;!d.status||!p||p(d.status)?i(d):u(new Ke("Request failed with status code "+d.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d))}const q7=_s.isStandardBrowserEnv?function(){return{write:function(d,p,b,v,E,A){const M=[];M.push(d+"="+encodeURIComponent(p)),K.isNumber(b)&&M.push("expires="+new Date(b).toGMTString()),K.isString(v)&&M.push("path="+v),K.isString(E)&&M.push("domain="+E),A===!0&&M.push("secure"),document.cookie=M.join("; ")},read:function(d){const p=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function K7(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function G7(i,u){return u?i.replace(/\/+$/,"")+"/"+u.replace(/^\/+/,""):i}function hA(i,u){return i&&!K7(u)?G7(i,u):u}const Y7=_s.isStandardBrowserEnv?function(){const u=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a");let p;function b(v){let E=v;return u&&(d.setAttribute("href",E),E=d.href),d.setAttribute("href",E),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return p=b(window.location.href),function(E){const A=K.isString(E)?b(E):E;return A.protocol===p.protocol&&A.host===p.host}}():function(){return function(){return!0}}();function X7(i){const u=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return u&&u[1]||""}function J7(i,u){i=i||10;const d=new Array(i),p=new Array(i);let b=0,v=0,E;return u=u!==void 0?u:1e3,function(M){const $=Date.now(),J=p[v];E||(E=$),d[b]=M,p[b]=$;let fe=v,Ee=0;for(;fe!==b;)Ee+=d[fe++],fe=fe%i;if(b=(b+1)%i,b===v&&(v=(v+1)%i),$-E<u)return;const Te=J&&$-J;return Te?Math.round(Ee*1e3/Te):void 0}}function zk(i,u){let d=0;const p=J7(50,250);return b=>{const v=b.loaded,E=b.lengthComputable?b.total:void 0,A=v-d,M=p(A),$=v<=E;d=v;const J={loaded:v,total:E,progress:E?v/E:void 0,bytes:A,rate:M||void 0,estimated:M&&E&&$?(E-v)/M:void 0,event:b};J[u?"download":"upload"]=!0,i(J)}}const Q7=typeof XMLHttpRequest<"u",Z7=Q7&&function(i){return new Promise(function(d,p){let b=i.data;const v=Fs.from(i.headers).normalize(),E=i.responseType;let A;function M(){i.cancelToken&&i.cancelToken.unsubscribe(A),i.signal&&i.signal.removeEventListener("abort",A)}K.isFormData(b)&&(_s.isStandardBrowserEnv||_s.isStandardBrowserWebWorkerEnv)&&v.setContentType(!1);let $=new XMLHttpRequest;if(i.auth){const Te=i.auth.username||"",he=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";v.set("Authorization","Basic "+btoa(Te+":"+he))}const J=hA(i.baseURL,i.url);$.open(i.method.toUpperCase(),dA(J,i.params,i.paramsSerializer),!0),$.timeout=i.timeout;function fe(){if(!$)return;const Te=Fs.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),Pe={data:!E||E==="text"||E==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:Te,config:i,request:$};W7(function(Be){d(Be),M()},function(Be){p(Be),M()},Pe),$=null}if("onloadend"in $?$.onloadend=fe:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(fe)},$.onabort=function(){$&&(p(new Ke("Request aborted",Ke.ECONNABORTED,i,$)),$=null)},$.onerror=function(){p(new Ke("Network Error",Ke.ERR_NETWORK,i,$)),$=null},$.ontimeout=function(){let he=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Pe=i.transitional||mA;i.timeoutErrorMessage&&(he=i.timeoutErrorMessage),p(new Ke(he,Pe.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,i,$)),$=null},_s.isStandardBrowserEnv){const Te=(i.withCredentials||Y7(J))&&i.xsrfCookieName&&q7.read(i.xsrfCookieName);Te&&v.set(i.xsrfHeaderName,Te)}b===void 0&&v.setContentType(null),"setRequestHeader"in $&&K.forEach(v.toJSON(),function(he,Pe){$.setRequestHeader(Pe,he)}),K.isUndefined(i.withCredentials)||($.withCredentials=!!i.withCredentials),E&&E!=="json"&&($.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&$.addEventListener("progress",zk(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&$.upload&&$.upload.addEventListener("progress",zk(i.onUploadProgress)),(i.cancelToken||i.signal)&&(A=Te=>{$&&(p(!Te||Te.type?new Hi(null,i,$):Te),$.abort(),$=null)},i.cancelToken&&i.cancelToken.subscribe(A),i.signal&&(i.signal.aborted?A():i.signal.addEventListener("abort",A)));const Ee=X7(J);if(Ee&&_s.protocols.indexOf(Ee)===-1){p(new Ke("Unsupported protocol "+Ee+":",Ke.ERR_BAD_REQUEST,i));return}$.send(b||null)})},mu={http:w7,xhr:Z7};K.forEach(mu,(i,u)=>{if(i){try{Object.defineProperty(i,"name",{value:u})}catch{}Object.defineProperty(i,"adapterName",{value:u})}});const eG={getAdapter:i=>{i=K.isArray(i)?i:[i];const{length:u}=i;let d,p;for(let b=0;b<u&&(d=i[b],!(p=K.isString(d)?mu[d.toLowerCase()]:d));b++);if(!p)throw p===!1?new Ke(`Adapter ${d} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(K.hasOwnProp(mu,d)?`Adapter '${d}' is not available in the build`:`Unknown adapter '${d}'`);if(!K.isFunction(p))throw new TypeError("adapter is not a function");return p},adapters:mu};function sg(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Hi(null,i)}function Hk(i){return sg(i),i.headers=Fs.from(i.headers),i.data=ng.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),eG.getAdapter(i.adapter||Bg.adapter)(i).then(function(p){return sg(i),p.data=ng.call(i,i.transformResponse,p),p.headers=Fs.from(p.headers),p},function(p){return gA(p)||(sg(i),p&&p.response&&(p.response.data=ng.call(i,i.transformResponse,p.response),p.response.headers=Fs.from(p.response.headers))),Promise.reject(p)})}const jk=i=>i instanceof Fs?i.toJSON():i;function ta(i,u){u=u||{};const d={};function p($,J,fe){return K.isPlainObject($)&&K.isPlainObject(J)?K.merge.call({caseless:fe},$,J):K.isPlainObject(J)?K.merge({},J):K.isArray(J)?J.slice():J}function b($,J,fe){if(K.isUndefined(J)){if(!K.isUndefined($))return p(void 0,$,fe)}else return p($,J,fe)}function v($,J){if(!K.isUndefined(J))return p(void 0,J)}function E($,J){if(K.isUndefined(J)){if(!K.isUndefined($))return p(void 0,$)}else return p(void 0,J)}function A($,J,fe){if(fe in u)return p($,J);if(fe in i)return p(void 0,$)}const M={url:v,method:v,data:v,baseURL:E,transformRequest:E,transformResponse:E,paramsSerializer:E,timeout:E,timeoutMessage:E,withCredentials:E,adapter:E,responseType:E,xsrfCookieName:E,xsrfHeaderName:E,onUploadProgress:E,onDownloadProgress:E,decompress:E,maxContentLength:E,maxBodyLength:E,beforeRedirect:E,transport:E,httpAgent:E,httpsAgent:E,cancelToken:E,socketPath:E,responseEncoding:E,validateStatus:A,headers:($,J)=>b(jk($),jk(J),!0)};return K.forEach(Object.keys(i).concat(Object.keys(u)),function(J){const fe=M[J]||b,Ee=fe(i[J],u[J],J);K.isUndefined(Ee)&&fe!==A||(d[J]=Ee)}),d}const bA="1.3.4",Ig={};["object","boolean","number","function","string","symbol"].forEach((i,u)=>{Ig[i]=function(p){return typeof p===i||"a"+(u<1?"n ":" ")+i}});const Vk={};Ig.transitional=function(u,d,p){function b(v,E){return"[Axios v"+bA+"] Transitional option '"+v+"'"+E+(p?". "+p:"")}return(v,E,A)=>{if(u===!1)throw new Ke(b(E," has been removed"+(d?" in "+d:"")),Ke.ERR_DEPRECATED);return d&&!Vk[E]&&(Vk[E]=!0,console.warn(b(E," has been deprecated since v"+d+" and will be removed in the near future"))),u?u(v,E,A):!0}};function tG(i,u,d){if(typeof i!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const p=Object.keys(i);let b=p.length;for(;b-- >0;){const v=p[b],E=u[v];if(E){const A=i[v],M=A===void 0||E(A,v,i);if(M!==!0)throw new Ke("option "+v+" must be "+M,Ke.ERR_BAD_OPTION_VALUE);continue}if(d!==!0)throw new Ke("Unknown option "+v,Ke.ERR_BAD_OPTION)}}const ug={assertOptions:tG,validators:Ig},uo=ug.validators;class hu{constructor(u){this.defaults=u,this.interceptors={request:new Mk,response:new Mk}}request(u,d){typeof u=="string"?(d=d||{},d.url=u):d=u||{},d=ta(this.defaults,d);const{transitional:p,paramsSerializer:b,headers:v}=d;p!==void 0&&ug.assertOptions(p,{silentJSONParsing:uo.transitional(uo.boolean),forcedJSONParsing:uo.transitional(uo.boolean),clarifyTimeoutError:uo.transitional(uo.boolean)},!1),b!==void 0&&ug.assertOptions(b,{encode:uo.function,serialize:uo.function},!0),d.method=(d.method||this.defaults.method||"get").toLowerCase();let E;E=v&&K.merge(v.common,v[d.method]),E&&K.forEach(["delete","get","head","post","put","patch","common"],he=>{delete v[he]}),d.headers=Fs.concat(E,v);const A=[];let M=!0;this.interceptors.request.forEach(function(Pe){typeof Pe.runWhen=="function"&&Pe.runWhen(d)===!1||(M=M&&Pe.synchronous,A.unshift(Pe.fulfilled,Pe.rejected))});const $=[];this.interceptors.response.forEach(function(Pe){$.push(Pe.fulfilled,Pe.rejected)});let J,fe=0,Ee;if(!M){const he=[Hk.bind(this),void 0];for(he.unshift.apply(he,A),he.push.apply(he,$),Ee=he.length,J=Promise.resolve(d);fe<Ee;)J=J.then(he[fe++],he[fe++]);return J}Ee=A.length;let Te=d;for(fe=0;fe<Ee;){const he=A[fe++],Pe=A[fe++];try{Te=he(Te)}catch(ve){Pe.call(this,ve);break}}try{J=Hk.call(this,Te)}catch(he){return Promise.reject(he)}for(fe=0,Ee=$.length;fe<Ee;)J=J.then($[fe++],$[fe++]);return J}getUri(u){u=ta(this.defaults,u);const d=hA(u.baseURL,u.url);return dA(d,u.params,u.paramsSerializer)}}K.forEach(["delete","get","head","options"],function(u){hu.prototype[u]=function(d,p){return this.request(ta(p||{},{method:u,url:d,data:(p||{}).data}))}});K.forEach(["post","put","patch"],function(u){function d(p){return function(v,E,A){return this.request(ta(A||{},{method:u,headers:p?{"Content-Type":"multipart/form-data"}:{},url:v,data:E}))}}hu.prototype[u]=d(),hu.prototype[u+"Form"]=d(!0)});const pu=hu;class Lg{constructor(u){if(typeof u!="function")throw new TypeError("executor must be a function.");let d;this.promise=new Promise(function(v){d=v});const p=this;this.promise.then(b=>{if(!p._listeners)return;let v=p._listeners.length;for(;v-- >0;)p._listeners[v](b);p._listeners=null}),this.promise.then=b=>{let v;const E=new Promise(A=>{p.subscribe(A),v=A}).then(b);return E.cancel=function(){p.unsubscribe(v)},E},u(function(v,E,A){p.reason||(p.reason=new Hi(v,E,A),d(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(u){if(this.reason){u(this.reason);return}this._listeners?this._listeners.push(u):this._listeners=[u]}unsubscribe(u){if(!this._listeners)return;const d=this._listeners.indexOf(u);d!==-1&&this._listeners.splice(d,1)}static source(){let u;return{token:new Lg(function(b){u=b}),cancel:u}}}const nG=Lg;function sG(i){return function(d){return i.apply(null,d)}}function oG(i){return K.isObject(i)&&i.isAxiosError===!0}const fg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fg).forEach(([i,u])=>{fg[u]=i});const rG=fg;function yA(i){const u=new pu(i),d=Zk(pu.prototype.request,u);return K.extend(d,pu.prototype,u,{allOwnKeys:!0}),K.extend(d,u,null,{allOwnKeys:!0}),d.create=function(b){return yA(ta(i,b))},d}const Ft=yA(Bg);Ft.Axios=pu;Ft.CanceledError=Hi;Ft.CancelToken=nG;Ft.isCancel=gA;Ft.VERSION=bA;Ft.toFormData=_u;Ft.AxiosError=Ke;Ft.Cancel=Ft.CanceledError;Ft.all=function(u){return Promise.all(u)};Ft.spread=sG;Ft.isAxiosError=oG;Ft.mergeConfig=ta;Ft.AxiosHeaders=Fs;Ft.formToJSON=i=>pA(K.isHTMLForm(i)?new FormData(i):i);Ft.HttpStatusCode=rG;Ft.default=Ft;const aG=Ft;window.axios=aG;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var dg=!1,mg=!1,dr=[],pg=-1;function iG(i){cG(i)}function cG(i){dr.includes(i)||dr.push(i),lG()}function vA(i){let u=dr.indexOf(i);u!==-1&&u>pg&&dr.splice(u,1)}function lG(){!mg&&!dg&&(dg=!0,queueMicrotask(uG))}function uG(){dg=!1,mg=!0;for(let i=0;i<dr.length;i++)dr[i](),pg=i;dr.length=0,pg=-1,mg=!1}var aa,ia,ji,CA,gg=!0;function fG(i){gg=!1,i(),gg=!0}function dG(i){aa=i.reactive,ji=i.release,ia=u=>i.effect(u,{scheduler:d=>{gg?iG(d):d()}}),CA=i.raw}function Wk(i){ia=i}function mG(i){let u=()=>{};return[p=>{let b=ia(p);return i._x_effects||(i._x_effects=new Set,i._x_runEffects=()=>{i._x_effects.forEach(v=>v())}),i._x_effects.add(b),u=()=>{b!==void 0&&(i._x_effects.delete(b),ji(b))},b},()=>{u()}]}var EA=[],_A=[],SA=[];function pG(i){SA.push(i)}function wA(i,u){typeof u=="function"?(i._x_cleanups||(i._x_cleanups=[]),i._x_cleanups.push(u)):(u=i,_A.push(u))}function gG(i){EA.push(i)}function hG(i,u,d){i._x_attributeCleanups||(i._x_attributeCleanups={}),i._x_attributeCleanups[u]||(i._x_attributeCleanups[u]=[]),i._x_attributeCleanups[u].push(d)}function xA(i,u){i._x_attributeCleanups&&Object.entries(i._x_attributeCleanups).forEach(([d,p])=>{(u===void 0||u.includes(d))&&(p.forEach(b=>b()),delete i._x_attributeCleanups[d])})}var $g=new MutationObserver(zg),Fg=!1;function Mg(){$g.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Fg=!0}function kA(){bG(),$g.disconnect(),Fg=!1}var Ii=[],og=!1;function bG(){Ii=Ii.concat($g.takeRecords()),Ii.length&&!og&&(og=!0,queueMicrotask(()=>{yG(),og=!1}))}function yG(){zg(Ii),Ii.length=0}function Ht(i){if(!Fg)return i();kA();let u=i();return Mg(),u}var Ug=!1,bu=[];function vG(){Ug=!0}function CG(){Ug=!1,zg(bu),bu=[]}function zg(i){if(Ug){bu=bu.concat(i);return}let u=[],d=[],p=new Map,b=new Map;for(let v=0;v<i.length;v++)if(!i[v].target._x_ignoreMutationObserver&&(i[v].type==="childList"&&(i[v].addedNodes.forEach(E=>E.nodeType===1&&u.push(E)),i[v].removedNodes.forEach(E=>E.nodeType===1&&d.push(E))),i[v].type==="attributes")){let E=i[v].target,A=i[v].attributeName,M=i[v].oldValue,$=()=>{p.has(E)||p.set(E,[]),p.get(E).push({name:A,value:E.getAttribute(A)})},J=()=>{b.has(E)||b.set(E,[]),b.get(E).push(A)};E.hasAttribute(A)&&M===null?$():E.hasAttribute(A)?(J(),$()):J()}b.forEach((v,E)=>{xA(E,v)}),p.forEach((v,E)=>{EA.forEach(A=>A(E,v))});for(let v of d)if(!u.includes(v)&&(_A.forEach(E=>E(v)),v._x_cleanups))for(;v._x_cleanups.length;)v._x_cleanups.pop()();u.forEach(v=>{v._x_ignoreSelf=!0,v._x_ignore=!0});for(let v of u)d.includes(v)||v.isConnected&&(delete v._x_ignoreSelf,delete v._x_ignore,SA.forEach(E=>E(v)),v._x_ignore=!0,v._x_ignoreSelf=!0);u.forEach(v=>{delete v._x_ignoreSelf,delete v._x_ignore}),u=null,d=null,p=null,b=null}function AA(i){return Wi(na(i))}function Vi(i,u,d){return i._x_dataStack=[u,...na(d||i)],()=>{i._x_dataStack=i._x_dataStack.filter(p=>p!==u)}}function qk(i,u){let d=i._x_dataStack[0];Object.entries(u).forEach(([p,b])=>{d[p]=b})}function na(i){return i._x_dataStack?i._x_dataStack:typeof ShadowRoot=="function"&&i instanceof ShadowRoot?na(i.host):i.parentNode?na(i.parentNode):[]}function Wi(i){let u=new Proxy({},{ownKeys:()=>Array.from(new Set(i.flatMap(d=>Object.keys(d)))),has:(d,p)=>i.some(b=>b.hasOwnProperty(p)),get:(d,p)=>(i.find(b=>{if(b.hasOwnProperty(p)){let v=Object.getOwnPropertyDescriptor(b,p);if(v.get&&v.get._x_alreadyBound||v.set&&v.set._x_alreadyBound)return!0;if((v.get||v.set)&&v.enumerable){let E=v.get,A=v.set,M=v;E=E&&E.bind(u),A=A&&A.bind(u),E&&(E._x_alreadyBound=!0),A&&(A._x_alreadyBound=!0),Object.defineProperty(b,p,{...M,get:E,set:A})}return!0}return!1})||{})[p],set:(d,p,b)=>{let v=i.find(E=>E.hasOwnProperty(p));return v?v[p]=b:i[i.length-1][p]=b,!0}});return u}function NA(i){let u=p=>typeof p=="object"&&!Array.isArray(p)&&p!==null,d=(p,b="")=>{Object.entries(Object.getOwnPropertyDescriptors(p)).forEach(([v,{value:E,enumerable:A}])=>{if(A===!1||E===void 0)return;let M=b===""?v:`${b}.${v}`;typeof E=="object"&&E!==null&&E._x_interceptor?p[v]=E.initialize(i,M,v):u(E)&&E!==p&&!(E instanceof Element)&&d(E,M)})};return d(i)}function RA(i,u=()=>{}){let d={initialValue:void 0,_x_interceptor:!0,initialize(p,b,v){return i(this.initialValue,()=>EG(p,b),E=>hg(p,b,E),b,v)}};return u(d),p=>{if(typeof p=="object"&&p!==null&&p._x_interceptor){let b=d.initialize.bind(d);d.initialize=(v,E,A)=>{let M=p.initialize(v,E,A);return d.initialValue=M,b(v,E,A)}}else d.initialValue=p;return d}}function EG(i,u){return u.split(".").reduce((d,p)=>d[p],i)}function hg(i,u,d){if(typeof u=="string"&&(u=u.split(".")),u.length===1)i[u[0]]=d;else{if(u.length===0)throw error;return i[u[0]]||(i[u[0]]={}),hg(i[u[0]],u.slice(1),d)}}var TA={};function ts(i,u){TA[i]=u}function bg(i,u){return Object.entries(TA).forEach(([d,p])=>{Object.defineProperty(i,`$${d}`,{get(){let[b,v]=IA(u);return b={interceptor:RA,...b},wA(u,v),p(u,b)},enumerable:!1})}),i}function _G(i,u,d,...p){try{return d(...p)}catch(b){Mi(b,i,u)}}function Mi(i,u,d=void 0){Object.assign(i,{el:u,expression:d}),console.warn(`Alpine Expression Error: ${i.message}

${d?'Expression: "'+d+`"

`:""}`,u),setTimeout(()=>{throw i},0)}var gu=!0;function SG(i){let u=gu;gu=!1,i(),gu=u}function ea(i,u,d={}){let p;return an(i,u)(b=>p=b,d),p}function an(...i){return OA(...i)}var OA=PA;function wG(i){OA=i}function PA(i,u){let d={};bg(d,i);let p=[d,...na(i)],b=typeof u=="function"?xG(p,u):AG(p,u,i);return _G.bind(null,i,u,b)}function xG(i,u){return(d=()=>{},{scope:p={},params:b=[]}={})=>{let v=u.apply(Wi([p,...i]),b);yu(d,v)}}var rg={};function kG(i,u){if(rg[i])return rg[i];let d=Object.getPrototypeOf(async function(){}).constructor,p=/^[\n\s]*if.*\(.*\)/.test(i)||/^(let|const)\s/.test(i)?`(async()=>{ ${i} })()`:i,v=(()=>{try{return new d(["__self","scope"],`with (scope) { __self.result = ${p} }; __self.finished = true; return __self.result;`)}catch(E){return Mi(E,u,i),Promise.resolve()}})();return rg[i]=v,v}function AG(i,u,d){let p=kG(u,d);return(b=()=>{},{scope:v={},params:E=[]}={})=>{p.result=void 0,p.finished=!1;let A=Wi([v,...i]);if(typeof p=="function"){let M=p(p,A).catch($=>Mi($,d,u));p.finished?(yu(b,p.result,A,E,d),p.result=void 0):M.then($=>{yu(b,$,A,E,d)}).catch($=>Mi($,d,u)).finally(()=>p.result=void 0)}}}function yu(i,u,d,p,b){if(gu&&typeof u=="function"){let v=u.apply(d,p);v instanceof Promise?v.then(E=>yu(i,E,d,p)).catch(E=>Mi(E,b,u)):i(v)}else typeof u=="object"&&u instanceof Promise?u.then(v=>i(v)):i(u)}var Hg="x-";function ca(i=""){return Hg+i}function NG(i){Hg=i}var yg={};function Ot(i,u){return yg[i]=u,{before(d){if(!yg[d]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const p=fr.indexOf(d);fr.splice(p>=0?p:fr.indexOf("DEFAULT"),0,i)}}}function jg(i,u,d){if(u=Array.from(u),i._x_virtualDirectives){let v=Object.entries(i._x_virtualDirectives).map(([A,M])=>({name:A,value:M})),E=DA(v);v=v.map(A=>E.find(M=>M.name===A.name)?{name:`x-bind:${A.name}`,value:`"${A.value}"`}:A),u=u.concat(v)}let p={};return u.map(FA((v,E)=>p[v]=E)).filter(UA).map(OG(p,d)).sort(PG).map(v=>TG(i,v))}function DA(i){return Array.from(i).map(FA()).filter(u=>!UA(u))}var vg=!1,Bi=new Map,BA=Symbol();function RG(i){vg=!0;let u=Symbol();BA=u,Bi.set(u,[]);let d=()=>{for(;Bi.get(u).length;)Bi.get(u).shift()();Bi.delete(u)},p=()=>{vg=!1,d()};i(d),p()}function IA(i){let u=[],d=A=>u.push(A),[p,b]=mG(i);return u.push(b),[{Alpine:Ki,effect:p,cleanup:d,evaluateLater:an.bind(an,i),evaluate:ea.bind(ea,i)},()=>u.forEach(A=>A())]}function TG(i,u){let d=()=>{},p=yg[u.type]||d,[b,v]=IA(i);hG(i,u.original,v);let E=()=>{i._x_ignore||i._x_ignoreSelf||(p.inline&&p.inline(i,u,b),p=p.bind(p,i,u,b),vg?Bi.get(BA).push(p):p())};return E.runCleanups=v,E}var LA=(i,u)=>({name:d,value:p})=>(d.startsWith(i)&&(d=d.replace(i,u)),{name:d,value:p}),$A=i=>i;function FA(i=()=>{}){return({name:u,value:d})=>{let{name:p,value:b}=MA.reduce((v,E)=>E(v),{name:u,value:d});return p!==u&&i(p,u),{name:p,value:b}}}var MA=[];function Vg(i){MA.push(i)}function UA({name:i}){return zA().test(i)}var zA=()=>new RegExp(`^${Hg}([^:^.]+)\\b`);function OG(i,u){return({name:d,value:p})=>{let b=d.match(zA()),v=d.match(/:([a-zA-Z0-9\-:]+)/),E=d.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],A=u||i[d]||d;return{type:b?b[1]:null,value:v?v[1]:null,modifiers:E.map(M=>M.replace(".","")),expression:p,original:A}}}var Cg="DEFAULT",fr=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",Cg,"teleport"];function PG(i,u){let d=fr.indexOf(i.type)===-1?Cg:i.type,p=fr.indexOf(u.type)===-1?Cg:u.type;return fr.indexOf(d)-fr.indexOf(p)}function Li(i,u,d={}){i.dispatchEvent(new CustomEvent(u,{detail:d,bubbles:!0,composed:!0,cancelable:!0}))}function po(i,u){if(typeof ShadowRoot=="function"&&i instanceof ShadowRoot){Array.from(i.children).forEach(b=>po(b,u));return}let d=!1;if(u(i,()=>d=!0),d)return;let p=i.firstElementChild;for(;p;)po(p,u),p=p.nextElementSibling}function sa(i,...u){console.warn(`Alpine Warning: ${i}`,...u)}function DG(){document.body||sa("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Li(document,"alpine:init"),Li(document,"alpine:initializing"),Mg(),pG(u=>go(u,po)),wA(u=>GA(u)),gG((u,d)=>{jg(u,d).forEach(p=>p())});let i=u=>!xu(u.parentElement,!0);Array.from(document.querySelectorAll(VA())).filter(i).forEach(u=>{go(u)}),Li(document,"alpine:initialized")}var Wg=[],HA=[];function jA(){return Wg.map(i=>i())}function VA(){return Wg.concat(HA).map(i=>i())}function WA(i){Wg.push(i)}function qA(i){HA.push(i)}function xu(i,u=!1){return ku(i,d=>{if((u?VA():jA()).some(b=>d.matches(b)))return!0})}function ku(i,u){if(i){if(u(i))return i;if(i._x_teleportBack&&(i=i._x_teleportBack),!!i.parentElement)return ku(i.parentElement,u)}}function BG(i){return jA().some(u=>i.matches(u))}var KA=[];function IG(i){KA.push(i)}function go(i,u=po,d=()=>{}){RG(()=>{u(i,(p,b)=>{d(p,b),KA.forEach(v=>v(p,b)),jg(p,p.attributes).forEach(v=>v()),p._x_ignore&&b()})})}function GA(i){po(i,u=>xA(u))}var Eg=[],qg=!1;function Kg(i=()=>{}){return queueMicrotask(()=>{qg||setTimeout(()=>{_g()})}),new Promise(u=>{Eg.push(()=>{i(),u()})})}function _g(){for(qg=!1;Eg.length;)Eg.shift()()}function LG(){qg=!0}function Gg(i,u){return Array.isArray(u)?Kk(i,u.join(" ")):typeof u=="object"&&u!==null?$G(i,u):typeof u=="function"?Gg(i,u()):Kk(i,u)}function Kk(i,u){let d=b=>b.split(" ").filter(v=>!i.classList.contains(v)).filter(Boolean),p=b=>(i.classList.add(...b),()=>{i.classList.remove(...b)});return u=u===!0?u="":u||"",p(d(u))}function $G(i,u){let d=A=>A.split(" ").filter(Boolean),p=Object.entries(u).flatMap(([A,M])=>M?d(A):!1).filter(Boolean),b=Object.entries(u).flatMap(([A,M])=>M?!1:d(A)).filter(Boolean),v=[],E=[];return b.forEach(A=>{i.classList.contains(A)&&(i.classList.remove(A),E.push(A))}),p.forEach(A=>{i.classList.contains(A)||(i.classList.add(A),v.push(A))}),()=>{E.forEach(A=>i.classList.add(A)),v.forEach(A=>i.classList.remove(A))}}function Au(i,u){return typeof u=="object"&&u!==null?FG(i,u):MG(i,u)}function FG(i,u){let d={};return Object.entries(u).forEach(([p,b])=>{d[p]=i.style[p],p.startsWith("--")||(p=UG(p)),i.style.setProperty(p,b)}),setTimeout(()=>{i.style.length===0&&i.removeAttribute("style")}),()=>{Au(i,d)}}function MG(i,u){let d=i.getAttribute("style",u);return i.setAttribute("style",u),()=>{i.setAttribute("style",d||"")}}function UG(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Sg(i,u=()=>{}){let d=!1;return function(){d?u.apply(this,arguments):(d=!0,i.apply(this,arguments))}}Ot("transition",(i,{value:u,modifiers:d,expression:p},{evaluate:b})=>{typeof p=="function"&&(p=b(p)),p?zG(i,p,u):HG(i,d,u)});function zG(i,u,d){YA(i,Gg,""),{enter:b=>{i._x_transition.enter.during=b},"enter-start":b=>{i._x_transition.enter.start=b},"enter-end":b=>{i._x_transition.enter.end=b},leave:b=>{i._x_transition.leave.during=b},"leave-start":b=>{i._x_transition.leave.start=b},"leave-end":b=>{i._x_transition.leave.end=b}}[d](u)}function HG(i,u,d){YA(i,Au);let p=!u.includes("in")&&!u.includes("out")&&!d,b=p||u.includes("in")||["enter"].includes(d),v=p||u.includes("out")||["leave"].includes(d);u.includes("in")&&!p&&(u=u.filter((Be,Ye)=>Ye<u.indexOf("out"))),u.includes("out")&&!p&&(u=u.filter((Be,Ye)=>Ye>u.indexOf("out")));let E=!u.includes("opacity")&&!u.includes("scale"),A=E||u.includes("opacity"),M=E||u.includes("scale"),$=A?0:1,J=M?Pi(u,"scale",95)/100:1,fe=Pi(u,"delay",0),Ee=Pi(u,"origin","center"),Te="opacity, transform",he=Pi(u,"duration",150)/1e3,Pe=Pi(u,"duration",75)/1e3,ve="cubic-bezier(0.4, 0.0, 0.2, 1)";b&&(i._x_transition.enter.during={transformOrigin:Ee,transitionDelay:fe,transitionProperty:Te,transitionDuration:`${he}s`,transitionTimingFunction:ve},i._x_transition.enter.start={opacity:$,transform:`scale(${J})`},i._x_transition.enter.end={opacity:1,transform:"scale(1)"}),v&&(i._x_transition.leave.during={transformOrigin:Ee,transitionDelay:fe,transitionProperty:Te,transitionDuration:`${Pe}s`,transitionTimingFunction:ve},i._x_transition.leave.start={opacity:1,transform:"scale(1)"},i._x_transition.leave.end={opacity:$,transform:`scale(${J})`})}function YA(i,u,d={}){i._x_transition||(i._x_transition={enter:{during:d,start:d,end:d},leave:{during:d,start:d,end:d},in(p=()=>{},b=()=>{}){wg(i,u,{during:this.enter.during,start:this.enter.start,end:this.enter.end},p,b)},out(p=()=>{},b=()=>{}){wg(i,u,{during:this.leave.during,start:this.leave.start,end:this.leave.end},p,b)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(i,u,d,p){const b=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let v=()=>b(d);if(u){i._x_transition&&(i._x_transition.enter||i._x_transition.leave)?i._x_transition.enter&&(Object.entries(i._x_transition.enter.during).length||Object.entries(i._x_transition.enter.start).length||Object.entries(i._x_transition.enter.end).length)?i._x_transition.in(d):v():i._x_transition?i._x_transition.in(d):v();return}i._x_hidePromise=i._x_transition?new Promise((E,A)=>{i._x_transition.out(()=>{},()=>E(p)),i._x_transitioning.beforeCancel(()=>A({isFromCancelledTransition:!0}))}):Promise.resolve(p),queueMicrotask(()=>{let E=XA(i);E?(E._x_hideChildren||(E._x_hideChildren=[]),E._x_hideChildren.push(i)):b(()=>{let A=M=>{let $=Promise.all([M._x_hidePromise,...(M._x_hideChildren||[]).map(A)]).then(([J])=>J());return delete M._x_hidePromise,delete M._x_hideChildren,$};A(i).catch(M=>{if(!M.isFromCancelledTransition)throw M})})})};function XA(i){let u=i.parentNode;if(u)return u._x_hidePromise?u:XA(u)}function wg(i,u,{during:d,start:p,end:b}={},v=()=>{},E=()=>{}){if(i._x_transitioning&&i._x_transitioning.cancel(),Object.keys(d).length===0&&Object.keys(p).length===0&&Object.keys(b).length===0){v(),E();return}let A,M,$;jG(i,{start(){A=u(i,p)},during(){M=u(i,d)},before:v,end(){A(),$=u(i,b)},after:E,cleanup(){M(),$()}})}function jG(i,u){let d,p,b,v=Sg(()=>{Ht(()=>{d=!0,p||u.before(),b||(u.end(),_g()),u.after(),i.isConnected&&u.cleanup(),delete i._x_transitioning})});i._x_transitioning={beforeCancels:[],beforeCancel(E){this.beforeCancels.push(E)},cancel:Sg(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();v()}),finish:v},Ht(()=>{u.start(),u.during()}),LG(),requestAnimationFrame(()=>{if(d)return;let E=Number(getComputedStyle(i).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,A=Number(getComputedStyle(i).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;E===0&&(E=Number(getComputedStyle(i).animationDuration.replace("s",""))*1e3),Ht(()=>{u.before()}),p=!0,requestAnimationFrame(()=>{d||(Ht(()=>{u.end()}),_g(),setTimeout(i._x_transitioning.finish,E+A),b=!0)})})}function Pi(i,u,d){if(i.indexOf(u)===-1)return d;const p=i[i.indexOf(u)+1];if(!p||u==="scale"&&isNaN(p))return d;if(u==="duration"){let b=p.match(/([0-9]+)ms/);if(b)return b[1]}return u==="origin"&&["top","right","left","center","bottom"].includes(i[i.indexOf(u)+2])?[p,i[i.indexOf(u)+2]].join(" "):p}var Ui=!1;function qi(i,u=()=>{}){return(...d)=>Ui?u(...d):i(...d)}function VG(i){return(...u)=>Ui&&i(...u)}function WG(i,u){u._x_dataStack||(u._x_dataStack=i._x_dataStack),Ui=!0,KG(()=>{qG(u)}),Ui=!1}function qG(i){let u=!1;go(i,(p,b)=>{po(p,(v,E)=>{if(u&&BG(v))return E();u=!0,b(v,E)})})}function KG(i){let u=ia;Wk((d,p)=>{let b=u(d);return ji(b),()=>{}}),i(),Wk(u)}function JA(i,u,d,p=[]){switch(i._x_bindings||(i._x_bindings=aa({})),i._x_bindings[u]=d,u=p.includes("camel")?eY(u):u,u){case"value":GG(i,d);break;case"style":XG(i,d);break;case"class":YG(i,d);break;default:JG(i,u,d);break}}function GG(i,u){if(i.type==="radio")i.attributes.value===void 0&&(i.value=u),window.fromModel&&(i.checked=Gk(i.value,u));else if(i.type==="checkbox")Number.isInteger(u)?i.value=u:!Number.isInteger(u)&&!Array.isArray(u)&&typeof u!="boolean"&&![null,void 0].includes(u)?i.value=String(u):Array.isArray(u)?i.checked=u.some(d=>Gk(d,i.value)):i.checked=!!u;else if(i.tagName==="SELECT")ZG(i,u);else{if(i.value===u)return;i.value=u}}function YG(i,u){i._x_undoAddedClasses&&i._x_undoAddedClasses(),i._x_undoAddedClasses=Gg(i,u)}function XG(i,u){i._x_undoAddedStyles&&i._x_undoAddedStyles(),i._x_undoAddedStyles=Au(i,u)}function JG(i,u,d){[null,void 0,!1].includes(d)&&tY(u)?i.removeAttribute(u):(QA(u)&&(d=u),QG(i,u,d))}function QG(i,u,d){i.getAttribute(u)!=d&&i.setAttribute(u,d)}function ZG(i,u){const d=[].concat(u).map(p=>p+"");Array.from(i.options).forEach(p=>{p.selected=d.includes(p.value)})}function eY(i){return i.toLowerCase().replace(/-(\w)/g,(u,d)=>d.toUpperCase())}function Gk(i,u){return i==u}function QA(i){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(i)}function tY(i){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(i)}function nY(i,u,d){if(i._x_bindings&&i._x_bindings[u]!==void 0)return i._x_bindings[u];let p=i.getAttribute(u);return p===null?typeof d=="function"?d():d:p===""?!0:QA(u)?!![u,"true"].includes(p):p}function ZA(i,u){var d;return function(){var p=this,b=arguments,v=function(){d=null,i.apply(p,b)};clearTimeout(d),d=setTimeout(v,u)}}function eN(i,u){let d;return function(){let p=this,b=arguments;d||(i.apply(p,b),d=!0,setTimeout(()=>d=!1,u))}}function sY(i){i(Ki)}var ur={},Yk=!1;function oY(i,u){if(Yk||(ur=aa(ur),Yk=!0),u===void 0)return ur[i];ur[i]=u,typeof u=="object"&&u!==null&&u.hasOwnProperty("init")&&typeof u.init=="function"&&ur[i].init(),NA(ur[i])}function rY(){return ur}var tN={};function aY(i,u){let d=typeof u!="function"?()=>u:u;i instanceof Element?nN(i,d()):tN[i]=d}function iY(i){return Object.entries(tN).forEach(([u,d])=>{Object.defineProperty(i,u,{get(){return(...p)=>d(...p)}})}),i}function nN(i,u,d){let p=[];for(;p.length;)p.pop()();let b=Object.entries(u).map(([E,A])=>({name:E,value:A})),v=DA(b);b=b.map(E=>v.find(A=>A.name===E.name)?{name:`x-bind:${E.name}`,value:`"${E.value}"`}:E),jg(i,b,d).map(E=>{p.push(E.runCleanups),E()})}var sN={};function cY(i,u){sN[i]=u}function lY(i,u){return Object.entries(sN).forEach(([d,p])=>{Object.defineProperty(i,d,{get(){return(...b)=>p.bind(u)(...b)},enumerable:!1})}),i}var uY={get reactive(){return aa},get release(){return ji},get effect(){return ia},get raw(){return CA},version:"3.12.0",flushAndStopDeferringMutations:CG,dontAutoEvaluateFunctions:SG,disableEffectScheduling:fG,startObservingMutations:Mg,stopObservingMutations:kA,setReactivityEngine:dG,closestDataStack:na,skipDuringClone:qi,onlyDuringClone:VG,addRootSelector:WA,addInitSelector:qA,addScopeToNode:Vi,deferMutations:vG,mapAttributes:Vg,evaluateLater:an,interceptInit:IG,setEvaluator:wG,mergeProxies:Wi,findClosest:ku,closestRoot:xu,destroyTree:GA,interceptor:RA,transition:wg,setStyles:Au,mutateDom:Ht,directive:Ot,throttle:eN,debounce:ZA,evaluate:ea,initTree:go,nextTick:Kg,prefixed:ca,prefix:NG,plugin:sY,magic:ts,store:oY,start:DG,clone:WG,bound:nY,$data:AA,walk:po,data:cY,bind:aY},Ki=uY;function fY(i,u){const d=Object.create(null),p=i.split(",");for(let b=0;b<p.length;b++)d[p[b]]=!0;return u?b=>!!d[b.toLowerCase()]:b=>!!d[b]}var dY=Object.freeze({}),oN=Object.assign,mY=Object.prototype.hasOwnProperty,Nu=(i,u)=>mY.call(i,u),mr=Array.isArray,$i=i=>rN(i)==="[object Map]",pY=i=>typeof i=="string",Yg=i=>typeof i=="symbol",Ru=i=>i!==null&&typeof i=="object",gY=Object.prototype.toString,rN=i=>gY.call(i),aN=i=>rN(i).slice(8,-1),Xg=i=>pY(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,hY=i=>{const u=Object.create(null);return d=>u[d]||(u[d]=i(d))},bY=hY(i=>i.charAt(0).toUpperCase()+i.slice(1)),iN=(i,u)=>i!==u&&(i===i||u===u),xg=new WeakMap,Di=[],Es,pr=Symbol("iterate"),kg=Symbol("Map key iterate");function yY(i){return i&&i._isEffect===!0}function vY(i,u=dY){yY(i)&&(i=i.raw);const d=_Y(i,u);return u.lazy||d(),d}function CY(i){i.active&&(cN(i),i.options.onStop&&i.options.onStop(),i.active=!1)}var EY=0;function _Y(i,u){const d=function(){if(!d.active)return i();if(!Di.includes(d)){cN(d);try{return wY(),Di.push(d),Es=d,i()}finally{Di.pop(),lN(),Es=Di[Di.length-1]}}};return d.id=EY++,d.allowRecurse=!!u.allowRecurse,d._isEffect=!0,d.active=!0,d.raw=i,d.deps=[],d.options=u,d}function cN(i){const{deps:u}=i;if(u.length){for(let d=0;d<u.length;d++)u[d].delete(i);u.length=0}}var oa=!0,Jg=[];function SY(){Jg.push(oa),oa=!1}function wY(){Jg.push(oa),oa=!0}function lN(){const i=Jg.pop();oa=i===void 0?!0:i}function es(i,u,d){if(!oa||Es===void 0)return;let p=xg.get(i);p||xg.set(i,p=new Map);let b=p.get(d);b||p.set(d,b=new Set),b.has(Es)||(b.add(Es),Es.deps.push(b),Es.options.onTrack&&Es.options.onTrack({effect:Es,target:i,type:u,key:d}))}function ho(i,u,d,p,b,v){const E=xg.get(i);if(!E)return;const A=new Set,M=J=>{J&&J.forEach(fe=>{(fe!==Es||fe.allowRecurse)&&A.add(fe)})};if(u==="clear")E.forEach(M);else if(d==="length"&&mr(i))E.forEach((J,fe)=>{(fe==="length"||fe>=p)&&M(J)});else switch(d!==void 0&&M(E.get(d)),u){case"add":mr(i)?Xg(d)&&M(E.get("length")):(M(E.get(pr)),$i(i)&&M(E.get(kg)));break;case"delete":mr(i)||(M(E.get(pr)),$i(i)&&M(E.get(kg)));break;case"set":$i(i)&&M(E.get(pr));break}const $=J=>{J.options.onTrigger&&J.options.onTrigger({effect:J,target:i,key:d,type:u,newValue:p,oldValue:b,oldTarget:v}),J.options.scheduler?J.options.scheduler(J):J()};A.forEach($)}var xY=fY("__proto__,__v_isRef,__isVue"),uN=new Set(Object.getOwnPropertyNames(Symbol).map(i=>Symbol[i]).filter(Yg)),kY=Tu(),AY=Tu(!1,!0),NY=Tu(!0),RY=Tu(!0,!0),vu={};["includes","indexOf","lastIndexOf"].forEach(i=>{const u=Array.prototype[i];vu[i]=function(...d){const p=ht(this);for(let v=0,E=this.length;v<E;v++)es(p,"get",v+"");const b=u.apply(p,d);return b===-1||b===!1?u.apply(p,d.map(ht)):b}});["push","pop","shift","unshift","splice"].forEach(i=>{const u=Array.prototype[i];vu[i]=function(...d){SY();const p=u.apply(this,d);return lN(),p}});function Tu(i=!1,u=!1){return function(p,b,v){if(b==="__v_isReactive")return!i;if(b==="__v_isReadonly")return i;if(b==="__v_raw"&&v===(i?u?MY:xN:u?FY:wN).get(p))return p;const E=mr(p);if(!i&&E&&Nu(vu,b))return Reflect.get(vu,b,v);const A=Reflect.get(p,b,v);return(Yg(b)?uN.has(b):xY(b))||(i||es(p,"get",b),u)?A:Ag(A)?!E||!Xg(b)?A.value:A:Ru(A)?i?kN(A):th(A):A}}var TY=fN(),OY=fN(!0);function fN(i=!1){return function(d,p,b,v){let E=d[p];if(!i&&(b=ht(b),E=ht(E),!mr(d)&&Ag(E)&&!Ag(b)))return E.value=b,!0;const A=mr(d)&&Xg(p)?Number(p)<d.length:Nu(d,p),M=Reflect.set(d,p,b,v);return d===ht(v)&&(A?iN(b,E)&&ho(d,"set",p,b,E):ho(d,"add",p,b)),M}}function PY(i,u){const d=Nu(i,u),p=i[u],b=Reflect.deleteProperty(i,u);return b&&d&&ho(i,"delete",u,void 0,p),b}function DY(i,u){const d=Reflect.has(i,u);return(!Yg(u)||!uN.has(u))&&es(i,"has",u),d}function BY(i){return es(i,"iterate",mr(i)?"length":pr),Reflect.ownKeys(i)}var dN={get:kY,set:TY,deleteProperty:PY,has:DY,ownKeys:BY},mN={get:NY,set(i,u){return console.warn(`Set operation on key "${String(u)}" failed: target is readonly.`,i),!0},deleteProperty(i,u){return console.warn(`Delete operation on key "${String(u)}" failed: target is readonly.`,i),!0}};oN({},dN,{get:AY,set:OY});oN({},mN,{get:RY});var Qg=i=>Ru(i)?th(i):i,Zg=i=>Ru(i)?kN(i):i,eh=i=>i,Ou=i=>Reflect.getPrototypeOf(i);function Pu(i,u,d=!1,p=!1){i=i.__v_raw;const b=ht(i),v=ht(u);u!==v&&!d&&es(b,"get",u),!d&&es(b,"get",v);const{has:E}=Ou(b),A=p?eh:d?Zg:Qg;if(E.call(b,u))return A(i.get(u));if(E.call(b,v))return A(i.get(v));i!==b&&i.get(u)}function Du(i,u=!1){const d=this.__v_raw,p=ht(d),b=ht(i);return i!==b&&!u&&es(p,"has",i),!u&&es(p,"has",b),i===b?d.has(i):d.has(i)||d.has(b)}function Bu(i,u=!1){return i=i.__v_raw,!u&&es(ht(i),"iterate",pr),Reflect.get(i,"size",i)}function pN(i){i=ht(i);const u=ht(this);return Ou(u).has.call(u,i)||(u.add(i),ho(u,"add",i,i)),this}function gN(i,u){u=ht(u);const d=ht(this),{has:p,get:b}=Ou(d);let v=p.call(d,i);v?SN(d,p,i):(i=ht(i),v=p.call(d,i));const E=b.call(d,i);return d.set(i,u),v?iN(u,E)&&ho(d,"set",i,u,E):ho(d,"add",i,u),this}function hN(i){const u=ht(this),{has:d,get:p}=Ou(u);let b=d.call(u,i);b?SN(u,d,i):(i=ht(i),b=d.call(u,i));const v=p?p.call(u,i):void 0,E=u.delete(i);return b&&ho(u,"delete",i,void 0,v),E}function bN(){const i=ht(this),u=i.size!==0,d=$i(i)?new Map(i):new Set(i),p=i.clear();return u&&ho(i,"clear",void 0,void 0,d),p}function Iu(i,u){return function(p,b){const v=this,E=v.__v_raw,A=ht(E),M=u?eh:i?Zg:Qg;return!i&&es(A,"iterate",pr),E.forEach(($,J)=>p.call(b,M($),M(J),v))}}function uu(i,u,d){return function(...p){const b=this.__v_raw,v=ht(b),E=$i(v),A=i==="entries"||i===Symbol.iterator&&E,M=i==="keys"&&E,$=b[i](...p),J=d?eh:u?Zg:Qg;return!u&&es(v,"iterate",M?kg:pr),{next(){const{value:fe,done:Ee}=$.next();return Ee?{value:fe,done:Ee}:{value:A?[J(fe[0]),J(fe[1])]:J(fe),done:Ee}},[Symbol.iterator](){return this}}}}function fo(i){return function(...u){{const d=u[0]?`on key "${u[0]}" `:"";console.warn(`${bY(i)} operation ${d}failed: target is readonly.`,ht(this))}return i==="delete"?!1:this}}var yN={get(i){return Pu(this,i)},get size(){return Bu(this)},has:Du,add:pN,set:gN,delete:hN,clear:bN,forEach:Iu(!1,!1)},vN={get(i){return Pu(this,i,!1,!0)},get size(){return Bu(this)},has:Du,add:pN,set:gN,delete:hN,clear:bN,forEach:Iu(!1,!0)},CN={get(i){return Pu(this,i,!0)},get size(){return Bu(this,!0)},has(i){return Du.call(this,i,!0)},add:fo("add"),set:fo("set"),delete:fo("delete"),clear:fo("clear"),forEach:Iu(!0,!1)},EN={get(i){return Pu(this,i,!0,!0)},get size(){return Bu(this,!0)},has(i){return Du.call(this,i,!0)},add:fo("add"),set:fo("set"),delete:fo("delete"),clear:fo("clear"),forEach:Iu(!0,!0)},IY=["keys","values","entries",Symbol.iterator];IY.forEach(i=>{yN[i]=uu(i,!1,!1),CN[i]=uu(i,!0,!1),vN[i]=uu(i,!1,!0),EN[i]=uu(i,!0,!0)});function _N(i,u){const d=u?i?EN:vN:i?CN:yN;return(p,b,v)=>b==="__v_isReactive"?!i:b==="__v_isReadonly"?i:b==="__v_raw"?p:Reflect.get(Nu(d,b)&&b in p?d:p,b,v)}var LY={get:_N(!1,!1)},$Y={get:_N(!0,!1)};function SN(i,u,d){const p=ht(d);if(p!==d&&u.call(i,p)){const b=aN(i);console.warn(`Reactive ${b} contains both the raw and reactive versions of the same object${b==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var wN=new WeakMap,FY=new WeakMap,xN=new WeakMap,MY=new WeakMap;function UY(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zY(i){return i.__v_skip||!Object.isExtensible(i)?0:UY(aN(i))}function th(i){return i&&i.__v_isReadonly?i:AN(i,!1,dN,LY,wN)}function kN(i){return AN(i,!0,mN,$Y,xN)}function AN(i,u,d,p,b){if(!Ru(i))return console.warn(`value cannot be made reactive: ${String(i)}`),i;if(i.__v_raw&&!(u&&i.__v_isReactive))return i;const v=b.get(i);if(v)return v;const E=zY(i);if(E===0)return i;const A=new Proxy(i,E===2?p:d);return b.set(i,A),A}function ht(i){return i&&ht(i.__v_raw)||i}function Ag(i){return!!(i&&i.__v_isRef===!0)}ts("nextTick",()=>Kg);ts("dispatch",i=>Li.bind(Li,i));ts("watch",(i,{evaluateLater:u,effect:d})=>(p,b)=>{let v=u(p),E=!0,A,M=d(()=>v($=>{JSON.stringify($),E?A=$:queueMicrotask(()=>{b($,A),A=$}),E=!1}));i._x_effects.delete(M)});ts("store",rY);ts("data",i=>AA(i));ts("root",i=>xu(i));ts("refs",i=>(i._x_refs_proxy||(i._x_refs_proxy=Wi(HY(i))),i._x_refs_proxy));function HY(i){let u=[],d=i;for(;d;)d._x_refs&&u.push(d._x_refs),d=d.parentNode;return u}var ag={};function NN(i){return ag[i]||(ag[i]=0),++ag[i]}function jY(i,u){return ku(i,d=>{if(d._x_ids&&d._x_ids[u])return!0})}function VY(i,u){i._x_ids||(i._x_ids={}),i._x_ids[u]||(i._x_ids[u]=NN(u))}ts("id",i=>(u,d=null)=>{let p=jY(i,u),b=p?p._x_ids[u]:NN(u);return d?`${u}-${b}-${d}`:`${u}-${b}`});ts("el",i=>i);RN("Focus","focus","focus");RN("Persist","persist","persist");function RN(i,u,d){ts(u,p=>sa(`You can't use [$${directiveName}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${d}`,p))}function WY({get:i,set:u},{get:d,set:p}){let b=!0,v,E,A=ia(()=>{let M,$;b?(M=i(),p(M),$=d(),b=!1):(M=i(),$=d(),E=JSON.stringify(M),JSON.stringify($),E!==v?($=d(),p(M),$=M):(u($),M=$)),v=JSON.stringify(M),JSON.stringify($)});return()=>{ji(A)}}Ot("modelable",(i,{expression:u},{effect:d,evaluateLater:p,cleanup:b})=>{let v=p(u),E=()=>{let J;return v(fe=>J=fe),J},A=p(`${u} = __placeholder`),M=J=>A(()=>{},{scope:{__placeholder:J}}),$=E();M($),queueMicrotask(()=>{if(!i._x_model)return;i._x_removeModelListeners.default();let J=i._x_model.get,fe=i._x_model.set,Ee=WY({get(){return J()},set(Te){fe(Te)}},{get(){return E()},set(Te){M(Te)}});b(Ee)})});var qY=document.createElement("div");Ot("teleport",(i,{modifiers:u,expression:d},{cleanup:p})=>{i.tagName.toLowerCase()!=="template"&&sa("x-teleport can only be used on a <template> tag",i);let b=qi(()=>document.querySelector(d),()=>qY)();b||sa(`Cannot find x-teleport element for selector: "${d}"`);let v=i.content.cloneNode(!0).firstElementChild;i._x_teleport=v,v._x_teleportBack=i,i._x_forwardEvents&&i._x_forwardEvents.forEach(E=>{v.addEventListener(E,A=>{A.stopPropagation(),i.dispatchEvent(new A.constructor(A.type,A))})}),Vi(v,{},i),Ht(()=>{u.includes("prepend")?b.parentNode.insertBefore(v,b):u.includes("append")?b.parentNode.insertBefore(v,b.nextSibling):b.appendChild(v),go(v),v._x_ignore=!0}),p(()=>v.remove())});var TN=()=>{};TN.inline=(i,{modifiers:u},{cleanup:d})=>{u.includes("self")?i._x_ignoreSelf=!0:i._x_ignore=!0,d(()=>{u.includes("self")?delete i._x_ignoreSelf:delete i._x_ignore})};Ot("ignore",TN);Ot("effect",(i,{expression:u},{effect:d})=>d(an(i,u)));function Ng(i,u,d,p){let b=i,v=M=>p(M),E={},A=(M,$)=>J=>$(M,J);if(d.includes("dot")&&(u=KY(u)),d.includes("camel")&&(u=GY(u)),d.includes("passive")&&(E.passive=!0),d.includes("capture")&&(E.capture=!0),d.includes("window")&&(b=window),d.includes("document")&&(b=document),d.includes("prevent")&&(v=A(v,(M,$)=>{$.preventDefault(),M($)})),d.includes("stop")&&(v=A(v,(M,$)=>{$.stopPropagation(),M($)})),d.includes("self")&&(v=A(v,(M,$)=>{$.target===i&&M($)})),(d.includes("away")||d.includes("outside"))&&(b=document,v=A(v,(M,$)=>{i.contains($.target)||$.target.isConnected!==!1&&(i.offsetWidth<1&&i.offsetHeight<1||i._x_isShown!==!1&&M($))})),d.includes("once")&&(v=A(v,(M,$)=>{M($),b.removeEventListener(u,v,E)})),v=A(v,(M,$)=>{XY(u)&&JY($,d)||M($)}),d.includes("debounce")){let M=d[d.indexOf("debounce")+1]||"invalid-wait",$=Cu(M.split("ms")[0])?Number(M.split("ms")[0]):250;v=ZA(v,$)}if(d.includes("throttle")){let M=d[d.indexOf("throttle")+1]||"invalid-wait",$=Cu(M.split("ms")[0])?Number(M.split("ms")[0]):250;v=eN(v,$)}return b.addEventListener(u,v,E),()=>{b.removeEventListener(u,v,E)}}function KY(i){return i.replace(/-/g,".")}function GY(i){return i.toLowerCase().replace(/-(\w)/g,(u,d)=>d.toUpperCase())}function Cu(i){return!Array.isArray(i)&&!isNaN(i)}function YY(i){return[" ","_"].includes(i)?i:i.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function XY(i){return["keydown","keyup"].includes(i)}function JY(i,u){let d=u.filter(v=>!["window","document","prevent","stop","once","capture"].includes(v));if(d.includes("debounce")){let v=d.indexOf("debounce");d.splice(v,Cu((d[v+1]||"invalid-wait").split("ms")[0])?2:1)}if(d.includes("throttle")){let v=d.indexOf("throttle");d.splice(v,Cu((d[v+1]||"invalid-wait").split("ms")[0])?2:1)}if(d.length===0||d.length===1&&Xk(i.key).includes(d[0]))return!1;const b=["ctrl","shift","alt","meta","cmd","super"].filter(v=>d.includes(v));return d=d.filter(v=>!b.includes(v)),!(b.length>0&&b.filter(E=>((E==="cmd"||E==="super")&&(E="meta"),i[`${E}Key`])).length===b.length&&Xk(i.key).includes(d[0]))}function Xk(i){if(!i)return[];i=YY(i);let u={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return u[i]=i,Object.keys(u).map(d=>{if(u[d]===i)return d}).filter(d=>d)}Ot("model",(i,{modifiers:u,expression:d},{effect:p,cleanup:b})=>{let v=i;u.includes("parent")&&(v=i.parentNode);let E=an(v,d),A;typeof d=="string"?A=an(v,`${d} = __placeholder`):typeof d=="function"&&typeof d()=="string"?A=an(v,`${d()} = __placeholder`):A=()=>{};let M=()=>{let Ee;return E(Te=>Ee=Te),Jk(Ee)?Ee.get():Ee},$=Ee=>{let Te;E(he=>Te=he),Jk(Te)?Te.set(Ee):A(()=>{},{scope:{__placeholder:Ee}})};u.includes("fill")&&i.hasAttribute("value")&&(M()===null||M()==="")&&$(i.value),typeof d=="string"&&i.type==="radio"&&Ht(()=>{i.hasAttribute("name")||i.setAttribute("name",d)});var J=i.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(i.type)||u.includes("lazy")?"change":"input";let fe=Ui?()=>{}:Ng(i,J,u,Ee=>{$(QY(i,u,Ee,M()))});if(i._x_removeModelListeners||(i._x_removeModelListeners={}),i._x_removeModelListeners.default=fe,b(()=>i._x_removeModelListeners.default()),i.form){let Ee=Ng(i.form,"reset",[],Te=>{Kg(()=>i._x_model&&i._x_model.set(i.value))});b(()=>Ee())}i._x_model={get(){return M()},set(Ee){$(Ee)}},i._x_forceModelUpdate=Ee=>{Ee=Ee===void 0?M():Ee,Ee===void 0&&typeof d=="string"&&d.match(/\./)&&(Ee=""),window.fromModel=!0,Ht(()=>JA(i,"value",Ee)),delete window.fromModel},p(()=>{let Ee=M();u.includes("unintrusive")&&document.activeElement.isSameNode(i)||i._x_forceModelUpdate(Ee)})});function QY(i,u,d,p){return Ht(()=>{if(d instanceof CustomEvent&&d.detail!==void 0)return typeof d.detail<"u"?d.detail:d.target.value;if(i.type==="checkbox")if(Array.isArray(p)){let b=u.includes("number")?ig(d.target.value):d.target.value;return d.target.checked?p.concat([b]):p.filter(v=>!ZY(v,b))}else return d.target.checked;else{if(i.tagName.toLowerCase()==="select"&&i.multiple)return u.includes("number")?Array.from(d.target.selectedOptions).map(b=>{let v=b.value||b.text;return ig(v)}):Array.from(d.target.selectedOptions).map(b=>b.value||b.text);{let b=d.target.value;return u.includes("number")?ig(b):u.includes("trim")?b.trim():b}}})}function ig(i){let u=i?parseFloat(i):null;return eX(u)?u:i}function ZY(i,u){return i==u}function eX(i){return!Array.isArray(i)&&!isNaN(i)}function Jk(i){return i!==null&&typeof i=="object"&&typeof i.get=="function"&&typeof i.set=="function"}Ot("cloak",i=>queueMicrotask(()=>Ht(()=>i.removeAttribute(ca("cloak")))));qA(()=>`[${ca("init")}]`);Ot("init",qi((i,{expression:u},{evaluate:d})=>typeof u=="string"?!!u.trim()&&d(u,{},!1):d(u,{},!1)));Ot("text",(i,{expression:u},{effect:d,evaluateLater:p})=>{let b=p(u);d(()=>{b(v=>{Ht(()=>{i.textContent=v})})})});Ot("html",(i,{expression:u},{effect:d,evaluateLater:p})=>{let b=p(u);d(()=>{b(v=>{Ht(()=>{i.innerHTML=v,i._x_ignoreSelf=!0,go(i),delete i._x_ignoreSelf})})})});Vg(LA(":",$A(ca("bind:"))));Ot("bind",(i,{value:u,modifiers:d,expression:p,original:b},{effect:v})=>{if(!u){let A={};iY(A),an(i,p)($=>{nN(i,$,b)},{scope:A});return}if(u==="key")return tX(i,p);let E=an(i,p);v(()=>E(A=>{A===void 0&&typeof p=="string"&&p.match(/\./)&&(A=""),Ht(()=>JA(i,u,A,d))}))});function tX(i,u){i._x_keyExpression=u}WA(()=>`[${ca("data")}]`);Ot("data",qi((i,{expression:u},{cleanup:d})=>{u=u===""?"{}":u;let p={};bg(p,i);let b={};lY(b,p);let v=ea(i,u,{scope:b});(v===void 0||v===!0)&&(v={}),bg(v,i);let E=aa(v);NA(E);let A=Vi(i,E);E.init&&ea(i,E.init),d(()=>{E.destroy&&ea(i,E.destroy),A()})}));Ot("show",(i,{modifiers:u,expression:d},{effect:p})=>{let b=an(i,d);i._x_doHide||(i._x_doHide=()=>{Ht(()=>{i.style.setProperty("display","none",u.includes("important")?"important":void 0)})}),i._x_doShow||(i._x_doShow=()=>{Ht(()=>{i.style.length===1&&i.style.display==="none"?i.removeAttribute("style"):i.style.removeProperty("display")})});let v=()=>{i._x_doHide(),i._x_isShown=!1},E=()=>{i._x_doShow(),i._x_isShown=!0},A=()=>setTimeout(E),M=Sg(fe=>fe?E():v(),fe=>{typeof i._x_toggleAndCascadeWithTransitions=="function"?i._x_toggleAndCascadeWithTransitions(i,fe,E,v):fe?A():v()}),$,J=!0;p(()=>b(fe=>{!J&&fe===$||(u.includes("immediate")&&(fe?A():v()),M(fe),$=fe,J=!1)}))});Ot("for",(i,{expression:u},{effect:d,cleanup:p})=>{let b=sX(u),v=an(i,b.items),E=an(i,i._x_keyExpression||"index");i._x_prevKeys=[],i._x_lookup={},d(()=>nX(i,b,v,E)),p(()=>{Object.values(i._x_lookup).forEach(A=>A.remove()),delete i._x_prevKeys,delete i._x_lookup})});function nX(i,u,d,p){let b=E=>typeof E=="object"&&!Array.isArray(E),v=i;d(E=>{oX(E)&&E>=0&&(E=Array.from(Array(E).keys(),ve=>ve+1)),E===void 0&&(E=[]);let A=i._x_lookup,M=i._x_prevKeys,$=[],J=[];if(b(E))E=Object.entries(E).map(([ve,Be])=>{let Ye=Qk(u,Be,ve,E);p(ne=>J.push(ne),{scope:{index:ve,...Ye}}),$.push(Ye)});else for(let ve=0;ve<E.length;ve++){let Be=Qk(u,E[ve],ve,E);p(Ye=>J.push(Ye),{scope:{index:ve,...Be}}),$.push(Be)}let fe=[],Ee=[],Te=[],he=[];for(let ve=0;ve<M.length;ve++){let Be=M[ve];J.indexOf(Be)===-1&&Te.push(Be)}M=M.filter(ve=>!Te.includes(ve));let Pe="template";for(let ve=0;ve<J.length;ve++){let Be=J[ve],Ye=M.indexOf(Be);if(Ye===-1)M.splice(ve,0,Be),fe.push([Pe,ve]);else if(Ye!==ve){let ne=M.splice(ve,1)[0],Xe=M.splice(Ye-1,1)[0];M.splice(ve,0,Xe),M.splice(Ye,0,ne),Ee.push([ne,Xe])}else he.push(Be);Pe=Be}for(let ve=0;ve<Te.length;ve++){let Be=Te[ve];A[Be]._x_effects&&A[Be]._x_effects.forEach(vA),A[Be].remove(),A[Be]=null,delete A[Be]}for(let ve=0;ve<Ee.length;ve++){let[Be,Ye]=Ee[ve],ne=A[Be],Xe=A[Ye],Ss=document.createElement("div");Ht(()=>{Xe.after(Ss),ne.after(Xe),Xe._x_currentIfEl&&Xe.after(Xe._x_currentIfEl),Ss.before(ne),ne._x_currentIfEl&&ne.after(ne._x_currentIfEl),Ss.remove()}),qk(Xe,$[J.indexOf(Ye)])}for(let ve=0;ve<fe.length;ve++){let[Be,Ye]=fe[ve],ne=Be==="template"?v:A[Be];ne._x_currentIfEl&&(ne=ne._x_currentIfEl);let Xe=$[Ye],Ss=J[Ye],at=document.importNode(v.content,!0).firstElementChild;Vi(at,aa(Xe),v),Ht(()=>{ne.after(at),go(at)}),typeof Ss=="object"&&sa("x-for key cannot be an object, it must be a string or an integer",v),A[Ss]=at}for(let ve=0;ve<he.length;ve++)qk(A[he[ve]],$[J.indexOf(he[ve])]);v._x_prevKeys=J})}function sX(i){let u=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,d=/^\s*\(|\)\s*$/g,p=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,b=i.match(p);if(!b)return;let v={};v.items=b[2].trim();let E=b[1].replace(d,"").trim(),A=E.match(u);return A?(v.item=E.replace(u,"").trim(),v.index=A[1].trim(),A[2]&&(v.collection=A[2].trim())):v.item=E,v}function Qk(i,u,d,p){let b={};return/^\[.*\]$/.test(i.item)&&Array.isArray(u)?i.item.replace("[","").replace("]","").split(",").map(E=>E.trim()).forEach((E,A)=>{b[E]=u[A]}):/^\{.*\}$/.test(i.item)&&!Array.isArray(u)&&typeof u=="object"?i.item.replace("{","").replace("}","").split(",").map(E=>E.trim()).forEach(E=>{b[E]=u[E]}):b[i.item]=u,i.index&&(b[i.index]=d),i.collection&&(b[i.collection]=p),b}function oX(i){return!Array.isArray(i)&&!isNaN(i)}function ON(){}ON.inline=(i,{expression:u},{cleanup:d})=>{let p=xu(i);p._x_refs||(p._x_refs={}),p._x_refs[u]=i,d(()=>delete p._x_refs[u])};Ot("ref",ON);Ot("if",(i,{expression:u},{effect:d,cleanup:p})=>{let b=an(i,u),v=()=>{if(i._x_currentIfEl)return i._x_currentIfEl;let A=i.content.cloneNode(!0).firstElementChild;return Vi(A,{},i),Ht(()=>{i.after(A),go(A)}),i._x_currentIfEl=A,i._x_undoIf=()=>{po(A,M=>{M._x_effects&&M._x_effects.forEach(vA)}),A.remove(),delete i._x_currentIfEl},A},E=()=>{i._x_undoIf&&(i._x_undoIf(),delete i._x_undoIf)};d(()=>b(A=>{A?v():E()})),p(()=>i._x_undoIf&&i._x_undoIf())});Ot("id",(i,{expression:u},{evaluate:d})=>{d(u).forEach(b=>VY(i,b))});Vg(LA("@",$A(ca("on:"))));Ot("on",qi((i,{value:u,modifiers:d,expression:p},{cleanup:b})=>{let v=p?an(i,p):()=>{};i.tagName.toLowerCase()==="template"&&(i._x_forwardEvents||(i._x_forwardEvents=[]),i._x_forwardEvents.includes(u)||i._x_forwardEvents.push(u));let E=Ng(i,u,d,A=>{v(()=>{},{scope:{$event:A},params:[A]})});b(()=>E())}));Lu("Collapse","collapse","collapse");Lu("Intersect","intersect","intersect");Lu("Focus","trap","focus");Lu("Mask","mask","mask");function Lu(i,u,d){Ot(u,p=>sa(`You can't use [x-${u}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${d}`,p))}Ki.setEvaluator(PA);Ki.setReactivityEngine({reactive:th,effect:vY,release:CY,raw:ht});var rX=Ki,PN=rX,Rg={},aX={get exports(){return Rg},set exports(i){Rg=i}};(function(i){(function(){var u=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},d=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},p=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},b=function(e,t){return v(function(n,s){return e.eq(t(n),t(s))})},v=function(e){return{eq:e}},E=v(function(e,t){return e===t}),A=E,M=function(e){return v(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},$=function(e,t){return b(M(e),function(n){return p(n,t)})},J=function(e){return v(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!$(A).eq(s,o))return!1;for(var r=s.length,a=0;a<r;a++){var c=s[a];if(!e.eq(t[c],n[c]))return!1}return!0})},fe=v(function(e,t){if(e===t)return!0;var n=u(e),s=u(t);return n!==s?!1:d(n)?e===t:n==="array"?M(fe).eq(e,t):n==="object"?J(fe).eq(e,t):!1});const Ee=Object.getPrototypeOf,Te=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},he=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Te(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},Pe=e=>t=>he(t)===e,ve=e=>t=>typeof t===e,Be=e=>t=>e===t,Ye=(e,t)=>Xe(e)&&Te(e,t,(n,s)=>Ee(n)===s),ne=Pe("string"),Xe=Pe("object"),Ss=e=>Ye(e,Object),at=Pe("array"),Pn=Be(null),bo=ve("boolean"),Kt=Be(void 0),bt=e=>e==null,ee=e=>!bt(e),$e=ve("function"),Fn=ve("number"),gr=(e,t)=>{if(at(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Ae=()=>{},yo=(e,t)=>(...n)=>e(t.apply(null,n)),nh=(e,t)=>n=>e(t(n)),Z=e=>()=>e,Gt=e=>e,DN=(e,t)=>e===t;function ae(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const Gi=e=>t=>!e(t),sh=e=>()=>{throw new Error(e)},$u=e=>e(),la=e=>{e()},it=Z(!1),yt=Z(!0);class y{constructor(t,n){this.tag=t,this.value=n}static some(t){return new y(!0,t)}static none(){return y.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?y.some(t(this.value)):y.none()}bind(t){return this.tag?t(this.value):y.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:y.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ee(t)?y.some(t):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);const Fu=Array.prototype.slice,BN=Array.prototype.indexOf,IN=Array.prototype.push,oh=(e,t)=>BN.call(e,t),LN=(e,t)=>{const n=oh(e,t);return n===-1?y.none():y.some(n)},Ge=(e,t)=>oh(e,t)>-1,mt=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},Le=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},j=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},rh=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},ua=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];(t(a,o)?n:s).push(a)}return{pass:n,fail:s}},be=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},fa=(e,t,n)=>(rh(e,(s,o)=>{n=t(n,s,o)}),n),cn=(e,t,n)=>(j(e,(s,o)=>{n=t(n,s,o)}),n),ah=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return y.some(r);if(n(r,s))break}return y.none()},Ct=(e,t)=>ah(e,t,it),da=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return y.some(n)}return y.none()},ih=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!at(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);IN.apply(t,e[n])}return t},ns=(e,t)=>ih(Le(e,t)),Us=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},ma=e=>{const t=Fu.call(e,0);return t.reverse(),t},Yi=(e,t)=>be(e,n=>!Ge(t,n)),Mu=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},vo=(e,t)=>{const n=Fu.call(e,0);return n.sort(t),n},Xi=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),tn=e=>Xi(e,0),Co=e=>Xi(e,e.length-1),ln=$e(Array.from)?Array.from:e=>Fu.call(e),hr=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return y.none()},$N=(e,t)=>{const n=[],s=$e(t)?o=>mt(n,r=>t(r,o)):o=>Ge(n,o);for(let o=0,r=e.length;o<r;o++){const a=e[o];s(a)||n.push(a)}return n},un=Object.keys,FN=Object.hasOwnProperty,Je=(e,t)=>{const n=un(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],a=e[r];t(a,r)}},Ji=(e,t)=>MN(e,(n,s)=>({k:s,v:t(n,s)})),MN=(e,t)=>{const n={};return Je(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Uu=e=>(t,n)=>{e[n]=t},ch=(e,t,n,s)=>{Je(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},UN=(e,t)=>{const n={},s={};return ch(e,t,Uu(n),Uu(s)),{t:n,f:s}},pa=(e,t)=>{const n={};return ch(e,t,Uu(n),Ae),n},zu=(e,t)=>{const n=[];return Je(e,(s,o)=>{n.push(t(s,o))}),n},Hu=e=>zu(e,Gt),Ze=(e,t)=>Se(e,t)?y.from(e[t]):y.none(),Se=(e,t)=>FN.call(e,t),br=(e,t)=>Se(e,t)&&e[t]!==void 0&&e[t]!==null,zN=(e,t,n=fe)=>J(n).eq(e,t),lh=e=>{const t={};return j(e,n=>{t[n]={}}),un(t)},uh=e=>e.length!==void 0,ju=Array.isArray,HN=e=>{if(ju(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Qi=(e,t,n)=>{if(!e)return!1;if(n=n||e,uh(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(Se(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Vu=(e,t)=>{const n=[];return Qi(e,(s,o)=>{n.push(t(s,o,e))}),n},ga=(e,t)=>{const n=[];return Qi(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},jN=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},Zi=(e,t,n,s)=>{let o=Kt(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},fh=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Eo=e=>e[e.length-1],_o=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},VN=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),c=a||s("(pointer:coarse)"),l=o||!r&&a&&s("(min-device-width:768px)"),f=r||a&&!l,g=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,m=!f&&!l&&!g;return{isiPad:Z(o),isiPhone:Z(r),isTablet:Z(l),isPhone:Z(f),isTouch:Z(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Z(g),isDesktop:Z(m)}},WN=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},qN=(e,t)=>{const n=WN(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Wu(s(1),s(2))},KN=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?dh():qN(e,n)},dh=()=>Wu(0,0),Wu=(e,t)=>({major:e,minor:t}),ha={nu:Wu,detect:KN,unknown:dh},GN=(e,t)=>hr(t.brands,n=>{const s=n.brand.toLowerCase();return Ct(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:ha.nu(parseInt(n.version,10),0)}))}),mh=(e,t)=>{const n=String(t).toLowerCase();return Ct(e,s=>s.search(n))},YN=(e,t)=>mh(e,t).map(n=>{const s=ha.detect(n.versionRegexes,t);return{current:n.name,version:s}}),XN=(e,t)=>mh(e,t).map(n=>{const s=ha.detect(n.versionRegexes,t);return{current:n.name,version:s}}),JN=(e,t)=>e.substring(t),ph=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,gh=(e,t)=>Pt(e,t)?JN(e,t.length):e,Mt=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?Kt(s)?!0:o+t.length<=s:!1},Pt=(e,t)=>ph(e,t,0),hh=(e,t)=>ph(e,t,e.length-t.length),qu=e=>t=>t.replace(e,""),yr=qu(/^\s+|\s+$/g),QN=qu(/^\s+/g),bh=qu(/\s+$/g),ss=e=>e.length>0,ba=e=>!ss(e),ZN=(e,t)=>t<=0?"":new Array(t+1).join(e),ec=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?y.none():y.some(n)},Ku=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ws=e=>t=>Mt(t,e),eR=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Mt(e,"edge/")&&Mt(e,"chrome")&&Mt(e,"safari")&&Mt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ku],search:e=>Mt(e,"chrome")&&!Mt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Mt(e,"msie")||Mt(e,"trident")},{name:"Opera",versionRegexes:[Ku,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ws("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ws("firefox")},{name:"Safari",versionRegexes:[Ku,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Mt(e,"safari")||Mt(e,"mobile/"))&&Mt(e,"applewebkit")}],tR=[{name:"Windows",search:ws("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Mt(e,"iphone")||Mt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ws("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ws("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ws("linux"),versionRegexes:[]},{name:"Solaris",search:ws("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ws("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ws("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yh={browsers:Z(eR),oses:Z(tR)},vh="Edge",Ch="Chromium",Eh="IE",_h="Opera",Sh="Firefox",wh="Safari",nR=()=>xh({current:void 0,version:ha.unknown()}),xh=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(vh),isChromium:s(Ch),isIE:s(Eh),isOpera:s(_h),isFirefox:s(Sh),isSafari:s(wh)}},kh={unknown:nR,nu:xh,edge:Z(vh),chromium:Z(Ch),ie:Z(Eh),opera:Z(_h),firefox:Z(Sh),safari:Z(wh)},Ah="Windows",Nh="iOS",Rh="Android",Th="Linux",Oh="macOS",Ph="Solaris",Dh="FreeBSD",Bh="ChromeOS",sR=()=>Ih({current:void 0,version:ha.unknown()}),Ih=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(Ah),isiOS:s(Nh),isAndroid:s(Rh),isMacOS:s(Oh),isLinux:s(Th),isSolaris:s(Ph),isFreeBSD:s(Dh),isChromeOS:s(Bh)}},Lh={unknown:sR,nu:Ih,windows:Z(Ah),ios:Z(Nh),android:Z(Rh),linux:Z(Th),macos:Z(Oh),solaris:Z(Ph),freebsd:Z(Dh),chromeos:Z(Bh)},oR={detect:(e,t,n)=>{const s=yh.browsers(),o=yh.oses(),r=t.bind(l=>GN(s,l)).orThunk(()=>YN(s,e)).fold(kh.unknown,kh.nu),a=XN(o,e).fold(Lh.unknown,Lh.nu),c=VN(a,r,e,n);return{browser:r,os:a,deviceType:c}}},rR=e=>window.matchMedia(e).matches;let aR=_o(()=>oR.detect(navigator.userAgent,y.from(navigator.userAgentData),rR));const zs=()=>aR(),iR=navigator.userAgent,Gu=zs(),os=Gu.browser,rs=Gu.os,So=Gu.deviceType,cR=iR.indexOf("Windows Phone")!==-1,Ie={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:os.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!os.isIE(),windowsPhone:cR,browser:{current:os.current,version:os.version,isChromium:os.isChromium,isEdge:os.isEdge,isFirefox:os.isFirefox,isIE:os.isIE,isOpera:os.isOpera,isSafari:os.isSafari},os:{current:rs.current,version:rs.version,isAndroid:rs.isAndroid,isChromeOS:rs.isChromeOS,isFreeBSD:rs.isFreeBSD,isiOS:rs.isiOS,isLinux:rs.isLinux,isMacOS:rs.isMacOS,isSolaris:rs.isSolaris,isWindows:rs.isWindows},deviceType:{isDesktop:So.isDesktop,isiPad:So.isiPad,isiPhone:So.isiPhone,isPhone:So.isPhone,isTablet:So.isTablet,isTouch:So.isTouch,isWebView:So.isWebView}},lR=/^\s*|\s*$/g,$h=e=>bt(e)?"":(""+e).replace(lR,""),uR=(e,t)=>t?t==="array"&&ju(e)?!0:typeof e===t:e!==void 0,fR=(e,t,n={})=>{const s=ne(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},dR=Se,mR=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Se(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Fh=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Qi(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(Fh(o,t,n,s),!0)))},q={trim:$h,isArray:ju,is:uR,toArray:HN,makeMap:fR,each:Qi,map:Vu,grep:ga,inArray:jN,hasOwn:dR,extend:mR,walk:Fh,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>at(e)?e:e===""?[]:Vu(e.split(t||","),$h),_addCacheSuffix:e=>{const t=Ie.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},vr=(e,t,n=DN)=>e.exists(s=>n(s,t)),pR=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},Yt=(e,t,n)=>e.isSome()&&t.isSome()?y.some(n(e.getOrDie(),t.getOrDie())):y.none(),gR=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?y.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):y.none(),ya=(e,t)=>e?y.some(t):y.none(),hR=typeof window<"u"?window:Function("return this;")(),bR=(e,t)=>{let n=t??hR;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},Mh=(e,t)=>{const n=e.split(".");return bR(n,t)},yR=(e,t)=>Mh(e,t),vR=(e,t)=>{const n=yR(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},CR=Object.getPrototypeOf,ER=e=>vR("HTMLElement",e),_R=e=>{const t=Mh("ownerDocument.defaultView",e);return Xe(e)&&(ER(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(CR(e).constructor.name))},Uh=8,zh=9,Hh=11,va=1,jh=3,et=e=>e.dom.nodeName.toLowerCase(),Vh=e=>e.dom.nodeType,tc=e=>t=>Vh(t)===e,SR=e=>Vh(e)===Uh||et(e)==="#comment",wR=e=>nn(e)&&_R(e.dom),nn=tc(va),gn=tc(jh),xR=tc(zh),kR=tc(Hh),Yu=e=>t=>nn(t)&&et(t)===e,Wh=(e,t,n)=>{if(ne(n)||bo(n)||Fn(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},kt=(e,t,n)=>{Wh(e.dom,t,n)},Hs=(e,t)=>{const n=e.dom;Je(t,(s,o)=>{Wh(n,o,s)})},hn=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},xs=(e,t)=>y.from(hn(e,t)),nc=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Dt=(e,t)=>{e.dom.removeAttribute(t)},AR=e=>{const t=e.dom.attributes;return t==null||t.length===0},qh=e=>cn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Xu=(e,t)=>{const n=hn(e,t);return n===void 0||n===""?[]:n.split(" ")},NR=(e,t,n)=>{const o=Xu(e,t).concat([n]);return kt(e,t,o.join(" ")),!0},RR=(e,t,n)=>{const s=be(Xu(e,t),o=>o!==n);return s.length>0?kt(e,t,s.join(" ")):Dt(e,t),!1},Ca=e=>e.dom.classList!==void 0,Kh=e=>Xu(e,"class"),Gh=(e,t)=>NR(e,"class",t),Yh=(e,t)=>RR(e,"class",t),TR=(e,t)=>Ge(Kh(e),t)?Yh(e,t):Gh(e,t),Cr=(e,t)=>{Ca(e)?e.dom.classList.add(t):Gh(e,t)},Xh=e=>{(Ca(e)?e.dom.classList:Kh(e)).length===0&&Dt(e,"class")},Ea=(e,t)=>{Ca(e)?e.dom.classList.remove(t):Yh(e,t),Xh(e)},OR=(e,t)=>{const n=Ca(e)?e.dom.classList.toggle(t):TR(e,t);return Xh(e),n},Ju=(e,t)=>Ca(e)&&e.dom.classList.contains(t),PR=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return _a(s.childNodes[0])},DR=(e,t)=>{const s=(t||document).createElement(e);return _a(s)},BR=(e,t)=>{const s=(t||document).createTextNode(e);return _a(s)},_a=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},x={fromHtml:PR,fromTag:DR,fromText:BR,fromDom:_a,fromPoint:(e,t,n)=>y.from(e.dom.elementFromPoint(t,n)).map(_a)},Jh=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},Mn=(e,t)=>{const n=e.dom;if(n.nodeType!==va)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Qh=e=>e.nodeType!==va&&e.nodeType!==zh&&e.nodeType!==Hh||e.childElementCount===0,IR=(e,t)=>{const n=t===void 0?document:t.dom;return Qh(n)?[]:Le(n.querySelectorAll(e),x.fromDom)},LR=(e,t)=>{const n=t===void 0?document:t.dom;return Qh(n)?y.none():y.from(n.querySelector(e)).map(x.fromDom)},Fe=(e,t)=>e.dom===t.dom,ks=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},Zh=e=>x.fromDom(e.dom.ownerDocument),As=e=>xR(e)?e:Zh(e),$R=e=>x.fromDom(As(e).dom.documentElement),Sa=e=>x.fromDom(As(e).dom.defaultView),Un=e=>y.from(e.dom.parentNode).map(x.fromDom),Qu=e=>y.from(e.dom.parentElement).map(x.fromDom),eb=(e,t)=>{const n=$e(t)?t:it;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,a=x.fromDom(r);if(o.push(a),n(a)===!0)break;s=r}return o},FR=e=>{const t=n=>be(n,s=>!Fe(e,s));return Un(e).map(Bt).map(t).getOr([])},wo=e=>y.from(e.dom.previousSibling).map(x.fromDom),wa=e=>y.from(e.dom.nextSibling).map(x.fromDom),tb=e=>ma(Jh(e,wo)),nb=e=>Jh(e,wa),Bt=e=>Le(e.dom.childNodes,x.fromDom),sc=(e,t)=>{const n=e.dom.childNodes;return y.from(n[t]).map(x.fromDom)},Zu=e=>sc(e,0),ef=e=>sc(e,e.dom.childNodes.length-1),sb=e=>e.dom.childNodes.length,MR=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return x.fromDom(t)},tf=e=>kR(e)&&ee(e.dom.host),ob=$e(Element.prototype.attachShadow)&&$e(Node.prototype.getRootNode),UR=Z(ob),js=ob?e=>x.fromDom(e.dom.getRootNode()):As,nf=e=>tf(e)?e:MR(As(e)),zR=e=>tf(e)?e:x.fromDom(As(e).dom.body),HR=e=>{const t=js(e);return tf(t)?y.some(t):y.none()},jR=e=>x.fromDom(e.dom.host),rb=e=>{if(UR()&&ee(e.target)){const t=x.fromDom(e.target);if(nn(t)&&VR(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return tn(n)}}return y.from(e.target)},VR=e=>ee(e.dom.shadowRoot),Er=e=>{const t=gn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return HR(x.fromDom(t)).fold(()=>n.body.contains(t),nh(Er,jR))};var ab=(e,t,n,s,o)=>e(n,s)?y.some(n):$e(o)&&o(n)?y.none():t(n,s,o);const Ns=(e,t,n)=>{let s=e.dom;const o=$e(n)?n:it;for(;s.parentNode;){s=s.parentNode;const r=x.fromDom(s);if(t(r))return y.some(r);if(o(r))break}return y.none()},xo=(e,t,n)=>ab((o,r)=>r(o),Ns,e,t,n),WR=(e,t)=>{const n=e.dom;return n.parentNode?qR(x.fromDom(n.parentNode),s=>!Fe(e,s)&&t(s)):y.none()},qR=(e,t)=>{const n=o=>t(x.fromDom(o));return Ct(e.dom.childNodes,n).map(x.fromDom)},KR=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=x.fromDom(s.childNodes[o]);if(t(r))return y.some(r);const a=n(s.childNodes[o]);if(a.isSome())return a}return y.none()};return n(e.dom)},xa=(e,t,n)=>Ns(e,s=>Mn(s,t),n),ka=(e,t)=>LR(t,e),ko=(e,t,n)=>ab((o,r)=>Mn(o,r),xa,e,t,n),GR=e=>ko(e,"[contenteditable]"),oc=(e,t=!1)=>Er(e)?e.dom.isContentEditable:GR(e).fold(Z(t),n=>YR(n)==="true"),YR=e=>e.dom.contentEditable,Aa=e=>e.style!==void 0&&$e(e.style.getPropertyValue),ib=(e,t,n)=>{if(!ne(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Aa(e)&&e.style.setProperty(t,n)},XR=(e,t)=>{Aa(e)&&e.style.removeProperty(t)},cb=(e,t,n)=>{const s=e.dom;ib(s,t,n)},rc=(e,t)=>{const n=e.dom;Je(t,(s,o)=>{ib(n,o,s)})},as=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Er(e)?lb(n,t):o},lb=(e,t)=>Aa(e)?e.style.getPropertyValue(t):"",ac=(e,t)=>{const n=e.dom,s=lb(n,t);return y.from(s).filter(o=>o.length>0)},ub=e=>{const t={},n=e.dom;if(Aa(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},fb=(e,t)=>{const n=e.dom;XR(n,t),vr(xs(e,"style").map(yr),"")&&Dt(e,"style")},JR=e=>e.dom.offsetWidth,bn=(e,t)=>{Un(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Vs=(e,t)=>{wa(e).fold(()=>{Un(e).each(o=>{Et(o,t)})},s=>{bn(s,t)})},db=(e,t)=>{Zu(e).fold(()=>{Et(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Et=(e,t)=>{e.dom.appendChild(t.dom)},mb=(e,t)=>{bn(e,t),Et(t,e)},QR=(e,t)=>{j(t,(n,s)=>{const o=s===0?e:t[s-1];Vs(o,n)})},Ao=(e,t)=>{j(t,n=>{Et(e,n)})},_r=e=>{e.dom.textContent="",j(Bt(e),t=>{st(t)})},st=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Rs=e=>{const t=Bt(e);t.length>0&&QR(e,t),st(e)},ZR=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Bt(x.fromDom(s))},pb=e=>Le(e,x.fromDom),gb=e=>e.dom.innerHTML,ic=(e,t)=>{const s=Zh(e).dom,o=x.fromDom(s.createDocumentFragment()),r=ZR(t,s);Ao(o,r),_r(e),Et(e,o)},eT=e=>{const t=x.fromTag("div"),n=x.fromDom(e.dom.cloneNode(!0));return Et(t,n),gb(t)},tT=(e,t,n,s,o,r,a)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:a}),nT=e=>{const t=x.fromDom(rb(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=yo(s,n);return tT(t,e.clientX,e.clientY,n,s,o,e)},sT=(e,t)=>n=>{e(n)&&t(nT(n))},oT=(e,t,n,s,o)=>{const r=sT(n,s);return e.dom.addEventListener(t,r,o),{unbind:ae(aT,e,t,r,o)}},rT=(e,t,n,s)=>oT(e,t,n,s,!1),aT=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},hb=(e,t)=>({left:e,top:t,translate:(s,o)=>hb(e+s,t+o)}),Sr=hb,iT=e=>{const t=e.getBoundingClientRect();return Sr(t.left,t.top)},cc=(e,t)=>e!==void 0?e:t!==void 0?t:0,cT=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Sr(n.offsetLeft,n.offsetTop);const r=cc(s==null?void 0:s.pageYOffset,o.scrollTop),a=cc(s==null?void 0:s.pageXOffset,o.scrollLeft),c=cc(o.clientTop,n.clientTop),l=cc(o.clientLeft,n.clientLeft);return sf(e).translate(a-l,r-c)},sf=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Sr(s.offsetLeft,s.offsetTop):Er(e)?iT(t):Sr(0,0)},of=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Sr(n,s)},bb=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},yb=(e,t)=>{zs().browser.isSafari()&&$e(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},lT=e=>{const t=e===void 0?window:e;return zs().browser.isFirefox()?y.none():y.from(t.visualViewport)},vb=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Cb=e=>{const t=e===void 0?window:e,n=t.document,s=of(x.fromDom(n));return lT(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,a=o.clientHeight;return vb(s.left,s.top,r,a)},o=>vb(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},uT=(e,t)=>be(Bt(e),t),Eb=(e,t)=>{let n=[];return j(Bt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Eb(s,t))}),n},Ut=(e,t)=>IR(t,e),_b=(e,t,n)=>xa(e,t,n).isSome();class _t{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(r=a[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const No=e=>t=>!!t&&t.nodeType===e,lc=e=>!!e&&!Object.getPrototypeOf(e),te=No(1),rf=e=>{const t=e.toLowerCase();return n=>ee(n)&&n.nodeName.toLowerCase()===t},zn=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return Ge(t,s)}return!1}},uc=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(te(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const a=o.getComputedStyle(s,null);if((a?a.getPropertyValue(e):null)===n[r])return!0}}return!1}},Sb=e=>t=>te(t)&&t.hasAttribute(e),fT=(e,t)=>n=>te(n)&&n.getAttribute(e)===t,Ro=e=>te(e)&&e.hasAttribute("data-mce-bogus"),dT=e=>te(e)&&e.getAttribute("data-mce-bogus")==="all",Ts=e=>te(e)&&e.tagName==="TABLE",wb=e=>t=>!!(te(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),af=zn(["textarea","input"]),z=No(3),mT=No(4),pT=No(7),Ws=No(8),Na=No(9),cf=No(11),ut=rf("br"),xb=rf("img"),Hn=wb("true"),Qe=wb("false"),fc=zn(["td","th"]),gT=zn(["td","th","caption"]),is=zn(["video","audio","object","embed"]),hT=rf("li"),wr="\uFEFF",At="",kb=e=>e===wr,bT=e=>e.replace(/\uFEFF/g,""),lf=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?y.from(r.dom.nodeValue):y.none();return{get:n,getOption:s,set:(r,a)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=a}}})(gn,"text"),dc=e=>lf.get(e),Ab=e=>lf.getOption(e),yT=(e,t)=>lf.set(e,t),vT=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],CT=["td","th"],ET=["thead","tbody","tfoot"],_T=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],ST=["h1","h2","h3","h4","h5","h6"],wT=["li","dd","dt"],xT=["ul","ol","dl"],kT=["pre","script","textarea","style"],AT=["pre"].concat(ST),qs=e=>{let t;return n=>(t=t||Mu(e,yt),Se(t,et(n)))},yn=qs(vT),NT=e=>et(e)==="table",mc=e=>nn(e)&&!yn(e),To=e=>nn(e)&&et(e)==="br",Nb=qs(_T),uf=qs(xT),Ra=qs(wT),RT=qs(ET),Ta=qs(CT),pc=qs(kT),TT=qs(AT),OT=e=>TT(e)||mc(e),PT=e=>{const t=[];let n=e.dom;for(;n;)t.push(x.fromDom(n)),n=n.lastChild;return t},DT=e=>{const t=Ut(e,"br"),n=be(PT(e).slice(-1),To);t.length===n.length&&j(n,st)},gc=()=>{const e=x.fromTag("br");return kt(e,"data-mce-bogus","1"),e},Oo=e=>{_r(e),Et(e,gc())},BT=e=>{ef(e).each(t=>{wo(t).each(n=>{yn(e)&&To(t)&&yn(n)&&st(t)})})},It=wr,hc=kb,Os=bT,IT=te,xr=z,kr=e=>(xr(e)&&(e=e.parentNode),IT(e)&&e.hasAttribute("data-mce-caret")),Ks=e=>xr(e)&&hc(e.data),vn=e=>kr(e)||Ks(e),Rb=e=>e.firstChild!==e.lastChild||!ut(e.firstChild),LT=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(It),r=e.parentNode;if(t){const a=e.previousSibling;if(xr(a)){if(vn(a))return a;if(yc(a))return a.splitText(a.data.length-1)}r==null||r.insertBefore(o,e)}else{const a=e.nextSibling;if(xr(a)){if(vn(a))return a;if(bc(a))return a.splitText(1),a}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},ff=e=>{const t=e.container();return z(t)?t.data.charAt(e.offset())===It||e.isAtStart()&&Ks(t.previousSibling):!1},df=e=>{const t=e.container();return z(t)?t.data.charAt(e.offset()-1)===It||e.isAtEnd()&&Ks(t.nextSibling):!1},$T=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(gc().dom);const a=t.parentNode;return n?a==null||a.insertBefore(r,t):t.nextSibling?a==null||a.insertBefore(r,t.nextSibling):a==null||a.appendChild(r),r},bc=e=>xr(e)&&e.data[0]===It,yc=e=>xr(e)&&e.data[e.data.length-1]===It,FT=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];Ro(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},mf=e=>e&&e.hasAttribute("data-mce-caret")?(FT(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Tb=e=>kr(e.startContainer),Ob=Hn,MT=Qe,UT=ut,zT=z,HT=zn(["script","style","textarea"]),Pb=zn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),jT=zn(["table"]),VT=vn,Dn=e=>VT(e)?!1:zT(e)?!HT(e.parentNode):Pb(e)||UT(e)||jT(e)||pf(e),WT=e=>te(e)&&e.getAttribute("unselectable")==="true",pf=e=>!WT(e)&&MT(e),qT=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(pf(n))return!1;if(Ob(n))return!0}return!0},KT=e=>pf(e)?!cn(ln(e.getElementsByTagName("*")),(t,n)=>t||Ob(n),!1):!1,GT=e=>Pb(e)||KT(e),Db=(e,t)=>Dn(e)&&qT(e,t),YT=/^[ \t\r\n]*$/,Po=e=>YT.test(e),XT=e=>" \f	\v".indexOf(e)!==-1,Bb=e=>e===`
`||e==="\r",JT=(e,t)=>t<e.length&&t>=0?Bb(e[t]):!1,Ib=(e,t=4,n=!0,s=!0)=>{const o=ZN(" ",t),r=e.replace(/\t/g,o);return cn(r,(c,l)=>XT(l)||l===At?c.pcIsSpace||c.str===""&&n||c.str.length===r.length-1&&s||JT(r,c.str.length+1)?{pcIsSpace:!1,str:c.str+At}:{pcIsSpace:!0,str:c.str+" "}:{pcIsSpace:Bb(l),str:c.str+l},{pcIsSpace:!1,str:""}).str},QT=(e,t)=>{const n=x.fromDom(t),s=x.fromDom(e);return _b(s,"pre,code",ae(Fe,n))},ZT=(e,t)=>z(e)&&Po(e.data)&&!QT(e,t),e1=e=>te(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),vc=(e,t)=>Dn(e)&&!ZT(e,t)||e1(e)||t1(e),t1=Sb("data-mce-bookmark"),n1=Sb("data-mce-bogus"),s1=fT("data-mce-bogus","all"),o1=(e,t)=>{let n=0;if(vc(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const o=new _t(s,e);do{if(t){if(s1(s)){s=o.next(!0);continue}if(n1(s)){s=o.next();continue}}if(ut(s)){n++,s=o.next();continue}if(vc(s,e))return!1;s=o.next()}while(s);return n<=1}},pt=(e,t=!0)=>o1(e.dom,t),Oa="data-mce-block",r1=e=>be(un(e),t=>!/[A-Z]/.test(t)),gf=e=>r1(e).join(","),Lb=(e,t)=>ee(t.querySelector(e))?(t.setAttribute(Oa,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Oa),!1),$b=(e,t)=>{const n=gf(e.getTransparentElements()),s=gf(e.getBlockElements());return be(t.querySelectorAll(n),o=>Lb(s,o))},Fb=(e,t)=>{var n;const s=t?"lastChild":"firstChild";for(let o=e[s];o;o=o[s])if(pt(x.fromDom(o))){(n=o.parentNode)===null||n===void 0||n.removeChild(o);return}},a1=(e,t)=>{const n=document.createRange(),s=e.parentNode;if(s){n.setStartBefore(e),n.setEndBefore(t);const o=n.extractContents();Fb(o,!0),n.setStartAfter(t),n.setEndAfter(e);const r=n.extractContents();Fb(r,!1),pt(x.fromDom(o))||s.insertBefore(o,e),pt(x.fromDom(t))||s.insertBefore(t,e),pt(x.fromDom(r))||s.insertBefore(r,e),s.removeChild(e)}},i1=(e,t,n)=>{const s=e.getBlockElements(),o=x.fromDom(t),r=c=>et(c)in s,a=c=>Fe(c,o);j(pb(n),c=>{Ns(c,r,a).each(l=>{const f=uT(c,g=>r(g)&&!e.isValidChild(et(l),et(g)));if(f.length>0){const g=Qu(l);j(f,m=>{Ns(m,r,a).each(h=>{a1(h.dom,m.dom)})}),g.each(m=>$b(e,m.dom))}})})},c1=(e,t,n)=>{j([...n,...Do(e,t)?[t]:[]],s=>j(Ut(x.fromDom(s),s.nodeName.toLowerCase()),o=>{f1(e,o.dom)&&Rs(o)}))},hf=(e,t)=>{const n=$b(e,t);i1(e,t,n),c1(e,t,n)},l1=(e,t)=>{if(yf(e,t)){const n=gf(e.getBlockElements());Lb(n,t)}},u1=(e,t,n)=>{const s=r=>Fe(r,x.fromDom(t)),o=eb(x.fromDom(n),s);Xi(o,o.length-2).filter(nn).fold(()=>hf(e,t),r=>hf(e,r.dom))},bf=e=>e.hasAttribute(Oa),Cc=(e,t)=>Se(e.getTransparentElements(),t),yf=(e,t)=>te(t)&&Cc(e,t.nodeName),Do=(e,t)=>yf(e,t)&&bf(t),f1=(e,t)=>yf(e,t)&&!bf(t),d1=(e,t)=>t.type===1&&Cc(e,t.name)&&ne(t.attr(Oa)),Mb=(e,t)=>t.type===1&&Cc(e,t.name)&&Kt(t.attr(Oa)),m1=zs().browser,Ub=e=>Ct(e,nn),p1=e=>m1.isFirefox()&&et(e)==="table"?Ub(Bt(e)).filter(t=>et(t)==="caption").bind(t=>Ub(nb(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,zb=(e,t)=>e.children&&Ge(e.children,t),g1=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&as(x.fromDom(e),"position")==="static"){const c=t.getBoundingClientRect();return s=c.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=c.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let a=t;for(;a&&a!==n&&a.nodeType&&!zb(a,n);){const c=a;s+=c.offsetLeft||0,o+=c.offsetTop||0,a=c.offsetParent}for(a=t.parentNode;a&&a!==n&&a.nodeType&&!zb(a,n);)s-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode;o+=p1(x.fromDom(t))}return{x:s,y:o}},Hb=(e,t={})=>{let n=0;const s={},o=x.fromDom(e),r=As(o),a=C=>{t.referrerPolicy=C},c=C=>{t.contentCssCors=C},l=C=>{Et(nf(o),C)},f=C=>{const S=nf(o);ka(S,"#"+C).each(st)},g=C=>Ze(s,C).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),m=C=>new Promise((S,N)=>{let k;const R=q._addCacheSuffix(C),T=g(R);s[R]=T,T.count++;const F=(D,Q)=>{j(D,la),T.status=Q,T.passed=[],T.failed=[],k&&(k.onload=null,k.onerror=null,k=null)},G=()=>F(T.passed,2),W=()=>F(T.failed,3);if(S&&T.passed.push(S),N&&T.failed.push(N),T.status===1)return;if(T.status===2){G();return}if(T.status===3){W();return}T.status=1;const B=x.fromTag("link",r.dom);Hs(B,{rel:"stylesheet",type:"text/css",id:T.id}),t.contentCssCors&&kt(B,"crossOrigin","anonymous"),t.referrerPolicy&&kt(B,"referrerpolicy",t.referrerPolicy),k=B.dom,k.onload=G,k.onerror=W,l(B),kt(B,"href",R)}),h=C=>Promise.allSettled(Le(C,N=>m(N).then(Z(N)))).then(N=>{const k=ua(N,R=>R.status==="fulfilled");return k.fail.length>0?Promise.reject(Le(k.fail,R=>R.reason)):Le(k.pass,R=>R.value)}),_=C=>{const S=q._addCacheSuffix(C);Ze(s,S).each(N=>{--N.count===0&&(delete s[S],f(N.id))})};return{load:m,loadAll:h,unload:_,unloadAll:C=>{j(C,S=>{_(S)})},_setReferrerPolicy:a,_setContentCssCors:c}},jb=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=js(n).dom;return y.from(e.get(r)).getOrThunk(()=>{const a=Hb(r,s);return e.set(r,a),a})}}})(),h1=e=>e.nodeName.toLowerCase()==="span",Vb=(e,t)=>ee(e)&&(vc(e,t)||mc(x.fromDom(e))),b1=(e,t)=>{const n=new _t(e,t).prev(!1),s=new _t(e,t).next(!1),o=Kt(n)||Vb(n,t),r=Kt(s)||Vb(s,t);return o&&r},Wb=e=>h1(e)&&e.getAttribute("data-mce-type")==="bookmark",y1=(e,t)=>z(e)&&e.data.length>0&&b1(e,t),v1=e=>te(e)?e.childNodes.length>0:!1,C1=e=>cf(e)||Na(e),vf=(e,t,n)=>{var s;const o=n||t;if(te(t)&&Wb(t))return t;const r=t.childNodes;for(let a=r.length-1;a>=0;a--)vf(e,r[a],o);if(te(t)){const a=t.childNodes;a.length===1&&Wb(a[0])&&((s=t.parentNode)===null||s===void 0||s.insertBefore(a[0],t))}return!C1(t)&&!vc(t,o)&&!v1(t)&&!y1(t,o)&&e.remove(t),t},E1=q.makeMap,Ec=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_c=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_1=/[<>&\"\']/g,S1=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,w1={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Bo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},x1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},k1=e=>{const t=x.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},qb=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!Bo[r]){const a="&"+s[o+1]+";";n[r]=a,n[a]=r}}return n}else return},Cf=qb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Kb=(e,t)=>e.replace(t?Ec:_c,n=>Bo[n]||n),A1=e=>(""+e).replace(_1,t=>Bo[t]||t),Gb=(e,t)=>e.replace(t?Ec:_c,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":Bo[n]||"&#"+n.charCodeAt(0)+";"),Ef=(e,t,n)=>{const s=n||Cf;return e.replace(t?Ec:_c,o=>Bo[o]||s[o]||o)},Gs={encodeRaw:Kb,encodeAllRaw:A1,encodeNumeric:Gb,encodeNamed:Ef,getEncodeFunc:(e,t)=>{const n=qb(t)||Cf,s=(a,c)=>a.replace(c?Ec:_c,l=>Bo[l]!==void 0?Bo[l]:n[l]!==void 0?n[l]:l.length>1?"&#"+((l.charCodeAt(0)-55296)*1024+(l.charCodeAt(1)-56320)+65536)+";":"&#"+l.charCodeAt(0)+";"),o=(a,c)=>Ef(a,c,n),r=E1(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:Ef:r.numeric?Gb:Kb},decode:e=>e.replace(S1,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):w1[n]||String.fromCharCode(n)):x1[t]||Cf[t]||k1(t))},Sc={},wc={},N1={},Ar=q.makeMap,zt=q.each,_f=q.extend,Yb=q.explode,R1=q.inArray,Lt=(e,t)=>(e=q.trim(e),e?e.split(t||" "):[]),Xb=(e,t={})=>{const n=Ar(e," ",Ar(e.toUpperCase()," "));return _f(n,t)},Jb=e=>Xb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),T1=e=>{const t={};let n,s,o,r;const a=(l,f="",g="")=>{const m=Lt(g),h=Lt(l);let _=h.length;for(;_--;){const w=Lt([n,f].join(" "));t[h[_]]={attributes:Mu(w,()=>({})),attributesOrder:w,children:Mu(m,Z(N1))}}},c=(l,f)=>{const g=Lt(l),m=Lt(f);let h=g.length;for(;h--;){const _=t[g[h]];for(let w=0,C=m.length;w<C;w++)_.attributes[m[w]]={},_.attributesOrder.push(m[w])}};if(Sc[e])return Sc[e];if(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const l="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav "+l,o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){n+=" xml:lang";const l="acronym applet basefont big font strike tt";o=[o,l].join(" "),zt(Lt(l),g=>{a(g,"",o)});const f="center dir isindex noframes";s=[s,f].join(" "),r=[s,o].join(" "),zt(Lt(f),g=>{a(g,"",r)})}return r=r||[s,o].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),a("address dt dd div caption","",r),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),a("blockquote","cite",r),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",r),a("dl","","dt dd"),a("a","href target rel media hreflang type",r),a("q","cite",o),a("ins del","cite datetime",r),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",r),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),a("param","name value"),a("map","name",[r,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",r),a("th","colspan rowspan headers scope abbr",r),a("form","accept-charset action autocomplete enctype method name novalidate target",r),a("fieldset","disabled form name",[r,"legend"].join(" ")),a("label","form for",o),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[r,"li"].join(" ")),a("noscript","",r),e!=="html4"&&(a("wbr"),a("ruby","",[o,"rt rp"].join(" ")),a("figcaption","",r),a("mark rt rp summary bdi","",o),a("canvas","width height",r),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[o,"option"].join(" ")),a("article section nav aside main header footer","",r),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[r,"figcaption"].join(" ")),a("time","datetime",o),a("dialog","open",r),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",o),a("progress","value max",o),a("meter","value min max low high optimum",o),a("details","open",[r,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),e!=="html4"&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("img","loading"),c("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&j([t.video,t.audio],l=>{delete l.children.audio,delete l.children.video}),zt(Lt("a form meter progress dfn"),l=>{t[l]&&delete t[l].children[l]}),delete t.caption.children.table,delete t.script,Sc[e]=t,t},Sf=(e,t)=>{if(e){const n={};return ne(e)&&(e={"*":e}),zt(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Ar(s,/[, ]/):Yb(s,/[, ]/)}),n}else return},Ys=(e={})=>{var t;const n={},s={};let o=[];const r={},a={},c=(ge,Oe,ct)=>{const ze=e[ge];if(ze)return Ar(ze,/[, ]/,Ar(ze.toUpperCase(),/[, ]/));{let tt=wc[ge];return tt||(tt=Xb(Oe,ct),wc[ge]=tt),tt}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",f=T1(l);e.verify_html===!1&&(e.valid_elements="*[*]");const g=Sf(e.valid_styles),m=Sf(e.invalid_styles,"map"),h=Sf(e.valid_classes,"map"),_=c("whitespace_elements","pre script noscript style textarea video audio iframe object code"),w=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=c("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),N="td th iframe video audio object script code",k=c("non_empty_elements",N+" pre",C),R=c("move_caret_before_on_enter_elements",N+" table",C),T=c("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),F=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",T),G=c("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),W=c("transparent_elements","a ins del canvas map");zt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ge=>{a[ge]=new RegExp("</"+ge+"[^>]*>","gi")});const B=ge=>new RegExp("^"+ge.replace(/([?+*])/g,".$1")+"$"),D=ge=>{const Oe=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ct=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,ze=/[*?+]/;if(ge){const tt=Lt(ge,",");let ot,qe;n["@"]&&(ot=n["@"].attributes,qe=n["@"].attributesOrder);for(let lt=0,Nn=tt.length;lt<Nn;lt++){let Tt=Oe.exec(tt[lt]);if(Tt){const Xn=Tt[1],mn=Tt[2],ir=Tt[3],cr=Tt[5],Jn={},Ln=[],dt={attributes:Jn,attributesOrder:Ln};if(Xn==="#"&&(dt.paddEmpty=!0),Xn==="-"&&(dt.removeEmpty=!0),Tt[4]==="!"&&(dt.removeEmptyAttrs=!0),ot&&(Je(ot,(Rn,Qn)=>{Jn[Qn]=Rn}),qe&&Ln.push(...qe)),cr){const Rn=Lt(cr,"|");for(let Qn=0,Tn=Rn.length;Qn<Tn;Qn++)if(Tt=ct.exec(Rn[Qn]),Tt){const On={},vs=Tt[1],$t=Tt[2].replace(/[\\:]:/g,":"),$s=Tt[3],Cs=Tt[4];if(vs==="!"&&(dt.attributesRequired=dt.attributesRequired||[],dt.attributesRequired.push($t),On.required=!0),vs==="-"){delete Jn[$t],Ln.splice(R1(Ln,$t),1);continue}if($s&&($s==="="&&(dt.attributesDefault=dt.attributesDefault||[],dt.attributesDefault.push({name:$t,value:Cs}),On.defaultValue=Cs),$s==="~"&&(dt.attributesForced=dt.attributesForced||[],dt.attributesForced.push({name:$t,value:Cs}),On.forcedValue=Cs),$s==="<"&&(On.validValues=Ar(Cs,"?"))),ze.test($t)){const $n=On;dt.attributePatterns=dt.attributePatterns||[],$n.pattern=B($t),dt.attributePatterns.push($n)}else Jn[$t]||Ln.push($t),Jn[$t]=On}}if(!ot&&mn==="@"&&(ot=Jn,qe=Ln),ir&&(dt.outputName=mn,n[ir]=dt),ze.test(mn)){const Rn=dt;Rn.pattern=B(mn),o.push(Rn)}else n[mn]=dt}}}},Q=ge=>{o=[],j(un(n),Oe=>{delete n[Oe]}),D(ge),zt(f,(Oe,ct)=>{s[ct]=Oe.children})},ce=ge=>{const Oe=/^(~)?(.+)$/;ge&&(delete wc.text_block_elements,delete wc.block_elements,zt(Lt(ge,","),ct=>{const ze=Oe.exec(ct);if(ze){const tt=ze[1]==="~",ot=tt?"span":"div",qe=ze[2];if(s[qe]=s[ot],r[qe]=ot,k[qe.toUpperCase()]={},k[qe]={},tt||(F[qe.toUpperCase()]={},F[qe]={}),!n[qe]){let lt=n[ot];lt=_f({},lt),delete lt.removeEmptyAttrs,delete lt.removeEmpty,n[qe]=lt}zt(s,(lt,Nn)=>{lt[ot]&&(s[Nn]=lt=_f({},s[Nn]),lt[qe]=lt[ot])})}}))},de=ge=>{const Oe=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Sc[l],ge&&zt(Lt(ge,","),ct=>{const ze=Oe.exec(ct);if(ze){const tt=ze[1];let ot;tt?ot=s[ze[2]]:ot=s[ze[2]]={"#comment":{}},ot=s[ze[2]],zt(Lt(ze[3],"|"),qe=>{tt==="-"?delete ot[qe]:ot[qe]={}})}})},ye=ge=>{const Oe=n[ge];if(Oe)return Oe;let ct=o.length;for(;ct--;){const ze=o[ct];if(ze.pattern.test(ge))return ze}};e.valid_elements?Q(e.valid_elements):(zt(f,(ge,Oe)=>{n[Oe]={attributes:ge.attributes,attributesOrder:ge.attributesOrder},s[Oe]=ge.children}),zt(Lt("strong/b em/i"),ge=>{const Oe=Lt(ge,"/");n[Oe[1]].outputName=Oe[0]}),zt(G,(ge,Oe)=>{n[Oe]&&(e.padd_empty_block_inline_children&&(n[Oe].paddInEmptyBlock=!0),n[Oe].removeEmpty=!0)}),zt(Lt("ol ul blockquote a table tbody"),ge=>{n[ge]&&(n[ge].removeEmpty=!0)}),zt(Lt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),ge=>{n[ge].paddEmpty=!0}),zt(Lt("span"),ge=>{n[ge].removeEmptyAttrs=!0})),ce(e.custom_elements),de(e.valid_children),D(e.extended_valid_elements),de("+ol[ul|ol],+ul[ul|ol]"),zt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ge,Oe)=>{n[Oe]&&(n[Oe].parentsRequired=Lt(ge))}),e.invalid_elements&&zt(Yb(e.invalid_elements),ge=>{n[ge]&&delete n[ge]}),ye("span")||D("span[!data-mce-type|*]");const ke=Z(g),De=Z(m),Ue=Z(h),nt=Z(S),Rt=Z(F),gt=Z(T),H=Z(G),re=Z(Object.seal(C)),Ne=Z(w),Y=Z(k),ue=Z(R),me=Z(_),X=Z(W),xe=Z(Object.seal(a)),we=(ge,Oe)=>{const ct=s[ge.toLowerCase()];return!!(ct&&ct[Oe.toLowerCase()])},vt=(ge,Oe)=>{const ct=ye(ge);if(ct)if(Oe){if(ct.attributes[Oe])return!0;const ze=ct.attributePatterns;if(ze){let tt=ze.length;for(;tt--;)if(ze[tt].pattern.test(Oe))return!0}}else return!0;return!1},We=Z(r);return{type:l,children:s,elements:n,getValidStyles:ke,getValidClasses:Ue,getBlockElements:Rt,getInvalidStyles:De,getVoidElements:re,getTextBlockElements:gt,getTextInlineElements:H,getBoolAttrs:nt,getElementRule:ye,getSelfClosingElements:Ne,getNonEmptyElements:Y,getMoveCaretBeforeOnEnterElements:ue,getWhitespaceElements:me,getTransparentElements:X,getSpecialElements:xe,isValidChild:we,isValid:vt,getCustomElements:We,addValidElements:D,setValidElements:Q,addCustomElements:ce,addValidChildren:de}},wf=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let a,c;const l=wr;t&&(a=t.getValidStyles(),c=t.getInvalidStyles());const f=(`\\" \\' \\; \\: ; : `+l).split(" ");for(let m=0;m<f.length;m++)r[f[m]]=l+m,r[l+m]=f[m];const g={parse:m=>{const h={};let _=!1;const w=e.url_converter,C=e.url_converter_scope||g,S=(B,D,Q)=>{const ce=h[B+"-top"+D];if(!ce)return;const de=h[B+"-right"+D];if(!de)return;const ye=h[B+"-bottom"+D];if(!ye)return;const ke=h[B+"-left"+D];if(!ke)return;const De=[ce,de,ye,ke];let Ue=De.length-1;for(;Ue--&&De[Ue]===De[Ue+1];);Ue>-1&&Q||(h[B+D]=Ue===-1?De[0]:De.join(" "),delete h[B+"-top"+D],delete h[B+"-right"+D],delete h[B+"-bottom"+D],delete h[B+"-left"+D])},N=B=>{const D=h[B];if(!D)return;const Q=D.split(" ");let ce=Q.length;for(;ce--;)if(Q[ce]!==Q[0])return!1;return h[B]=Q[0],!0},k=(B,D,Q,ce)=>{N(D)&&N(Q)&&N(ce)&&(h[B]=h[D]+" "+h[Q]+" "+h[ce],delete h[D],delete h[Q],delete h[ce])},R=B=>(_=!0,r[B]),T=(B,D)=>(_&&(B=B.replace(/\uFEFF[0-9]/g,Q=>r[Q])),D||(B=B.replace(/\\([\'\";:])/g,"$1")),B),F=B=>String.fromCharCode(parseInt(B.slice(1),16)),G=B=>B.replace(/\\[0-9a-f]+/gi,F),W=(B,D,Q,ce,de,ye)=>{if(de=de||ye,de)return de=T(de),"'"+de.replace(/\'/g,"\\'")+"'";if(D=T(D||Q||ce||""),!e.allow_script_urls){const ke=D.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ke)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ke))return""}return w&&(D=w.call(C,D,"style")),"url('"+D.replace(/\'/g,"\\'")+"')"};if(m){m=m.replace(/[\u0000-\u001F]/g,""),m=m.replace(/\\[\"\';:\uFEFF]/g,R).replace(/\"[^\"]+\"|\'[^\']+\'/g,D=>D.replace(/[;:]/g,R));let B;for(;B=s.exec(m);){s.lastIndex=B.index+B[0].length;let D=B[1].replace(o,"").toLowerCase(),Q=B[2].replace(o,"");if(D&&Q){if(D=G(D),Q=G(Q),D.indexOf(l)!==-1||D.indexOf('"')!==-1||!e.allow_script_urls&&(D==="behavior"||/expression\s*\(|\/\*|\*\//.test(Q)))continue;D==="font-weight"&&Q==="700"?Q="bold":(D==="color"||D==="background-color")&&(Q=Q.toLowerCase()),Q=Q.replace(n,W),h[D]=_?T(Q,!0):Q}}S("border","",!0),S("border","-width"),S("border","-color"),S("border","-style"),S("padding",""),S("margin",""),k("border","border-width","border-style","border-color"),h.border==="medium none"&&delete h.border,h["border-image"]==="none"&&delete h["border-image"]}return h},serialize:(m,h)=>{let _="";const w=(S,N)=>{const k=N[S];if(k)for(let R=0,T=k.length;R<T;R++){const F=k[R],G=m[F];G&&(_+=(_.length>0?" ":"")+F+": "+G+";")}},C=(S,N)=>{if(!c||!N)return!0;let k=c["*"];return k&&k[S]?!1:(k=c[N],!(k&&k[S]))};return h&&a?(w("*",a),w(h,a)):Je(m,(S,N)=>{S&&C(N,h)&&(_+=(_.length>0?" ":"")+N+": "+S+";")}),_}};return g},O1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},P1=e=>e instanceof Event||$e(e.initEvent),D1=e=>e.isDefaultPrevented===yt||e.isDefaultPrevented===it,B1=e=>bt(e.preventDefault)||P1(e),Qb=(e,t)=>{const n=t??{};for(const s in e)Se(O1,s)||(n[s]=e[s]);return ee(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},xf=(e,t,n,s)=>{var o;const r=Qb(t,s);return r.type=e,bt(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),B1(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=yt,$e(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=yt,$e(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=yt,r.stopPropagation()},D1(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?yt:it,r.isPropagationStopped=r.cancelBubble===!0?yt:it,r.isImmediatePropagationStopped=it)),r},I1="mce-data-",L1=/^(?:mouse|contextmenu)|click/,kf=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},xc=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},$1=e=>ee(e)&&L1.test(e.type),Pa=(e,t)=>{const n=xf(e.type,e,document,t);if($1(e)&&Kt(e.pageX)&&!Kt(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,a=n;a.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),a.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},F1=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,a=()=>{xc(e,"DOMContentLoaded",a),xc(e,"load",a),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?a():kf(e,"DOMContentLoaded",a),n.domLoaded||kf(e,"load",a)};class Io{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=I1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let a;const c=window,l=h=>{r.executeHandlers(Pa(h||c.event),f)};if(!t||z(t)||Ws(t))return s;let f;t[r.expando]?f=t[r.expando]:(f=r.count++,t[r.expando]=f,r.events[f]={}),o=o||t;const g=n.split(" ");let m=g.length;for(;m--;){let h=g[m],_=l,w=!1,C=!1;if(h==="DOMContentLoaded"&&(h="ready"),r.domLoaded&&h==="ready"&&t.readyState==="complete"){s.call(o,Pa({type:h}));continue}!r.hasFocusIn&&(h==="focusin"||h==="focusout")&&(w=!0,C=h==="focusin"?"focus":"blur",_=S=>{const N=Pa(S||c.event);N.type=N.type==="focus"?"focusin":"focusout",r.executeHandlers(N,f)}),a=r.events[f][h],a?h==="ready"&&r.domLoaded?s(Pa({type:h})):a.push({func:s,scope:o}):(r.events[f][h]=a=[{func:s,scope:o}],a.fakeName=C,a.capture=w,a.nativeHandler=_,h==="ready"?F1(t,_,r):kf(t,C||h,_,w))}return t=a=null,s}unbind(t,n,s){if(!t||z(t)||Ws(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const a=n.split(" ");let c=a.length;for(;c--;){const l=a[c],f=r[l];if(f){if(s){let g=f.length;for(;g--;)if(f[g].func===s){const m=f.nativeHandler,h=f.fakeName,_=f.capture,w=f.slice(0,g).concat(f.slice(g+1));w.nativeHandler=m,w.fakeName=h,w.capture=_,r[l]=w}}(!s||f.length===0)&&(delete r[l],xc(t,f.fakeName||l,f.nativeHandler,f.capture))}}}else Je(r,(a,c)=>{xc(t,a.fakeName||c,a.nativeHandler,a.capture)}),r={};for(const a in r)if(Se(r,a))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||z(t)||Ws(t))return this;const o=Pa({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||z(t)||Ws(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,a=o.length;r<a;r++){const c=o[r];if(c&&c.func.call(c.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}Io.Event=new Io;const Af=q.each,M1=q.grep,Nf="data-mce-style",U1=q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Da=(e,t,n)=>{bt(n)||n===""?Dt(e,t):kt(e,t,n)},Zb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Nr=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&z(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},ey=(e,t)=>{const n=hn(t,"style"),s=e.serialize(e.parse(n),et(t));Da(t,Nf,s)},z1=(e,t)=>Fn(e)?Se(U1,t)?e+"":e+"px":e,ty=(e,t,n)=>{const s=Zb(t);bt(n)||n===""?fb(e,s):cb(e,s,z1(n,s))},H1=(e,t,n)=>{const s=t.keep_values,o={set:(a,c,l)=>{const f=x.fromDom(a);$e(t.url_converter)&&ee(c)&&(c=t.url_converter.call(t.url_converter_scope||n(),String(c),l,a));const g="data-mce-"+l;Da(f,g,c),Da(f,l,c)},get:(a,c)=>{const l=x.fromDom(a);return hn(l,"data-mce-"+c)||hn(l,c)}},r={style:{set:(a,c)=>{const l=x.fromDom(a);s&&Da(l,Nf,c),Dt(l,"style"),ne(c)&&rc(l,e.parse(c))},get:a=>{const c=x.fromDom(a),l=hn(c,Nf)||hn(c,"style");return e.serialize(e.parse(l),et(c))}}};return s&&(r.href=r.src=o),r},Ve=(e,t={})=>{const n={},s=window,o={};let r=0;const a=!0,c=!0,l=jb.forElement(x.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),f=[],g=t.schema?t.schema:Ys({}),m=wf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),h=t.ownEvents?new Io:Io.Event,_=g.getBlockElements(),w=O=>ne(O)?Se(_,O):te(O)&&(Se(_,O.nodeName)||Do(g,O)),C=O=>O&&e&&ne(O)?e.getElementById(O):O,S=O=>{const P=C(O);return ee(P)?x.fromDom(P):null},N=(O,P,V="")=>{let U;const le=S(O);if(ee(le)&&nn(le)){const Re=Zr[P];Re&&Re.get?U=Re.get(le.dom,P):U=hn(le,P)}return ee(U)?U:V},k=O=>{const P=C(O);return bt(P)?[]:P.attributes},R=(O,P,V)=>{re(O,U=>{if(te(U)){const le=x.fromDom(U),Re=V===""?null:V,He=hn(le,P),je=Zr[P];je&&je.set?je.set(le.dom,Re,P):Da(le,P,Re),He!==Re&&t.onSetAttrib&&t.onSetAttrib({attrElm:le.dom,attrName:P,attrValue:Re})}})},T=(O,P)=>O.cloneNode(P),F=()=>t.root_element||e.body,G=O=>{const P=Cb(O);return{x:P.x,y:P.y,w:P.width,h:P.height}},W=(O,P)=>g1(e.body,C(O),P),B=(O,P,V)=>{re(O,U=>{const le=x.fromDom(U);ty(le,P,V),t.update_styles&&ey(m,le)})},D=(O,P)=>{re(O,V=>{const U=x.fromDom(V);Je(P,(le,Re)=>{ty(U,Re,le)}),t.update_styles&&ey(m,U)})},Q=(O,P,V)=>{const U=C(O);if(!(bt(U)||!te(U)))return V?as(x.fromDom(U),Zb(P)):(P=P.replace(/-(\D)/g,(le,Re)=>Re.toUpperCase()),P==="float"&&(P="cssFloat"),U.style?U.style[P]:void 0)},ce=O=>{const P=C(O);if(!P)return{w:0,h:0};let V=Q(P,"width"),U=Q(P,"height");return(!V||V.indexOf("px")===-1)&&(V="0"),(!U||U.indexOf("px")===-1)&&(U="0"),{w:parseInt(V,10)||P.offsetWidth||P.clientWidth,h:parseInt(U,10)||P.offsetHeight||P.clientHeight}},de=O=>{const P=C(O),V=W(P),U=ce(P);return{x:V.x,y:V.y,w:U.w,h:U.h}},ye=(O,P)=>{if(!O)return!1;const V=at(O)?O:[O];return mt(V,U=>Mn(x.fromDom(U),P))},ke=(O,P,V,U)=>{const le=[];let Re=C(O);U=U===void 0;const He=V||(F().nodeName!=="BODY"?F().parentNode:null);if(ne(P))if(P==="*")P=te;else{const je=P;P=lr=>ye(lr,je)}for(;Re&&!(Re===He||bt(Re.nodeType)||Na(Re)||cf(Re));){if(!P||P(Re))if(U)le.push(Re);else return[Re];Re=Re.parentNode}return U?le:null},De=(O,P,V)=>{const U=ke(O,P,V,!1);return U&&U.length>0?U[0]:null},Ue=(O,P,V)=>{let U=P;if(O){ne(P)&&(U=le=>ye(le,P));for(let le=O[V];le;le=le[V])if($e(U)&&U(le))return le}return null},nt=(O,P)=>Ue(O,P,"nextSibling"),Rt=(O,P)=>Ue(O,P,"previousSibling"),gt=O=>$e(O.querySelectorAll),H=(O,P)=>{var V,U;const le=(U=(V=C(P))!==null&&V!==void 0?V:t.root_element)!==null&&U!==void 0?U:e;return gt(le)?ln(le.querySelectorAll(O)):[]},re=function(O,P,V){const U=V??this;if(at(O)){const le=[];return Af(O,(Re,He)=>{const je=C(Re);je&&le.push(P.call(U,je,He))}),le}else{const le=C(O);return le?P.call(U,le):!1}},Ne=(O,P)=>{re(O,V=>{Je(P,(U,le)=>{R(V,le,U)})})},Y=(O,P)=>{re(O,V=>{const U=x.fromDom(V);ic(U,P)})},ue=(O,P,V,U,le)=>re(O,Re=>{const He=ne(P)?e.createElement(P):P;return ee(V)&&Ne(He,V),U&&(!ne(U)&&U.nodeType?He.appendChild(U):ne(U)&&Y(He,U)),le?He:Re.appendChild(He)}),me=(O,P,V)=>ue(e.createElement(O),O,P,V,!0),X=Gs.decode,xe=Gs.encodeAllRaw,we=(O,P,V="")=>{let U="<"+O;for(const le in P)br(P,le)&&(U+=" "+le+'="'+xe(P[le])+'"');return ba(V)&&Se(g.getVoidElements(),O)?U+" />":U+">"+V+"</"+O+">"},vt=O=>{const P=e.createElement("div"),V=e.createDocumentFragment();V.appendChild(P),O&&(P.innerHTML=O);let U;for(;U=P.firstChild;)V.appendChild(U);return V.removeChild(P),V},We=(O,P)=>re(O,V=>{const U=x.fromDom(V);return P&&j(Bt(U),le=>{gn(le)&&le.dom.length===0?st(le):bn(U,le)}),st(U),U.dom}),ge=O=>re(O,P=>{const V=P.attributes;for(let U=V.length-1;U>=0;U--)P.removeAttributeNode(V.item(U))}),Oe=O=>m.parse(O),ct=(O,P)=>m.serialize(O,P),ze=O=>{if(Zn!==Ve.DOM&&e===document){if(n[O])return;n[O]=!0}let P=e.getElementById("mceDefaultStyles");if(!P){P=e.createElement("style"),P.id="mceDefaultStyles",P.type="text/css";const V=e.head;V.firstChild?V.insertBefore(P,V.firstChild):V.appendChild(P)}P.styleSheet?P.styleSheet.cssText+=O:P.appendChild(e.createTextNode(O))},tt=O=>{O||(O=""),j(O.split(","),P=>{o[P]=!0,l.load(P).catch(Ae)})},ot=(O,P,V)=>{re(O,U=>{if(te(U)){const le=x.fromDom(U),Re=P.split(" ");j(Re,He=>{ee(V)?(V?Cr:Ea)(le,He):OR(le,He)})}})},qe=(O,P)=>{ot(O,P,!0)},lt=(O,P)=>{ot(O,P,!1)},Nn=(O,P)=>{const V=S(O),U=P.split(" ");return ee(V)&&Us(U,le=>Ju(V,le))},Tt=O=>{re(O,P=>fb(x.fromDom(P),"display"))},Xn=O=>{re(O,P=>cb(x.fromDom(P),"display","none"))},mn=O=>{const P=S(O);return ee(P)&&vr(ac(P,"display"),"none")},ir=O=>(O||"mce_")+r++,cr=O=>{const P=S(O);return ee(P)?te(P.dom)?P.dom.outerHTML:eT(P):""},Jn=(O,P)=>{re(O,V=>{te(V)&&(V.outerHTML=P)})},Ln=(O,P)=>{const V=C(P);return re(O,U=>{const le=V==null?void 0:V.parentNode,Re=V==null?void 0:V.nextSibling;return le&&(Re?le.insertBefore(U,Re):le.appendChild(U)),U})},dt=(O,P,V)=>re(P,U=>{var le;const Re=at(P)?O.cloneNode(!0):O;return V&&Af(M1(U.childNodes),He=>{Re.appendChild(He)}),(le=U.parentNode)===null||le===void 0||le.replaceChild(Re,U),U}),Rn=(O,P)=>{if(O.nodeName!==P.toUpperCase()){const V=me(P);return Af(k(O),U=>{R(V,U.nodeName,N(O,U.nodeName))}),dt(V,O,!0),V}else return O},Qn=(O,P)=>{let V=O;for(;V;){let U=P;for(;U&&V!==U;)U=U.parentNode;if(V===U)break;V=V.parentNode}return!V&&O.ownerDocument?O.ownerDocument.documentElement:V},Tn=O=>{if(te(O)){const P=O.nodeName.toLowerCase()==="a"&&!N(O,"href")&&N(O,"id");if(N(O,"name")||N(O,"data-mce-bookmark")||P)return!0}return!1},On=(O,P)=>{let V=0;if(Tn(O))return!1;const U=O.firstChild;if(U){const le=new _t(U,O),Re=g?g.getWhitespaceElements():{},He=P||(g?g.getNonEmptyElements():null);let je=U;do{if(te(je)){const lr=je.getAttribute("data-mce-bogus");if(lr){je=le.next(lr==="all");continue}const Ti=je.nodeName.toLowerCase();if(He&&He[Ti]){if(Ti==="br"){V++,je=le.next();continue}return!1}if(Tn(je))return!1}if(Ws(je)||z(je)&&!Po(je.data)||z(je)&&je.parentNode&&Re[je.parentNode.nodeName]&&Po(je.data))return!1;je=le.next()}while(je)}return V<=1},vs=()=>e.createRange(),$t=(O,P,V)=>{let U=vs(),le,Re;if(O&&P&&O.parentNode&&P.parentNode){const He=O.parentNode;return U.setStart(He,Nr(O)),U.setEnd(P.parentNode,Nr(P)),le=U.extractContents(),U=vs(),U.setStart(P.parentNode,Nr(P)+1),U.setEnd(He,Nr(O)+1),Re=U.extractContents(),He.insertBefore(vf(Zn,le),O),V?He.insertBefore(V,O):He.insertBefore(P,O),He.insertBefore(vf(Zn,Re),O),We(O),V||P}else return},$s=(O,P,V,U)=>{if(at(O)){let le=O.length;const Re=[];for(;le--;)Re[le]=$s(O[le],P,V,U);return Re}else return t.collect&&(O===e||O===s)&&f.push([O,P,V,U]),h.bind(O,P,V,U||Zn)},Cs=(O,P,V)=>{if(at(O)){let U=O.length;const le=[];for(;U--;)le[U]=Cs(O[U],P,V);return le}else{if(f.length>0&&(O===e||O===s)){let U=f.length;for(;U--;){const[le,Re,He]=f[U];O===le&&(!P||P===Re)&&(!V||V===He)&&h.unbind(le,Re,He)}}return h.unbind(O,P,V)}},$n=(O,P,V)=>h.dispatch(O,P,V),lo=(O,P,V)=>h.dispatch(O,P,V),Ri=O=>{if(O&&te(O)){const P=O.getAttribute("data-mce-contenteditable");return P&&P!=="inherit"?P:O.contentEditable!=="inherit"?O.contentEditable:null}else return null},Zn={doc:e,settings:t,win:s,files:o,stdMode:a,boxModel:c,styleSheetLoader:l,boundEvents:f,styles:m,schema:g,events:h,isBlock:w,root:null,clone:T,getRoot:F,getViewPort:G,getRect:de,getSize:ce,getParent:De,getParents:ke,get:C,getNext:nt,getPrev:Rt,select:H,is:ye,add:ue,create:me,createHTML:we,createFragment:vt,remove:We,setStyle:B,getStyle:Q,setStyles:D,removeAllAttribs:ge,setAttrib:R,setAttribs:Ne,getAttrib:N,getPos:W,parseStyle:Oe,serializeStyle:ct,addStyle:ze,loadCSS:tt,addClass:qe,removeClass:lt,hasClass:Nn,toggleClass:ot,show:Tt,hide:Xn,isHidden:mn,uniqueId:ir,setHTML:Y,getOuterHTML:cr,setOuterHTML:Jn,decode:X,encode:xe,insertAfter:Ln,replace:dt,rename:Rn,findCommonAncestor:Qn,run:re,getAttribs:k,isEmpty:On,createRng:vs,nodeIndex:Nr,split:$t,bind:$s,unbind:Cs,fire:lo,dispatch:$n,getContentEditable:Ri,getContentEditableParent:O=>{const P=F();let V=null;for(let U=O;U&&U!==P&&(V=Ri(U),V===null);U=U.parentNode);return V},isEditable:O=>{if(ee(O)){const P=te(O)?O:O.parentElement,V=Ri(F())==="true";return ee(P)&&oc(x.fromDom(P),V)}else return!1},destroy:()=>{if(f.length>0){let O=f.length;for(;O--;){const[P,V,U]=f[O];h.unbind(P,V,U)}}Je(o,(O,P)=>{l.unload(P),delete o[P]})},isChildOf:(O,P)=>O===P||P.contains(O),dumpRng:O=>"startContainer: "+O.startContainer.nodeName+", startOffset: "+O.startOffset+", endContainer: "+O.endContainer.nodeName+", endOffset: "+O.endOffset},Zr=H1(m,t,Z(Zn));return Zn};Ve.DOM=Ve(document),Ve.nodeIndex=Nr;const j1=Ve.DOM,V1=0,W1=1,kc=2,ny=3;class Ps{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=j1;let r;const a=()=>{o.remove(f),r&&(r.onerror=r.onload=r=null)},c=()=>{a(),n()},l=()=>{a(),s("Failed to load script: "+t)},f=o.uniqueId();r=document.createElement("script"),r.id=f,r.type="text/javascript",r.src=q._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=c,r.onerror=l,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===kc}markDone(t){this.states[t]=kc}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=V1),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(l,f)=>{Ze(n.scriptLoadedCallbacks,f).each(g=>{j(g,m=>m[l](f))}),delete n.scriptLoadedCallbacks[f]},o=l=>{const f=be(l,g=>g.status==="rejected");return f.length>0?Promise.reject(ns(f,({reason:g})=>at(g)?g:[g])):Promise.resolve()},r=l=>Promise.allSettled(Le(l,f=>n.states[f]===kc?(s("resolve",f),Promise.resolve()):n.states[f]===ny?(s("reject",f),Promise.reject(f)):(n.states[f]=W1,n.loadScript(f).then(()=>{n.states[f]=kc,s("resolve",f);const g=n.queue;return g.length>0?(n.queue=[],r(g).then(o)):Promise.resolve()},()=>(n.states[f]=ny,s("reject",f),Promise.reject(f)))))),a=l=>(n.loading=!0,r(l).then(f=>{n.loading=!1;const g=n.queueLoadedCallbacks.shift();return y.from(g).each(la),o(f)})),c=lh(t);return n.loading?new Promise((l,f)=>{n.queueLoadedCallbacks.push(()=>a(c).then(l,f))}):a(c)}}Ps.ScriptLoader=new Ps;const wt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},q1=e=>Xe(e)&&Se(e,"raw"),K1=e=>at(e)&&e.length>1,Ba={},Rf=wt("en"),sy=()=>Ze(Ba,Rf.get()),jn={getData:()=>Ji(Ba,e=>({...e})),setCode:e=>{e&&Rf.set(e)},getCode:()=>Rf.get(),add:(e,t)=>{let n=Ba[e];n||(Ba[e]=n={}),Je(t,(s,o)=>{n[o.toLowerCase()]=s})},translate:e=>{const t=sy().getOr({}),n=a=>$e(a)?Object.prototype.toString.call(a):s(a)?"":""+a,s=a=>a===""||a===null||a===void 0,o=a=>{const c=n(a);return Ze(t,c.toLowerCase()).map(n).getOr(c)},r=a=>a.replace(/{context:\w+}$/,"");if(s(e))return"";if(q1(e))return n(e.raw);if(K1(e)){const a=e.slice(1),c=o(e[0]).replace(/\{([0-9]+)\}/g,(l,f)=>Se(a,f)?n(a[f]):l);return r(c)}return r(o(e))},isRtl:()=>sy().bind(e=>Ze(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Se(Ba,e)},jt=()=>{const e=[],t={},n={},s=[],o=(C,S)=>{const N=be(s,k=>k.name===C&&k.state===S);j(N,k=>k.resolve())},r=C=>Se(t,C),a=C=>Se(n,C),c=C=>{if(n[C])return n[C].instance},l=(C,S)=>{const N=jn.getCode(),k=","+(S||"")+",";!N||S&&k.indexOf(","+N+",")===-1||Ps.ScriptLoader.add(t[C]+"/langs/"+N+".js")},f=(C,S)=>{jt.languageLoad!==!1&&(r(C)?l(C,S):w(C,"loaded").then(()=>l(C,S)))},g=(C,S)=>(e.push(S),n[C]={instance:S},o(C,"added"),S),m=C=>{delete t[C],delete n[C]},h=(C,S)=>ne(S)?ne(C)?{prefix:"",resource:S,suffix:""}:{prefix:C.prefix,resource:S,suffix:C.suffix}:S,_=(C,S)=>{if(t[C])return Promise.resolve();let N=ne(S)?S:S.prefix+S.resource+S.suffix;N.indexOf("/")!==0&&N.indexOf("://")===-1&&(N=jt.baseURL+"/"+N),t[C]=N.substring(0,N.lastIndexOf("/"));const k=()=>(o(C,"loaded"),Promise.resolve());return n[C]?k():Ps.ScriptLoader.add(N).then(k)},w=(C,S="added")=>S==="added"&&a(C)||S==="loaded"&&r(C)?Promise.resolve():new Promise(N=>{s.push({name:C,state:S,resolve:N})});return{items:e,urls:t,lookup:n,get:c,requireLangPack:f,add:g,remove:m,createUrl:h,load:_,waitFor:w}};jt.languageLoad=!0,jt.baseURL="",jt.PluginManager=jt(),jt.ThemeManager=jt(),jt.ModelManager=jt();const G1=e=>{const t=wt(y.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(y.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:c=>{n(),t.set(y.some(c))}}},Y1=e=>{const t=wt(y.none()),n=()=>t.get().each(c=>clearInterval(c));return{clear:()=>{n(),t.set(y.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:c=>{n(),t.set(y.some(setInterval(c,e)))}}},Xs=()=>{const e=G1(Ae);return{...e,on:n=>e.get().each(n)}},Ac=(e,t)=>{let n=null;return{cancel:()=>{Pn(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Pn(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Tf=(e,t)=>{let n=null;const s=()=>{Pn(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},Ia=Z("mce-annotation"),Lo=Z("data-mce-annotation"),Rr=Z("data-mce-annotation-uid"),La=Z("data-mce-annotation-active"),$a=Z("data-mce-annotation-classes"),Fa=Z("data-mce-annotation-attrs"),oy=e=>t=>Fe(t,e),ry=(e,t)=>{const n=e.selection.getRng(),s=x.fromDom(n.startContainer),o=x.fromDom(e.getBody()),r=t.fold(()=>"."+Ia(),l=>`[${Lo()}="${l}"]`),a=sc(s,n.startOffset).getOr(s);return ko(a,r,oy(o)).bind(l=>xs(l,`${Rr()}`).bind(f=>xs(l,`${Lo()}`).map(g=>{const m=iy(e,f);return{uid:f,name:g,elements:m}})))},X1=e=>nn(e)&&Ju(e,Ia()),ay=(e,t)=>nc(e,"data-mce-bogus")||_b(e,'[data-mce-bogus="all"]',oy(t)),iy=(e,t)=>{const n=x.fromDom(e.getBody()),s=Ut(n,`[${Rr()}="${t}"]`);return be(s,o=>!ay(o,n))},cy=(e,t)=>{const n=x.fromDom(e.getBody()),s=Ut(n,`[${Lo()}="${t}"]`),o={};return j(s,r=>{if(!ay(r,n)){const a=hn(r,Rr()),c=Ze(o,a).getOr([]);o[a]=c.concat([r])}}),o},J1=(e,t)=>{const n=wt({}),s=()=>({listeners:[],previous:Xs()}),o=(m,h)=>{r(m,_=>(h(_),_))},r=(m,h)=>{const _=n.get(),w=Ze(_,m).getOrThunk(s),C=h(w);_[m]=C,n.set(_)},a=(m,h,_)=>{o(m,w=>{j(w.listeners,C=>C(!0,m,{uid:h,nodes:Le(_,S=>S.dom)}))})},c=m=>{o(m,h=>{j(h.listeners,_=>_(!1,m))})},l=(m,h)=>{j(iy(e,m),_=>{h?kt(_,La(),"true"):Dt(_,La())})},f=Tf(()=>{const m=vo(t.getNames());j(m,h=>{r(h,_=>{const w=_.previous.get();return ry(e,y.some(h)).fold(()=>{w.each(C=>{c(h),_.previous.clear(),l(C,!1)})},({uid:C,name:S,elements:N})=>{vr(w,C)||(w.each(k=>l(k,!1)),a(S,C,N),_.previous.set(C),l(C,!0))}),{previous:_.previous,listeners:_.listeners}})})},30);return e.on("remove",()=>{f.cancel()}),e.on("NodeChange",()=>{f.throttle()}),{addListener:(m,h)=>{r(m,_=>({previous:_.previous,listeners:_.listeners.concat([h])}))}}},Q1=(e,t)=>{const n=Lo(),s=r=>y.from(r.attr(n)).bind(t.lookup),o=r=>{var a,c;r.attr(Rr(),null),r.attr(Lo(),null),r.attr(La(),null);const l=y.from(r.attr(Fa())).map(h=>h.split(",")).getOr([]),f=y.from(r.attr($a())).map(h=>h.split(",")).getOr([]);j(l,h=>r.attr(h,null));const g=(c=(a=r.attr("class"))===null||a===void 0?void 0:a.split(" "))!==null&&c!==void 0?c:[],m=Yi(g,[Ia()].concat(f));r.attr("class",m.length>0?m.join(" "):null),r.attr($a(),null),r.attr(Fa(),null)};e.serializer.addTempAttr(La()),e.serializer.addAttributeFilter(n,r=>{for(const a of r)s(a).each(c=>{c.persistent===!1&&(a.name==="span"?a.unwrap():o(a))})})},Z1=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>Ze(e,o).map(r=>r.settings),getNames:()=>un(e)}};let ly=0;const uy=e=>{const n=new Date().getTime(),s=Math.floor(Math.random()*1e9);return ly++,e+"_"+s+ly+String(n)},eO=(e,t)=>{j(t,n=>{Cr(e,n)})},tO=(e,t)=>{j(t,n=>{Ea(e,n)})},fy=(e,t)=>x.fromDom(e.dom.cloneNode(t)),$o=e=>fy(e,!1),dy=e=>fy(e,!0),nO=(e,t)=>{const n=x.fromTag(t),s=qh(e);return Hs(n,s),n},sO=(e,t)=>{const n=nO(e,t);Vs(e,n);const s=Bt(e);return Ao(n,s),st(e),n},my=(e,t,n=it)=>{const s=new _t(e,t),o=r=>{let a;do a=s[r]();while(a&&!z(a)&&!n(a));return y.from(a).filter(z)};return{current:()=>y.from(s.current()).filter(z),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Fo=(e,t)=>{const n=t||(a=>e.isBlock(a)||ut(a)||Qe(a)),s=(a,c,l,f)=>{if(z(a)){const g=f(a,c,a.data);if(g!==-1)return y.some({container:a,offset:g})}return l().bind(g=>s(g.container,g.offset,l,f))};return{backwards:(a,c,l,f)=>{const g=my(a,f??e.getRoot(),n);return s(a,c,()=>g.prev().map(m=>({container:m,offset:m.length})),l).getOrNull()},forwards:(a,c,l,f)=>{const g=my(a,f??e.getRoot(),n);return s(a,c,()=>g.next().map(m=>({container:m,offset:0})),l).getOrNull()}}},Tr=Math.round,Mo=e=>e?{left:Tr(e.left),top:Tr(e.top),bottom:Tr(e.bottom),right:Tr(e.right),width:Tr(e.width),height:Tr(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},py=(e,t)=>(e=Mo(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),oO=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,gy=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Ma=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:gy(t.top-e.bottom,e,t)},Ua=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:gy(t.bottom-e.top,e,t),rO=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,aO=e=>cn(e,(t,n)=>t.fold(()=>y.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),a=Math.max(n.right,s.right),c=Math.max(n.bottom,s.bottom);return y.some({top:r,right:a,bottom:c,left:o,width:a-o,height:c-r})}),y.none()),hy=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},iO=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),cO=(e,t,n)=>Math.min(Math.max(e,t),n),Nc=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Js=(e,t)=>{if(te(e)&&e.hasChildNodes()){const n=e.childNodes,s=cO(t,0,n.length-1);return n[s]}else return e},lO=(e,t)=>{if(!(t<0&&te(e)&&e.hasChildNodes()))return Js(e,t)},uO=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),by=e=>ne(e)&&e.charCodeAt(0)>=768&&uO.test(e),fO=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},dO=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},yy=te,mO=Dn,vy=uc("display","block table"),pO=uc("float","left right"),za=dO(yy,mO,Gi(pO)),gO=Gi(uc("white-space","pre pre-line pre-wrap")),Ha=z,Of=ut,Cy=Ve.nodeIndex,Rc=lO,Pf=e=>e?e.createRange():Ve.DOM.createRng(),Df=e=>ne(e)&&/[\r\n\t ]/.test(e),Ey=e=>!!e.setStart&&!!e.setEnd,Bf=e=>{const t=e.startContainer,n=e.startOffset;if(Df(e.toString())&&gO(t.parentNode)&&z(t)){const s=t.data;if(Df(s[n-1])||Df(s[n+1]))return!0}return!1},hO=e=>{const t=e.ownerDocument,n=Pf(t),s=t.createTextNode(At),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=Mo(n.getBoundingClientRect());return o.removeChild(s),r},bO=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&z(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),Qs(r)}else return null},_y=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Qs=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=Mo(s[0]):n=Mo(e.getBoundingClientRect()),!Ey(e)&&Of(e)&&_y(n)?hO(e):_y(n)&&Ey(e)&&(t=bO(e))!==null&&t!==void 0?t:n},Uo=(e,t)=>{const n=py(e,t);return n.width=1,n.right=n.left+1,n},yO=e=>{const t=[],n=a=>{a.height!==0&&(t.length>0&&oO(a,t[t.length-1])||t.push(a))},s=(a,c)=>{const l=Pf(a.ownerDocument);if(c<a.data.length){if(by(a.data[c]))return;if(by(a.data[c-1])&&(l.setStart(a,c),l.setEnd(a,c+1),!Bf(l))){n(Uo(Qs(l),!1));return}}c>0&&(l.setStart(a,c-1),l.setEnd(a,c),Bf(l)||n(Uo(Qs(l),!1))),c<a.data.length&&(l.setStart(a,c),l.setEnd(a,c+1),Bf(l)||n(Uo(Qs(l),!0)))},o=e.container(),r=e.offset();if(Ha(o))return s(o,r),t;if(yy(o))if(e.isAtEnd()){const a=Rc(o,r);Ha(a)&&s(a,a.data.length),za(a)&&!Of(a)&&n(Uo(Qs(a),!1))}else{const a=Rc(o,r);if(Ha(a)&&s(a,0),za(a)&&e.isAtEnd())return n(Uo(Qs(a),!1)),t;const c=Rc(e.container(),e.offset()-1);za(c)&&!Of(c)&&(vy(c)||vy(a)||!za(a))&&n(Uo(Qs(c),!1)),za(a)&&n(Uo(Qs(a),!0))}return t},L=(e,t,n)=>{const s=()=>(Ha(e),t===0),o=()=>Ha(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const g=Pf(e.ownerDocument);return g.setStart(e,t),g.setEnd(e,t),g},a=()=>(n||(n=yO(L(e,t))),n),c=()=>a().length>0,l=g=>g&&e===g.container()&&t===g.offset(),f=g=>Rc(e,g?t-1:t);return{container:Z(e),offset:Z(t),toRange:r,getClientRects:a,isVisible:c,isAtStart:s,isAtEnd:o,isEqual:l,getNode:f}};L.fromRangeStart=e=>L(e.startContainer,e.startOffset),L.fromRangeEnd=e=>L(e.endContainer,e.endOffset),L.after=e=>L(e.parentNode,Cy(e)+1),L.before=e=>L(e.parentNode,Cy(e)),L.isAbove=(e,t)=>Yt(tn(t.getClientRects()),Co(e.getClientRects()),Ma).getOr(!1),L.isBelow=(e,t)=>Yt(Co(t.getClientRects()),tn(e.getClientRects()),Ua).getOr(!1),L.isAtStart=e=>e?e.isAtStart():!1,L.isAtEnd=e=>e?e.isAtEnd():!1,L.isTextPosition=e=>e?z(e.container()):!1,L.isElementPosition=e=>!L.isTextPosition(e);const Tc=(e,t)=>{z(t)&&t.data.length===0&&e.remove(t)},vO=(e,t,n)=>{t.insertNode(n),Tc(e,n.previousSibling),Tc(e,n.nextSibling)},CO=(e,t,n)=>{const s=y.from(n.firstChild),o=y.from(n.lastChild);t.insertNode(n),s.each(r=>Tc(e,r.previousSibling)),o.each(r=>Tc(e,r.nextSibling))},If=(e,t,n)=>{cf(n)?CO(e,t,n):vO(e,t,n)},Vn=z,Sy=Ro,wy=Ve.nodeIndex,xy=e=>{const t=e.parentNode;return Sy(t)?xy(t):t},Lf=e=>e?Zi(e.childNodes,(t,n)=>(Sy(n)&&n.nodeName!=="BR"?t=t.concat(Lf(n)):t.push(n),t),[]):[],EO=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&Vn(n);)t+=n.data.length;return t},ky=e=>t=>e===t,_O=e=>{let t,n;t=Lf(xy(e)),n=fh(t,ky(e),e),t=t.slice(0,n+1);const s=Zi(t,(o,r,a)=>(Vn(r)&&Vn(t[a-1])&&o++,o),0);return t=ga(t,zn([e.nodeName])),n=fh(t,ky(e),e),n-s},Ay=e=>(Vn(e)?"text()":e.nodeName.toLowerCase())+"["+_O(e)+"]",SO=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e&&!(n&&n(o));o=o.parentNode)s.push(o);return s},Ny=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(Vn(s))r=EO(s,o);else{const c=s.childNodes;o>=c.length?(r="after",o=c.length-1):r="before",s=c[o]}n.push(Ay(s));let a=SO(e,s);return a=ga(a,Gi(Ro)),n=n.concat(Vu(a,c=>Ay(c))),n.reverse().join("/")+","+r},wO=(e,t,n)=>{let s=Lf(e);return s=ga(s,(o,r)=>!Vn(o)||!Vn(s[r-1])),s=ga(s,zn([t])),s[n]},xO=(e,t)=>{let n=e,s=0;for(;Vn(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!Vn(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return Vn(e)&&t>e.data.length&&(t=e.data.length),L(e,t)},Ry=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=Zi(s,(a,c)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(c);return l?(l[1]==="text()"&&(l[1]="#text"),wO(a,l[1],parseInt(l[2],10))):null},e);if(!r)return null;if(!Vn(r)&&r.parentNode){let a;return o==="after"?a=wy(r)+1:a=wy(r),L(r.parentNode,a)}return xO(r,parseInt(o,10))},Oc=Qe,kO=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&z(o);o=o.previousSibling)s+=e(o.data).length;return s},Ty=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let a=o?s.startOffset:s.endOffset;const c=[],l=e.getRoot();if(z(r))c.push(n?kO(t,r,a):a);else{let f=0;const g=r.childNodes;a>=g.length&&g.length&&(f=1,a=Math.max(0,g.length-1)),c.push(e.nodeIndex(g[a],n)+f)}for(let f=r;f&&f!==l;f=f.parentNode)c.push(e.nodeIndex(f,n));return c},AO=(e,t,n,s)=>{const o=t.dom,r=Ty(o,e,n,s,!0),a=t.isForward(),c=Tb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:a,...c};{const l=Ty(o,e,n,s,!1);return{start:r,end:l,forward:a,...c}}},$f=(e,t,n)=>{let s=0;return q.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},Oy=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(te(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Py=e=>(Oy(e,!0),Oy(e,!1),e),Dy=(e,t)=>{if(te(e)&&(e=Js(e,t),Oc(e)))return e;if(vn(e)){z(e)&&kr(e)&&(e=e.parentNode);let n=e.previousSibling;if(Oc(n)||(n=e.nextSibling,Oc(n)))return n}},NO=e=>Dy(e.startContainer,e.startOffset)||Dy(e.endContainer,e.endOffset),By=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||Oc(s)){const a=s.nodeName;return{name:a,index:$f(n.dom,a,s)}}const r=NO(o);if(r){const a=r.tagName;return{name:a,index:$f(n.dom,a,r)}}return AO(e,n,t,o)},RO=e=>{const t=e.getRng();return{start:Ny(e.dom.getRoot(),L.fromRangeStart(t)),end:Ny(e.dom.getRoot(),L.fromRangeEnd(t)),forward:e.isForward()}},TO=e=>({rng:e.getRng(),forward:e.isForward()}),Iy=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},Ly=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),a=e.getNode(),c=a.nodeName,l=e.isForward();if(c==="IMG")return{name:c,index:$f(n,c,a)};const f=Py(s.cloneRange());if(!r){f.collapse(!1);const m=Iy(n,o+"_end",t);If(n,f,m)}s=Py(s),s.collapse(!0);const g=Iy(n,o+"_start",t);return If(n,s,g),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},OO=(e,t,n=!1)=>t===2?By(Os,n,e):t===3?RO(e):t?TO(e):Ly(e,!1),Ff=ae(By,Gt,!0),$y=e=>{const t=r=>r(e),n=Z(e),s=()=>o,o={tag:!0,inner:e,fold:(r,a)=>a(e),isValue:yt,isError:it,map:r=>Xt.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>y.some(e)};return o},Fy=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:it,isError:yt,map:t,mapError:s=>Xt.error(s(e)),bind:t,exists:it,forall:yt,getOr:Gt,or:Gt,getOrThunk:$u,orThunk:$u,getOrDie:sh(String(e)),each:Ae,toOptional:y.none};return n},Xt={value:$y,error:Fy,fromOption:(e,t)=>e.fold(()=>Fy(t),$y)},cs={generate:e=>{if(!at(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return j(e,(s,o)=>{const r=un(s);if(r.length!==1)throw new Error("one and only one name per case");const a=r[0],c=s[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!at(c))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const f=l.length;if(f!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+f);return{fold:(...m)=>{if(m.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+m.length);return m[o].apply(null,l)},match:m=>{const h=un(m);if(t.length!==h.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+h.join(","));if(!Us(t,w=>Ge(h,w)))throw new Error("Not all branches were specified when using match. Specified: "+h.join(", ")+`
Required: `+t.join(", "));return m[a].apply(null,l)},log:m=>{console.log(m,{constructors:t,constructor:a,params:l})}}}}),n}};cs.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const PO=e=>{const t=[],n=[];return j(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},DO=e=>e.type==="inline-command"||e.type==="inline-format",BO=e=>e.type==="block-command"||e.type==="block-format",IO=e=>{const t=s=>Xt.error({message:s,pattern:e}),n=(s,o,r)=>{if(e.format!==void 0){let a;if(at(e.format)){if(!Us(e.format,ne))return t(s+" pattern has non-string items in the `format` array");a=e.format}else if(ne(e.format))a=[e.format];else return t(s+" pattern has non-string `format` parameter");return Xt.value(o(a))}else return e.cmd!==void 0?ne(e.cmd)?Xt.value(r(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!Xe(e))return t("Raw pattern is not an object");if(!ne(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ne(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,o=e.end;return o.length===0&&(o=s,s=""),n("Inline",r=>({type:"inline-format",start:s,end:o,format:r}),(r,a)=>({type:"inline-command",start:s,end:o,cmd:r,value:a}))}else return e.replacement!==void 0?ne(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):Xt.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,o)=>({type:"block-command",start:e.start,cmd:s,value:o}))},My=e=>be(e,BO),Uy=e=>be(e,DO),LO=(e,t)=>({inlinePatterns:Uy(e),blockPatterns:My(e),dynamicPatternsLookup:t}),zy=e=>{const t=PO(Le(e,IO));return j(t.errors,n=>console.error(n.message,n.pattern)),t.values},$O=e=>t=>{const n=e(t);return zy(n)},Mf=zs().deviceType,FO=Mf.isTouch(),MO=Ve.DOM,UO=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return cn(t,(n,s)=>{const o=s.split("="),r=o[0],a=o.length>1?o[1]:r;return n[yr(r)]=yr(a),n},{})},Hy=e=>Ye(e,RegExp),se=e=>t=>t.options.get(e),Uf=e=>ne(e)||Xe(e),jy=(e,t="")=>n=>{const s=ne(n);if(s)if(n.indexOf("=")!==-1){const o=UO(n);return{value:Ze(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},zO=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:jy(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:jy(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=ne(n)&&ss(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=Ge(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>bo(n)?{valid:!0,value:n}:ne(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||ne(n)||gr(n,ne);return s?ne(n)?{value:Le(n.split(","),yr),valid:s}:at(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:jf(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=ne(n)||gr(n,ne);return s?{value:at(n)?n:Le(n.split(","),yr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=bo(n)||ne(n);return s?n===!1||Mf.isiPhone()||Mf.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!FO}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||ne(n)||$e(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||ne(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Uf}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Uf}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Uf}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>ne(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>gr(n,Xe)||n===!1?{value:zy(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:n=>$e(n)?{value:$O(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>gr(n,Hy)?{value:n,valid:!0}:Hy(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:jn.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:MO.getAttrib(e.getElement(),"placeholder")})})},HO=se("iframe_attrs"),jO=se("doctype"),Vy=se("document_base_url"),VO=se("body_id"),WO=se("body_class"),Wy=se("content_security_policy"),qO=se("br_in_pre"),fn=se("forced_root_block"),ja=se("forced_root_block_attrs"),KO=se("newline_behavior"),GO=se("br_newline_selector"),YO=se("no_newline_selector"),XO=se("keep_styles"),JO=se("end_container_on_empty_block"),qy=se("automatic_uploads"),Ky=se("images_reuse_filename"),QO=se("images_replace_blob_uris"),Gy=se("icons"),ZO=se("icons_url"),eP=se("images_upload_url"),tP=se("images_upload_base_path"),nP=se("images_upload_credentials"),sP=se("images_upload_handler"),oP=se("content_css_cors"),zf=se("referrer_policy"),Yy=se("language"),rP=se("language_url"),Xy=se("indent_use_margin"),aP=se("indentation"),iP=se("content_css"),cP=se("content_style"),Jy=se("font_css"),lP=se("directionality"),uP=se("inline_boundaries_selector"),Qy=se("object_resizing"),fP=se("resize_img_proportional"),dP=se("placeholder"),Zy=se("event_root"),mP=se("service_message"),Or=se("theme"),pP=se("theme_url"),Hf=se("model"),gP=se("model_url"),Va=se("inline_boundaries"),hP=se("formats"),bP=se("preview_styles"),yP=se("format_empty_lines"),vP=se("format_noneditable_selector"),CP=se("custom_ui_selector"),jf=se("inline"),EP=se("hidden_input"),_P=se("submit_patch"),SP=se("add_form_submit_trigger"),wP=se("add_unload_trigger"),xP=se("custom_undo_redo_levels"),kP=se("disable_nodechange"),ev=se("readonly"),tv=se("content_css_cors"),Pc=se("plugins"),AP=se("external_plugins"),NP=se("block_unsupported_drop"),RP=se("visual"),TP=se("visual_table_class"),nv=se("visual_anchor_class"),OP=se("iframe_aria_text"),PP=se("setup"),DP=se("init_instance_callback"),BP=se("urlconverter_callback"),IP=se("auto_focus"),LP=se("browser_spellcheck"),$P=se("protect"),FP=se("paste_block_drop"),Dc=se("paste_data_images"),MP=se("paste_preprocess"),UP=se("paste_postprocess"),zP=se("paste_webkit_styles"),HP=se("paste_remove_styles_if_webkit"),jP=se("paste_merge_formats"),VP=se("smart_paste"),WP=se("paste_as_text"),qP=se("paste_tab_spaces"),KP=se("allow_html_data_urls"),GP=se("text_patterns"),YP=se("text_patterns_lookup"),sv=se("noneditable_class"),XP=se("editable_class"),JP=se("noneditable_regexp"),QP=se("preserve_cdata"),ZP=se("highlight_on_focus"),Vf=se("xss_sanitization"),eD=e=>e.options.isSet("text_patterns_lookup"),tD=e=>q.explode(e.options.get("font_size_style_values")),nD=e=>q.explode(e.options.get("font_size_classes")),sD=e=>e.options.get("encoding")==="xml",ov=e=>q.explode(e.options.get("images_file_types")),oD=se("table_tab_navigation"),rD=te,rv=z,av=e=>{const t=e.parentNode;t&&t.removeChild(e)},iv=e=>{const t=Os(e);return{count:e.length-t.length,text:t}},cv=e=>{let t;for(;(t=e.data.lastIndexOf(It))!==-1;)e.deleteData(t,1)},lv=(e,t)=>(zo(e),t),aD=(e,t)=>{const n=iv(e.data.substr(0,t.offset())),s=iv(e.data.substr(t.offset()));return(n.text+s.text).length>0?(cv(e),L(e,t.offset()-n.count)):t},iD=(e,t)=>{const n=t.container(),s=LN(ln(n.childNodes),e).map(o=>o<t.offset()?L(n,t.offset()-1):t).getOr(t);return zo(e),s},cD=(e,t)=>rv(e)&&t.container()===e?aD(e,t):lv(e,t),lD=(e,t)=>t.container()===e.parentNode?iD(e,t):lv(e,t),uD=(e,t)=>L.isTextPosition(t)?cD(e,t):lD(e,t),zo=e=>{rD(e)&&vn(e)&&(Rb(e)?e.removeAttribute("data-mce-caret"):av(e)),rv(e)&&(cv(e),e.data.length===0&&av(e))},fD=Qe,dD=is,mD=fc,pD="*[contentEditable=false],video,audio,embed,object",uv=(e,t,n)=>{const s=py(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const c=e.ownerDocument.documentElement;o=e.scrollLeft||c.scrollLeft,r=e.scrollTop||c.scrollTop}else{const c=e.getBoundingClientRect();o=e.scrollLeft-c.left,r=e.scrollTop-c.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),s.left+=a,s.right+=a),s},gD=e=>{var t,n;const s=Ut(x.fromDom(e),pD);for(let o=0;o<s.length;o++){const r=s[o].dom;let a=r.previousSibling;if(yc(a)){const c=a.data;c.length===1?(t=a.parentNode)===null||t===void 0||t.removeChild(a):a.deleteData(c.length-1,1)}a=r.nextSibling,bc(a)&&(a.data.length===1?(n=a.parentNode)===null||n===void 0||n.removeChild(a):a.deleteData(0,1))}},hD=(e,t,n,s)=>{const o=Xs();let r,a;const c=fn(e),l=e.dom,f=(C,S)=>{let N;if(g(),mD(S))return null;if(n(S)){const k=$T(c,S,C),R=uv(t,S,C);l.setStyle(k,"top",R.top),a=k;const T=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(T,{...R}),l.add(t,T),o.set({caret:T,element:S,before:C}),C&&l.addClass(T,"mce-visual-caret-before"),m(),N=S.ownerDocument.createRange(),N.setStart(k,0),N.setEnd(k,0)}else return a=LT(S,C),N=S.ownerDocument.createRange(),Wa(a.nextSibling)?(N.setStart(a,0),N.setEnd(a,0)):(N.setStart(a,1),N.setEnd(a,1)),N;return N},g=()=>{gD(t),a&&(zo(a),a=null),o.on(C=>{l.remove(C.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},m=()=>{r=setInterval(()=>{o.on(C=>{s()?l.toggleClass(C.caret,"mce-visual-caret-hidden"):l.addClass(C.caret,"mce-visual-caret-hidden")})},500)};return{show:f,hide:g,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(C=>{const S=uv(t,C.element,C.before);l.setStyles(C.caret,{...S})})},destroy:()=>clearInterval(r)}},fv=()=>Ie.browser.isFirefox(),Wa=e=>fD(e)||dD(e),qa=e=>(Wa(e)||Ts(e)&&fv())&&Qu(x.fromDom(e)).exists(oc),bD=Hn,Wf=Qe,yD=is,dv=uc("display","block table table-cell table-caption list-item"),mv=vn,pv=kr,vD=te,CD=z,ED=Dn,Pr=e=>e>0,Ho=e=>e<0,Bc=(e,t)=>{let n;for(;n=e(t);)if(!pv(n))return n;return null},Ka=(e,t,n,s,o)=>{const r=new _t(e,s),a=Wf(e)||pv(e);let c;if(Ho(t)){if(a&&(c=Bc(r.prev.bind(r),!0),n(c)))return c;for(;c=Bc(r.prev.bind(r),o);)if(n(c))return c}if(Pr(t)){if(a&&(c=Bc(r.next.bind(r),!0),n(c)))return c;for(;c=Bc(r.next.bind(r),o);)if(n(c))return c}return null},_D=(e,t)=>{const n=o=>bD(o.dom),s=o=>o.dom===t;return Ns(x.fromDom(e),n,s).map(o=>o.dom).getOr(t)},Zs=(e,t)=>{for(;e&&e!==t;){if(dv(e))return e;e=e.parentNode}return null},ls=(e,t,n)=>Zs(e.container(),n)===Zs(t.container(),n),qf=(e,t)=>{if(!t)return y.none();const n=t.container(),s=t.offset();return vD(n)?y.from(n.childNodes[s+e]):y.none()},gv=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},SD=(e,t,n)=>Zs(t,e)===Zs(n,e),hv=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&mv(r)&&(r=r[s]),Wf(r)||yD(r)){if(SD(t,r,o))return r;break}if(ED(r))break;o=o.parentNode}return null},Ga=ae(gv,!0),Ya=ae(gv,!1),Kf=(e,t,n)=>{let s;const o=ae(hv,!0,t),r=ae(hv,!1,t),a=n.startContainer,c=n.startOffset;if(kr(a)){const l=CD(a)?a.parentNode:a,f=l.getAttribute("data-mce-caret");if(f==="before"&&(s=l.nextSibling,qa(s)))return Ga(s);if(f==="after"&&(s=l.previousSibling,qa(s)))return Ya(s)}if(!n.collapsed)return n;if(z(a)){if(mv(a)){if(e===1){if(s=r(a),s)return Ga(s);if(s=o(a),s)return Ya(s)}if(e===-1){if(s=o(a),s)return Ya(s);if(s=r(a),s)return Ga(s)}return n}if(yc(a)&&c>=a.data.length-1)return e===1&&(s=r(a),s)?Ga(s):n;if(bc(a)&&c<=1)return e===-1&&(s=o(a),s)?Ya(s):n;if(c===a.data.length)return s=r(a),s?Ga(s):n;if(c===0)return s=o(a),s?Ya(s):n}return n},bv=(e,t)=>qf(e?0:-1,t).filter(Wf),Xa=(e,t,n)=>{const s=Kf(e,t,n);return e===-1?L.fromRangeStart(s):L.fromRangeEnd(s)},Ic=e=>y.from(e.getNode()).map(x.fromDom),wD=e=>y.from(e.getNode(!0)).map(x.fromDom),Gf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Lc=(e,t)=>{const n=ls(e,t);return!n&&ut(e.getNode())?!0:n};var xt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(xt||(xt={}));const xD=Qe,us=z,yv=te,Yf=ut,Dr=Dn,vv=GT,$c=Db,kD=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},Cv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Ev=(e,t)=>{if(Pr(e)){if(Dr(t.previousSibling)&&!us(t.previousSibling))return L.before(t);if(us(t))return L(t,0)}if(Ho(e)){if(Dr(t.nextSibling)&&!us(t.nextSibling))return L.after(t);if(us(t))return L(t,t.data.length)}return Ho(e)?Yf(t)?L.before(t):L.after(t):L.before(t)},AD=(e,t)=>{const n=t.nextSibling;return n&&Dr(n)?us(n)?L(n,0):L.before(n):Xf(xt.Forwards,L.after(t),e)},Xf=(e,t,n)=>{let s,o,r,a;if(!yv(n)||!t)return null;if(t.isEqual(L.after(n))&&n.lastChild){if(a=L.after(n.lastChild),Ho(e)&&Dr(n.lastChild)&&yv(n.lastChild))return Yf(n.lastChild)?L.before(n.lastChild):a}else a=t;const c=a.container();let l=a.offset();if(us(c)){if(Ho(e)&&l>0)return L(c,--l);if(Pr(e)&&l<c.length)return L(c,++l);s=c}else{if(Ho(e)&&l>0&&(o=Cv(c,l-1),Dr(o)))return!vv(o)&&(r=Ka(o,e,$c,o),r)?us(r)?L(r,r.data.length):L.after(r):us(o)?L(o,o.data.length):L.before(o);if(Pr(e)&&l<c.childNodes.length&&(o=Cv(c,l),Dr(o)))return Yf(o)?AD(n,o):!vv(o)&&(r=Ka(o,e,$c,o),r)?us(r)?L(r,0):L.before(r):us(o)?L(o,0):L.after(o);s=o||a.getNode()}if(s&&(Pr(e)&&a.isAtEnd()||Ho(e)&&a.isAtStart())&&(s=Ka(s,e,yt,n,!0),$c(s,n)))return Ev(e,s);o=s&&Ka(s,e,$c,n);const f=Eo(be(kD(c,n),xD));return f&&(!o||!f.contains(o))?(Pr(e)?a=L.after(f):a=L.before(f),a):o?Ev(e,o):null},fs=e=>({next:t=>Xf(xt.Forwards,t,e),prev:t=>Xf(xt.Backwards,t,e)}),ND=(e,t,n)=>{const s=e?L.before(n):L.after(n);return Cn(e,t,s)},RD=e=>ut(e)?L.before(e):L.after(e),_v=e=>L.isTextPosition(e)?e.offset()===0:Dn(e.getNode()),Sv=e=>{if(L.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Dn(e.getNode(!0))},wv=(e,t)=>!L.isTextPosition(e)&&!L.isTextPosition(t)&&e.getNode()===t.getNode(!0),TD=e=>!L.isTextPosition(e)&&ut(e.getNode()),OD=(e,t,n)=>e?!wv(t,n)&&!TD(t)&&Sv(t)&&_v(n):!wv(n,t)&&_v(t)&&Sv(n),Cn=(e,t,n)=>{const s=fs(t);return y.from(e?s.next(n):s.prev(n))},Fc=(e,t,n)=>Cn(e,t,n).bind(s=>ls(n,s,t)&&OD(e,n,s)?Cn(e,t,s):y.some(s)),xv=(e,t,n,s)=>Fc(e,t,n).bind(o=>s(o)?xv(e,t,o,s):y.some(o)),Br=(e,t)=>{const n=e?t.firstChild:t.lastChild;return z(n)?y.some(L(n,e?0:n.data.length)):n?Dn(n)?y.some(e?L.before(n):RD(n)):ND(e,t,n):y.none()},sn=ae(Cn,!0),En=ae(Cn,!1),Jt=ae(Br,!0),ds=ae(Br,!1),Jf="_mce_caret",Bn=e=>te(e)&&e.id===Jf,jo=(e,t)=>{let n=t;for(;n&&n!==e;){if(Bn(n))return n;n=n.parentNode}return null},PD=e=>ne(e.start),DD=e=>Se(e,"rng"),BD=e=>Se(e,"id"),kv=e=>Se(e,"name"),Av=e=>q.isArray(e.start),Mc=e=>!kv(e)&&bo(e.forward)?e.forward:!0,Nv=(e,t)=>(te(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),ID=(e,t)=>{const n=y.from(Ry(e.getRoot(),t.start)),s=y.from(Ry(e.getRoot(),t.end));return Yt(n,s,(o,r)=>{const a=e.createRng();return a.setStart(o.container(),o.offset()),a.setEnd(r.container(),r.offset()),{range:a,forward:Mc(t)}})},LD=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(It);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},$D=e=>!e.hasChildNodes(),FD=(e,t)=>ds(e).fold(it,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),Rv=(e,t,n)=>$D(t)&&jo(e,t)?(LD(t,n),!0):!1,Tv=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let a=r,c=o[0];for(let l=o.length-1;a&&l>=1;l--){const f=a.childNodes;if(Rv(r,a,s))return!0;if(o[l]>f.length-1)return Rv(r,a,s)?!0:FD(a,s);a=f[o[l]]}z(a)&&(c=Math.min(o[0],a.data.length)),te(a)&&(c=Math.min(o[0],a.childNodes.length)),t?s.setStart(a,c):s.setEnd(a,c)}return!0},Qf=e=>z(e)&&e.data.length>0,Ov=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let a,c;if(t==="start"?r?s.hasChildNodes()?(a=s.firstChild,c=1):Qf(s.nextSibling)?(a=s.nextSibling,c=0):Qf(s.previousSibling)?(a=s.previousSibling,c=s.previousSibling.data.length):(a=o,c=e.nodeIndex(s)+1):(a=o,c=e.nodeIndex(s)):r?s.hasChildNodes()?(a=s.firstChild,c=1):Qf(s.previousSibling)?(a=s.previousSibling,c=s.previousSibling.data.length):(a=o,c=e.nodeIndex(s)):(a=o,c=e.nodeIndex(s)),!r){const l=s.previousSibling,f=s.nextSibling;q.each(q.grep(s.childNodes),m=>{z(m)&&(m.data=m.data.replace(/\uFEFF/g,""))});let g;for(;g=e.get(n.id+"_"+t);)e.remove(g,!0);if(z(f)&&z(l)&&!Ie.browser.isOpera()){const m=l.data.length;l.appendData(f.data),e.remove(f),a=l,c=m}}return y.some(L(a,c))}else return y.none()},MD=(e,t)=>{const n=e.createRng();return Tv(e,!0,t,n)&&Tv(e,!1,t,n)?y.some({range:n,forward:Mc(t)}):y.none()},UD=(e,t)=>{const n=Ov(e,"start",t),s=Ov(e,"end",t);return Yt(n,s.or(n),(o,r)=>{const a=e.createRng();return a.setStart(Nv(e,o.container()),o.offset()),a.setEnd(Nv(e,r.container()),r.offset()),{range:a,forward:Mc(t)}})},zD=(e,t)=>y.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),HD=(e,t)=>{const n=e.dom;if(t){if(Av(t))return MD(n,t);if(PD(t))return ID(n,t);if(BD(t))return UD(n,t);if(kv(t))return zD(n,t);if(DD(t))return y.some({range:t.rng,forward:Mc(t)})}return y.none()},jD=(e,t,n)=>OO(e,t,n),VD=(e,t)=>{HD(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},_n=e=>te(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Uc=(e=>t=>e===t)(At),Ir=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Zf=e=>!Ir(e)&&!Uc(e)&&!kb(e),WD=e=>({value:qD(e)}),qD=e=>gh(e,"#").toUpperCase(),ed=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},KD=e=>{const t=ed(e.red)+ed(e.green)+ed(e.blue);return WD(t)},GD=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,YD=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Pv=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),Dv=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),a=parseInt(n,10),c=parseFloat(s);return Pv(o,r,a,c)},XD=e=>{if(e==="transparent")return y.some(Pv(0,0,0,0));const t=GD.exec(e);if(t!==null)return y.some(Dv(t[1],t[2],t[3],"1"));const n=YD.exec(e);return n!==null?y.some(Dv(n[1],n[2],n[3],n[4])):y.none()},zc=e=>XD(e).map(KD).map(t=>"#"+t.value).getOr(e),td=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},JD=e=>ns(e,t=>{const n=Nc(t);return n?[x.fromDom(n)]:[]}),QD=e=>td(e).length>1,ZD=e=>be(JD(e),Ta),eB=e=>Ut(e,"td[data-mce-selected],th[data-mce-selected]"),Bv=(e,t)=>{const n=eB(t);return n.length>0?n:ZD(e)},Lr=e=>Bv(td(e.selection.getSel()),x.fromDom(e.getBody())),Ja=(e,t)=>xa(e,"table",t),tB=e=>{const t=e.startContainer,n=e.startOffset;return z(t)?n===0?y.some(x.fromDom(t)):y.none():y.from(t.childNodes[n]).map(x.fromDom)},nB=e=>{const t=e.endContainer,n=e.endOffset;return z(t)?n===t.data.length?y.some(x.fromDom(t)):y.none():y.from(t.childNodes[n-1]).map(x.fromDom)},Iv=e=>Zu(e).fold(Z([e]),t=>[e].concat(Iv(t))),nd=e=>ef(e).fold(Z([e]),t=>et(t)==="br"?wo(t).map(n=>[e].concat(nd(n))).getOr([]):[e].concat(nd(t))),sd=(e,t)=>Yt(tB(t),nB(t),(n,s)=>{const o=Ct(Iv(e),ae(Fe,n)),r=Ct(nd(e),ae(Fe,s));return o.isSome()&&r.isSome()}).getOr(!1),od=(e,t,n,s)=>{const o=n,r=new _t(n,o),a=pa(e.schema.getMoveCaretBeforeOnEnterElements(),(l,f)=>!Ge(["td","th","table"],f.toLowerCase()));let c=n;do{if(z(c)&&q.trim(c.data).length!==0){s?t.setStart(c,0):t.setEnd(c,c.data.length);return}if(a[c.nodeName]){s?t.setStartBefore(c):c.nodeName==="BR"?t.setEndBefore(c):t.setEndAfter(c);return}}while(c=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Hc=e=>{const t=e.selection.getSel();return ee(t)&&t.rangeCount>0},rd=(e,t)=>{const n=Lr(e);n.length>0?j(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},Lv=(e,t,n)=>{const s=Ly(e,t);n(s),e.moveToBookmark(s)},jc=e=>Fn(e==null?void 0:e.nodeType),ad=e=>te(e)&&!_n(e)&&!Bn(e)&&!Ro(e),sB=(e,t)=>{if(ad(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},Vo=e=>e.isContentEditable===!0,$v=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),a=Qe(r);Lv(s,!0,()=>{t()}),a&&Qe(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&oB(o,s)},oB=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:a}=o,c=t.getNode();if(!sB(e,c)&&te(r)){const l=r.childNodes,f=e.getRoot();let g;if(a<l.length){const m=l[a];g=new _t(m,(n=e.getParent(m,e.isBlock))!==null&&n!==void 0?n:f)}else{const m=l[l.length-1];g=new _t(m,(s=e.getParent(m,e.isBlock))!==null&&s!==void 0?s:f),g.next(!0)}for(let m=g.current();m;m=g.next()){if(e.getContentEditable(m)==="false")return;if(z(m)&&!cd(m)){o.setStart(m,0),t.setRng(o);return}}}},Fv=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=n?e:e[s];e;e=e[s])if(te(e)||!cd(e))return e}},id=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Do(e,t),$r=(e,t,n)=>e.schema.isValidChild(t,n),cd=(e,t=!1)=>{if(ee(e)&&z(e)){const n=t?e.data.replace(/ /g,""):e.data;return Po(n)}else return!1},rB=e=>ee(e)&&z(e)&&e.length===0,aB=(e,t)=>{const n="[data-mce-cef-wrappable]",s=vP(e),o=ba(s)?n:`${n},${s}`;return Mn(x.fromDom(t),o)},Mv=(e,t)=>{const n=e.dom;return ad(t)&&n.getContentEditable(t)==="false"&&aB(e,t)&&n.select('[contenteditable="true"]',t).length===0},eo=(e,t)=>$e(e)?e(t):(ee(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),ld=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),ud=(e,t)=>{if(bt(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=zc(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Vc=(e,t,n)=>{const s=e.getStyle(t,n);return ud(s,n)},Uv=(e,t)=>{let n;return e.getParent(t,s=>te(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},Wc=(e,t,n)=>e.getParents(t,n,e.getRoot()),fd=(e,t,n)=>{const s=e.formatter.get(t);return ee(s)&&mt(s,n)},iB=(e,t)=>fd(e,t,s=>{const o=r=>$e(r)||r.length>1&&r.charAt(0)==="%";return mt(["styles","attributes"],r=>Ze(s,r).exists(a=>{const c=at(a)?a:Hu(a);return mt(c,o)}))}),cB=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>pa(r,(a,c)=>mt(s,l=>l===c));return fd(e,t,r=>{const a=o(r);return fd(e,n,c=>{const l=o(c);return zN(a,l)})})},ms=e=>br(e,"block"),lB=e=>ms(e)&&e.wrapper===!0,uB=e=>ms(e)&&e.wrapper!==!0,Sn=e=>br(e,"selector"),St=e=>br(e,"inline"),fB=e=>Sn(e)&&St(e)&&vr(Ze(e,"mixed"),!0),dd=e=>Sn(e)&&e.expand!==!1&&!St(e),Fr=_n,zv=Wc,Hv=cd,dB=id,mB=e=>ut(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,jv=(e,t)=>{let n=t;for(;n;){if(te(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Vv=(e,t,n,s)=>{const o=t.data;if(e){for(let r=n;r>0;r--)if(s(o.charAt(r-1)))return r}else for(let r=n;r<o.length;r++)if(s(o.charAt(r)))return r;return-1},pB=(e,t,n)=>Vv(e,t,n,s=>Uc(s)||Ir(s)),gB=(e,t,n)=>Vv(e,t,n,Zf),Wv=(e,t,n,s,o,r)=>{let a;const c=e.getParent(n,e.isBlock)||t,l=(g,m,h)=>{const _=Fo(e),w=o?_.backwards:_.forwards;return y.from(w(g,m,(C,S)=>Fr(C.parentNode)?-1:(a=C,h(o,C,S)),c))};return l(n,s,pB).bind(g=>r?l(g.container,g.offset+(o?-1:0),gB):y.some(g)).orThunk(()=>a?y.some({container:a,offset:o?0:a.length}):y.none())},qv=(e,t,n,s,o)=>{const r=s[o];z(s)&&ba(s.data)&&r&&(s=r);const a=zv(e,s);for(let c=0;c<a.length;c++)for(let l=0;l<t.length;l++){const f=t[l];if(!(ee(f.collapsed)&&f.collapsed!==n.collapsed)&&Sn(f)&&e.is(a[c],f.selector))return a[c]}return s},Kv=(e,t,n,s)=>{var o;let r=n;const a=e.getRoot(),c=t[0];if(ms(c)&&(r=c.wrapper?null:e.getParent(n,c.block,a)),!r){const l=(o=e.getParent(n,"LI,TD,TH"))!==null&&o!==void 0?o:a;r=e.getParent(z(n)?n.parentNode:n,f=>f!==a&&dB(e.schema,f),l)}if(r&&ms(c)&&c.wrapper&&(r=zv(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!e.isBlock(r[s])&&(r=r[s],!ld(r,"br")););return r||n},Gv=(e,t,n,s)=>{const o=n.parentNode;return ee(n[s])?!1:o===t||bt(o)||e.isBlock(o)?!0:Gv(e,t,o,s)},qc=(e,t,n,s,o)=>{let r=n;const a=o?"previousSibling":"nextSibling",c=e.getRoot();if(z(n)&&!Hv(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let l=r[a];l;l=l[a]){const f=z(l)&&!Gv(e,c,l,a);if(!Fr(l)&&!mB(l)&&!Hv(l,f))return r}if(r===c||r.parentNode===c){n=r;break}r=r.parentNode}return n},Yv=e=>Fr(e.parentNode)||Fr(e),Wo=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:a,endOffset:c}=t;const l=n[0];return te(o)&&o.hasChildNodes()&&(o=Js(o,r),z(o)&&(r=0)),te(a)&&a.hasChildNodes()&&(a=Js(a,t.collapsed?c:c-1),z(a)&&(c=a.data.length)),o=jv(e,o),a=jv(e,a),Yv(o)&&(o=Fr(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,z(o)&&(r=t.collapsed?o.length:0)),Yv(a)&&(a=Fr(a)?a:a.parentNode,t.collapsed?a=a.nextSibling||a:a=a.previousSibling||a,z(a)&&(c=t.collapsed?0:a.length)),t.collapsed&&(Wv(e,e.getRoot(),o,r,!0,s).each(({container:m,offset:h})=>{o=m,r=h}),Wv(e,e.getRoot(),a,c,!1,s).each(({container:m,offset:h})=>{a=m,c=h})),(St(l)||l.block_expand)&&((!St(l)||!z(o)||r===0)&&(o=qc(e,n,o,r,!0)),(!St(l)||!z(a)||c===a.data.length)&&(a=qc(e,n,a,c,!1))),dd(l)&&(o=qv(e,n,t,o,"previousSibling"),a=qv(e,n,t,a,"nextSibling")),(ms(l)||Sn(l))&&(o=Kv(e,n,o,"previousSibling"),a=Kv(e,n,a,"nextSibling"),ms(l)&&(e.isBlock(o)||(o=qc(e,n,o,r,!0)),e.isBlock(a)||(a=qc(e,n,a,c,!1)))),te(o)&&o.parentNode&&(r=e.nodeIndex(o),o=o.parentNode),te(a)&&a.parentNode&&(c=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:r,endContainer:a,endOffset:c}},Qa=(e,t,n)=>{var s;const o=t.startOffset,r=Js(t.startContainer,o),a=t.endOffset,c=Js(t.endContainer,a-1),l=S=>{const N=S[0];z(N)&&N===r&&o>=N.data.length&&S.splice(0,1);const k=S[S.length-1];return a===0&&S.length>0&&k===c&&z(k)&&S.splice(S.length-1,1),S},f=(S,N,k)=>{const R=[];for(;S&&S!==k;S=S[N])R.push(S);return R},g=(S,N)=>e.getParent(S,k=>k.parentNode===N,N),m=(S,N,k)=>{const R=k?"nextSibling":"previousSibling";for(let T=S,F=T.parentNode;T&&T!==N;T=F){F=T.parentNode;const G=f(T===S?T:T[R],R);G.length&&(k||G.reverse(),n(l(G)))}};if(r===c)return n(l([r]));const h=(s=e.findCommonAncestor(r,c))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,c))return m(r,h,!0);if(e.isChildOf(c,r))return m(c,h);const _=g(r,h)||r,w=g(c,h)||c;m(r,_,!0);const C=f(_===r?_:_.nextSibling,"nextSibling",w===c?w.nextSibling:w);C.length&&n(l(C)),m(c,w)},hB=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],bB=e=>gn(e)&&dc(e)===It,yB=(e,t,n,s)=>Un(t).fold(()=>"skipping",o=>s==="br"||bB(t)?"valid":X1(t)?"existing":Bn(t.dom)?"caret":mt(hB,r=>Mn(t,r))?"valid-block":!$r(e,n,s)||!$r(e,et(o),n)?"invalid-child":"valid"),vB=(e,t)=>{const n=Wo(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Xv=(e,t,n,s,o,r)=>{const{uid:a=t,...c}=n;Cr(e,Ia()),kt(e,`${Rr()}`,a),kt(e,`${Lo()}`,s);const{attributes:l={},classes:f=[]}=o(a,c);if(Hs(e,l),eO(e,f),r){f.length>0&&kt(e,`${$a()}`,f.join(","));const g=un(l);g.length>0&&kt(e,`${Fa()}`,g.join(","))}},CB=e=>{Ea(e,Ia()),Dt(e,`${Rr()}`),Dt(e,`${Lo()}`),Dt(e,`${La()}`);const t=xs(e,`${Fa()}`).map(s=>s.split(",")).getOr([]),n=xs(e,`${$a()}`).map(s=>s.split(",")).getOr([]);j(t,s=>Dt(e,s)),tO(e,n),Dt(e,`${$a()}`),Dt(e,`${Fa()}`)},Jv=(e,t,n,s,o)=>{const r=x.fromTag("span",e);return Xv(r,t,n,s,o,!1),r},EB=(e,t,n,s,o,r)=>{const a=[],c=Jv(e.getDoc(),n,r,s,o),l=Xs(),f=()=>{l.clear()},g=()=>l.get().getOrThunk(()=>{const w=$o(c);return a.push(w),l.set(w),w}),m=w=>{j(w,h)},h=w=>{switch(yB(e,w,"span",et(w))){case"invalid-child":{f();const S=Bt(w);m(S),f();break}case"valid-block":{f(),Xv(w,n,r,s,o,!0);break}case"valid":{const S=g();mb(w,S);break}}},_=w=>{const C=Le(w,x.fromDom);m(C)};return Qa(e.dom,t,w=>{f(),_(w)}),a},_B=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),a=Lr(e).length>0,c=uy("mce-annotation");if(r.collapsed&&!a&&vB(e,r),o.getRng().collapsed&&!a){const l=Jv(e.getDoc(),c,s,t,n.decorate);ic(l,At),o.getRng().insertNode(l.dom),o.select(l.dom)}else Lv(o,!1,()=>{rd(e,l=>{EB(e,l,c,t,n.decorate,s)})})})},Qv=e=>{const t=Z1();Q1(e,t);const n=J1(e,t),s=Yu("span"),o=r=>{j(r,a=>{s(a)?Rs(a):CB(a)})};return{register:(r,a)=>{t.register(r,a)},annotate:(r,a)=>{t.lookup(r).each(c=>{_B(e,r,c,a)})},annotationChanged:(r,a)=>{n.addListener(r,a)},remove:r=>{ry(e,y.some(r)).each(({elements:a})=>{const c=e.selection.getBookmark();o(a),e.selection.moveToBookmark(c)})},removeAll:r=>{const a=e.selection.getBookmark();Je(cy(e,r),(c,l)=>{o(c)}),e.selection.moveToBookmark(a)},getAll:r=>{const a=cy(e,r);return Ji(a,c=>Le(c,l=>l.dom))}}},Za=e=>({getBookmark:ae(jD,e),moveToBookmark:ae(VD,e)});Za.isBookmarkNode=_n;const Zv=(e,t,n)=>n.collapsed?!1:mt(n.getClientRects(),s=>rO(s,e,t)),SB=(e,t)=>e.dispatch("PreProcess",t),wB=(e,t)=>e.dispatch("PostProcess",t),xB=e=>{e.dispatch("remove")},kB=e=>{e.dispatch("detach")},AB=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},NB=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},RB=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},TB=e=>{e.dispatch("PreInit")},OB=e=>{e.dispatch("PostRender")},PB=e=>{e.dispatch("Init")},DB=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},eC=(e,t,n)=>{e.dispatch(t,n)},tC=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},nC=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},BB=(e,t)=>e.dispatch("BeforeSetContent",t),sC=(e,t)=>e.dispatch("SetContent",t),IB=(e,t)=>e.dispatch("BeforeGetContent",t),oC=(e,t)=>e.dispatch("GetContent",t),LB=(e,t)=>{e.dispatch("AutocompleterStart",t)},$B=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},FB=e=>{e.dispatch("AutocompleterEnd")},MB=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),UB=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),rC=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ie={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ie.metaKeyPressed(e),metaKeyPressed:e=>Ie.os.isMacOS()||Ie.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},qo="data-mce-selected",zB="table,img,figure.image,hr,video,span.mce-preview-object",aC=Math.abs,Kc=Math.round,md={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},HB=e=>e.type==="longpress"||e.type.indexOf("touch")===0,iC=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let a,c,l,f,g,m,h,_,w,C,S,N,k,R,T,F,G;const W=X=>ee(X)&&(xb(X)||n.is(X,"figure.image")),B=X=>is(X)||n.hasClass(X,"mce-preview-object"),D=(X,xe)=>{if(HB(X)){const we=X.touches[0];return W(X.target)&&!Zv(we.clientX,we.clientY,xe)}else return W(X.target)&&!Zv(X.clientX,X.clientY,xe)},Q=X=>{const xe=X.target;D(X,t.selection.getRng())&&!X.isDefaultPrevented()&&t.selection.select(xe)},ce=X=>n.hasClass(X,"mce-preview-object")&&ee(X.firstElementChild)?[X,X.firstElementChild]:n.is(X,"figure.image")?[X.querySelector("img")]:[X],de=X=>{const xe=Qy(t);return!xe||X.getAttribute("data-mce-resize")==="false"||X===t.getBody()?!1:n.hasClass(X,"mce-preview-object")&&ee(X.firstElementChild)?Mn(x.fromDom(X.firstElementChild),xe):Mn(x.fromDom(X),xe)},ye=X=>B(X)?n.create("img",{src:Ie.transparentSrc}):X.cloneNode(!0),ke=(X,xe,we)=>{if(ee(we)){const vt=ce(X);j(vt,We=>{We.style[xe]||!t.schema.isValid(We.nodeName.toLowerCase(),xe)?n.setStyle(We,xe,we):n.setAttrib(We,xe,""+we)})}},De=(X,xe,we)=>{ke(X,"width",xe),ke(X,"height",we)},Ue=X=>{let xe,we,vt,We,ge;xe=X.screenX-m,we=X.screenY-h,R=xe*f[2]+C,T=we*f[3]+S,R=R<5?5:R,T=T<5?5:T,(W(a)||B(a))&&fP(t)!==!1?vt=!ie.modifierPressed(X):vt=ie.modifierPressed(X),vt&&(aC(xe)>aC(we)?(T=Kc(R*N),R=Kc(T/N)):(R=Kc(T/N),T=Kc(R*N))),De(c,R,T),We=f.startPos.x+xe,ge=f.startPos.y+we,We=We>0?We:0,ge=ge>0?ge:0,n.setStyles(l,{left:We,top:ge,display:"block"}),l.innerHTML=R+" &times; "+T,f[2]<0&&c.clientWidth<=R&&n.setStyle(c,"left",_+(C-R)),f[3]<0&&c.clientHeight<=T&&n.setStyle(c,"top",w+(S-T)),xe=r.scrollWidth-F,we=r.scrollHeight-G,xe+we!==0&&n.setStyles(l,{left:We-xe,top:ge-we}),k||(NB(t,a,C,S,"corner-"+f.name),k=!0)},nt=()=>{const X=k;k=!1,X&&(ke(a,"width",R),ke(a,"height",T)),n.unbind(s,"mousemove",Ue),n.unbind(s,"mouseup",nt),o!==s&&(n.unbind(o,"mousemove",Ue),n.unbind(o,"mouseup",nt)),n.remove(c),n.remove(l),n.remove(g),Rt(a),X&&(RB(t,a,R,T,"corner-"+f.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},Rt=X=>{Y();const xe=n.getPos(X,r),we=xe.x,vt=xe.y,We=X.getBoundingClientRect(),ge=We.width||We.right-We.left,Oe=We.height||We.bottom-We.top;a!==X&&(H(),a=X,R=T=0);const ct=t.dispatch("ObjectSelected",{target:X});de(X)&&!ct.isDefaultPrevented()?Je(md,(ze,tt)=>{const ot=lt=>{const Nn=ce(a)[0];m=lt.screenX,h=lt.screenY,C=Nn.clientWidth,S=Nn.clientHeight,N=S/C,f=ze,f.name=tt,f.startPos={x:ge*ze[0]+we,y:Oe*ze[1]+vt},F=r.scrollWidth,G=r.scrollHeight,g=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(g,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),c=ye(a),n.addClass(c,"mce-clonedresizable"),n.setAttrib(c,"data-mce-bogus","all"),c.contentEditable="false",n.setStyles(c,{left:we,top:vt,margin:0}),De(c,ge,Oe),c.removeAttribute(qo),r.appendChild(c),n.bind(s,"mousemove",Ue),n.bind(s,"mouseup",nt),o!==s&&(n.bind(o,"mousemove",Ue),n.bind(o,"mouseup",nt)),l=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+S)};let qe=n.get("mceResizeHandle"+tt);qe&&n.remove(qe),qe=n.add(r,"div",{id:"mceResizeHandle"+tt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+tt+"-resize; margin:0; padding:0"}),n.bind(qe,"mousedown",lt=>{lt.stopImmediatePropagation(),lt.preventDefault(),ot(lt)}),ze.elm=qe,n.setStyles(qe,{left:ge*ze[0]+we-qe.offsetWidth/2,top:Oe*ze[1]+vt-qe.offsetHeight/2})}):H(!1)},gt=Ac(Rt,0),H=(X=!0)=>{gt.cancel(),Y(),a&&X&&a.removeAttribute(qo),Je(md,(xe,we)=>{const vt=n.get("mceResizeHandle"+we);vt&&(n.unbind(vt),n.remove(vt))})},re=(X,xe)=>n.isChildOf(X,xe),Ne=X=>{if(k||t.removed||t.composing)return;const xe=X.type==="mousedown"?X.target:e.getNode(),we=ko(x.fromDom(xe),zB).map(We=>We.dom).filter(We=>n.isEditable(We.parentElement)).getOrUndefined(),vt=ee(we)?n.getAttrib(we,qo,"1"):"1";if(j(n.select(`img[${qo}],hr[${qo}]`),We=>{We.removeAttribute(qo)}),ee(we)&&re(we,r)){ue();const We=e.getStart(!0);if(re(We,we)&&re(e.getEnd(!0),we)){n.setAttrib(we,qo,vt),gt.throttle(we);return}}H()},Y=()=>{Je(md,X=>{X.elm&&(n.unbind(X.elm),delete X.elm)})},ue=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{ue(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ne),t.on("keyup compositionend",X=>{a&&a.nodeName==="TABLE"&&Ne(X)}),t.on("hide blur",H),t.on("contextmenu longpress",Q,!0)}),t.on("remove",Y),{isResizable:de,showResizeRect:Rt,hideResizeRect:H,updateResizeRect:Ne,destroy:()=>{gt.cancel(),a=c=g=null}}},jB=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},VB=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},cC=(e,t,n)=>{const s=e.document.createRange();return jB(s,t),VB(s,n),s},pd=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},ei=cs.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),lC=(e,t,n)=>t(x.fromDom(n.startContainer),n.startOffset,x.fromDom(n.endContainer),n.endOffset),WB=(e,t)=>t.match({domRange:n=>({ltr:Z(n),rtl:y.none}),relative:(n,s)=>({ltr:_o(()=>cC(e,n,s)),rtl:_o(()=>y.some(cC(e,s,n)))}),exact:(n,s,o,r)=>({ltr:_o(()=>pd(e,n,s,o,r)),rtl:_o(()=>y.some(pd(e,o,r,n,s)))})}),qB=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>ei.rtl(x.fromDom(o.endContainer),o.endOffset,x.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>lC(e,ei.ltr,n)):lC(e,ei.ltr,n)},KB=(e,t)=>{const n=WB(e,t);return qB(e,n)};ei.ltr,ei.rtl;const uC={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},GB=(e,t,n)=>{var s,o;return y.from((o=(s=e.dom).caretPositionFromPoint)===null||o===void 0?void 0:o.call(s,t,n)).bind(r=>{if(r.offsetNode===null)return y.none();const a=e.dom.createRange();return a.setStart(r.offsetNode,r.offset),a.collapse(),y.some(a)})},YB=(e,t,n)=>{var s,o;return y.from((o=(s=e.dom).caretRangeFromPoint)===null||o===void 0?void 0:o.call(s,t,n))},XB=(()=>document.caretPositionFromPoint?GB:document.caretRangeFromPoint?YB:y.none)(),JB=(e,t,n)=>{const s=x.fromDom(e.document);return XB(s,t,n).map(o=>uC.create(x.fromDom(o.startContainer),o.startOffset,x.fromDom(o.endContainer),o.endOffset))},gd=cs.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),QB=(e,t,n,s)=>e.fold(t,n,s),ZB=e=>e.fold(Gt,Gt,Gt),eI=gd.before,tI=gd.on,nI=gd.after,Ds={before:eI,on:tI,after:nI,cata:QB,getStart:ZB},Gc=cs.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sI=e=>Gc.exact(e.start,e.soffset,e.finish,e.foffset),oI=e=>e.match({domRange:t=>x.fromDom(t.startContainer),relative:(t,n)=>Ds.getStart(t),exact:(t,n,s,o)=>t}),rI=Gc.domRange,aI=Gc.relative,iI=Gc.exact,cI=e=>{const t=oI(e);return Sa(t)},lI=uC.create,Mr={domRange:rI,relative:aI,exact:iI,exactFromRange:sI,getWin:cI,range:lI},Yc=(e,t)=>{const n=et(e);return n==="input"?Ds.after(e):Ge(["br","img"],n)?t===0?Ds.before(e):Ds.after(e):Ds.on(e,t)},uI=(e,t)=>{const n=e.fold(Ds.before,Yc,Ds.after),s=t.fold(Ds.before,Yc,Ds.after);return Mr.relative(n,s)},fC=(e,t,n,s)=>{const o=Yc(e,t),r=Yc(n,s);return Mr.relative(o,r)},fI=e=>e.match({domRange:t=>{const n=x.fromDom(t.startContainer),s=x.fromDom(t.endContainer);return fC(n,t.startOffset,s,t.endOffset)},relative:uI,exact:fC}),hd=(e,t)=>{const s=(t||document).createDocumentFragment();return j(e,o=>{s.appendChild(o.dom)}),x.fromDom(s)},dI=e=>{const t=Mr.getWin(e).dom,n=(o,r,a,c)=>pd(t,o,r,a,c),s=fI(e);return KB(t,s).match({ltr:n,rtl:n})},mI=(e,t,n)=>JB(e,t,n),dC=(e,t,n)=>{const s=Sa(x.fromDom(n));return mI(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},bd=(e,t)=>ee(e)&&ee(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,pI=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},mC=(e,t,n)=>pI(e,t,n)!==null,gI=(e,t,n)=>mC(e,t,s=>s.nodeName===n),hI=(e,t)=>vn(e)&&!mC(e,t,Bn),pC=(e,t,n)=>{const s=t.parentNode;if(s){const o=new _t(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if(ut(r))return!0}return!1},bI=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},yI=(e,t)=>{let n=t;for(;n&&n!==e;){if(Qe(n))return!0;n=n.parentNode}return!1},yd=(e,t,n,s,o)=>{const r=e.getRoot(),a=e.schema.getNonEmptyElements(),c=o.parentNode;let l,f;if(!c)return y.none();const g=e.getParent(c,e.isBlock)||r;if(s&&ut(o)&&t&&e.isEmpty(g))return y.some(L(c,e.nodeIndex(o)));const m=new _t(o,g);for(;f=m[s?"prev":"next"]();){if(e.getContentEditableParent(f)==="false"||hI(f,r))return y.none();if(z(f)&&f.data.length>0)return gI(f,r,"A")?y.none():y.some(L(f,s?f.data.length:0));if(e.isBlock(f)||a[f.nodeName.toLowerCase()])return y.none();l=f}return Ws(l)?y.none():n&&l?y.some(L(l,0)):y.none()},gC=(e,t,n,s)=>{const o=e.getRoot();let r,a=!1,c=n?s.startContainer:s.endContainer,l=n?s.startOffset:s.endOffset;const f=te(c)&&l===c.childNodes.length,g=e.schema.getNonEmptyElements();let m=n;if(vn(c))return y.none();if(te(c)&&l>c.childNodes.length-1&&(m=!1),Na(c)&&(c=o,l=0),c===o){if(m&&(r=c.childNodes[l>0?l-1:0],r&&(vn(r)||g[r.nodeName]||Ts(r))))return y.none();if(c.hasChildNodes()){if(l=Math.min(!m&&l>0?l-1:l,c.childNodes.length-1),c=c.childNodes[l],l=z(c)&&f?c.data.length:0,!t&&c===o.lastChild&&Ts(c)||yI(o,c)||vn(c))return y.none();if(c.hasChildNodes()&&!Ts(c)){r=c;const h=new _t(c,o);do{if(Qe(r)||vn(r)){a=!1;break}if(z(r)&&r.data.length>0){l=m?0:r.data.length,c=r,a=!0;break}if(g[r.nodeName.toLowerCase()]&&!gT(r)){l=e.nodeIndex(r),c=r.parentNode,m||l++,a=!0;break}}while(r=m?h.next():h.prev())}}}return t&&(z(c)&&l===0&&yd(e,f,t,!0,c).each(h=>{c=h.container(),l=h.offset(),a=!0}),te(c)&&(r=c.childNodes[l],r||(r=c.childNodes[l-1]),r&&ut(r)&&!bI(r,"A")&&!pC(e,r,!1)&&!pC(e,r,!0)&&yd(e,f,t,!0,r).each(h=>{c=h.container(),l=h.offset(),a=!0}))),m&&!t&&z(c)&&l===c.data.length&&yd(e,f,t,!1,c).each(h=>{c=h.container(),l=h.offset(),a=!0}),a&&c?y.some(L(c,l)):y.none()},Xc=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=L.fromRangeStart(t);return gC(e,n,!0,s).each(r=>{(!n||!L.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||gC(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),bd(t,s)?y.none():y.some(s)},Jc=(e,t)=>e.splitText(t),Qc=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&z(t)){if(n>0&&n<t.data.length)if(s=Jc(t,n),t=s.previousSibling,o>n){o=o-n;const r=Jc(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(z(t)&&n>0&&n<t.data.length&&(t=Jc(t,n),n=0),z(s)&&o>0&&o<s.data.length){const r=Jc(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},Ko=e=>({walk:(r,a)=>Qa(e,r,a),split:Qc,expand:(r,a={type:"word"})=>{if(a.type==="word"){const c=Wo(e,r,[{inline:"span"}]),l=e.createRng();return l.setStart(c.startContainer,c.startOffset),l.setEnd(c.endContainer,c.endOffset),l}return r},normalize:r=>Xc(e,r).fold(it,a=>(r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset),!0))});Ko.compareRanges=bd,Ko.getCaretRangeFromPoint=dC,Ko.getSelectedNode=Nc,Ko.getNode=Js;const vI=((e,t)=>{const n=(c,l)=>{if(!Fn(l)&&!l.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+l);const f=c.dom;Aa(f)&&(f.style[e]=l+"px")},s=c=>{const l=t(c);if(l<=0||l===null){const f=as(c,e);return parseFloat(f)||0}return l},o=s,r=(c,l)=>cn(l,(f,g)=>{const m=as(c,g),h=m===void 0?0:parseInt(m,10);return isNaN(h)?f:f+h},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(c,l,f)=>{const g=r(c,f);return l>g?l-g:0}}})("height",e=>{const t=e.dom;return Er(e)?t.getBoundingClientRect().height:t.offsetHeight}),CI=e=>vI.get(e),hC=()=>x.fromDom(document),bC=(e,t)=>e.view(t).fold(Z([]),s=>{const o=e.owner(s),r=bC(e,o);return[s].concat(r)}),EI=(e,t)=>{const n=t.owner(e);return bC(t,n)};var _I=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?y.none():y.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(x.fromDom)},owner:e=>As(e)});const SI=e=>{const t=hC(),n=of(t),s=EI(e,_I),o=sf(e),r=fa(s,(a,c)=>{const l=sf(c);return{left:a.left+l.left,top:a.top+l.top}},{left:0,top:0});return Sr(r.left+o.left+n.left,r.top+o.top+n.top)},vd=e=>et(e)==="textarea",wI=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),xI=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},kI=(e,t)=>{const n=Bt(e);if(n.length===0||vd(e))return{element:e,offset:t};if(t<n.length&&!vd(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return vd(s)?{element:e,offset:t}:et(s)==="img"?{element:s,offset:1}:gn(s)?{element:s,offset:dc(s).length}:{element:s,offset:Bt(s).length}}},yC=(e,t)=>{const n=cT(e),s=CI(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},AI=(e,t)=>{const n=kI(e,t),s=x.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+It+"</span>");return bn(n.element,s),yC(s,()=>st(s))},NI=e=>yC(x.fromDom(e),Ae),vC=(e,t,n,s)=>{TI(e,(o,r)=>RI(e,t,n,s),n)},CC=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(wI(e,r))return;const a=of(t).top;n(t,a,s,o),xI(e,r)},RI=(e,t,n,s)=>{const o=x.fromDom(e.getBody()),r=x.fromDom(e.getDoc());JR(o);const a=AI(x.fromDom(n.startContainer),n.startOffset);CC(e,r,t,a,s),a.cleanup()},EC=(e,t,n,s)=>{const o=x.fromDom(e.getDoc());CC(e,o,n,NI(t),s)},TI=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,a=n.endOffset;t(x.fromDom(s),x.fromDom(r));const c=e.dom.createRng();c.setStart(s,o),c.setEnd(r,a),e.selection.setRng(n)},Cd=(e,t,n,s)=>{const o=e.pos;if(n)bb(o.left,o.top,s);else{const r=o.top-t+e.height;bb(o.left,r,s)}},_C=(e,t,n,s,o)=>{const r=n+t,a=s.pos.top,c=s.bottom,l=c-a>=n;a<t?Cd(s,n,o!==!1,e):a>r?Cd(s,n,l?o!==!1:o===!0,e):c>r&&!l&&Cd(s,n,o===!0,e)},SC=(e,t,n,s)=>{const o=Sa(e).dom.innerHeight;_C(e,t,o,n,s)},wC=(e,t,n,s)=>{const o=Sa(e).dom.innerHeight;_C(e,t,o,n,s);const r=SI(n.element),a=Cb(window);r.top<a.y?yb(n.element,s!==!1):r.top>a.bottom&&yb(n.element,s===!0)},OI=(e,t,n)=>vC(e,SC,t,n),PI=(e,t,n)=>EC(e,t,SC,n),DI=(e,t,n)=>vC(e,wC,t,n),BI=(e,t,n)=>EC(e,t,wC,n),II=(e,t,n)=>{(e.inline?PI:BI)(e,t,n)},ti=(e,t,n)=>{(e.inline?OI:DI)(e,t,n)},xC=e=>e.dom.focus(),kC=e=>{const t=js(e).dom;return e.dom===t.activeElement},Ed=(e=hC())=>y.from(e.dom.activeElement).map(x.fromDom),LI=e=>Ed(js(e)).filter(t=>e.dom.contains(t.dom)),AC=(e,t)=>{const n=gn(t)?dc(t).length:Bt(t).length+1;return e>n?n:e<0?0:e},$I=e=>Mr.range(e.start,AC(e.soffset,e.start),e.finish,AC(e.foffset,e.finish)),NC=(e,t)=>!lc(t.dom)&&(ks(e,t)||Fe(e,t)),RC=e=>t=>NC(e,t.start)&&NC(e,t.finish),FI=e=>e.inline||Ie.browser.isFirefox(),MI=e=>Mr.range(x.fromDom(e.startContainer),e.startOffset,x.fromDom(e.endContainer),e.endOffset),UI=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?y.none():y.from(t.getRangeAt(0))).map(MI)},zI=e=>{const t=Sa(e);return UI(t.dom).filter(RC(e))},HI=(e,t)=>y.from(t).filter(RC(e)).map($I),jI=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),y.some(t)}catch{return y.none()}},_d=e=>{const t=FI(e)?zI(x.fromDom(e.getBody())):y.none();e.bookmark=t.isSome()?t:e.bookmark},Sd=e=>(e.bookmark?e.bookmark:y.none()).bind(n=>HI(x.fromDom(e.getBody()),n)).bind(jI),VI=e=>{Sd(e).each(t=>e.selection.setRng(t))},TC={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},WI=(e,t)=>(Fn(t)||(t=0),setTimeout(e,t)),qI=(e,t)=>(Fn(t)||(t=0),setInterval(e,t)),wn={setEditorTimeout:(e,t,n)=>WI(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=qI(()=>{e.removed?clearInterval(s):t()},n);return s}},KI=e=>e.type==="nodechange"&&e.selectionChange,GI=(e,t)=>{const n=()=>{t.throttle()};Ve.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Ve.DOM.unbind(document,"mouseup",n)})},YI=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},XI=(e,t)=>{YI(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{KI(n)||_d(e)})},JI=e=>{const t=Ac(()=>{_d(e)},0);e.on("init",()=>{e.inline&&GI(e,t),XI(e,t)}),e.on("remove",()=>{t.cancel()})};let Ur;const wd=Ve.DOM,QI=e=>te(e)&&TC.isEditorUIElement(e),xd=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Zc=(e,t)=>{const n=CP(e);return wd.getParent(t,o=>QI(o)||(n?e.dom.is(o,n):!1))!==null},kd=e=>{try{const t=js(x.fromDom(e.getElement()));return Ed(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},ZI=(e,t)=>{const n=t.editor;JI(n);const s=(o,r)=>{if(ZP(o)&&o.inline!==!0){const a=x.fromDom(o.getContainer());r(a,"tox-edit-focus")}};n.on("focusin",()=>{const o=e.focusedEditor;xd(kd(n))&&s(n,Cr),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{wn.setEditorTimeout(n,()=>{const o=e.focusedEditor;(!xd(kd(n))||o!==n)&&s(n,Ea),!Zc(n,kd(n))&&o===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ur||(Ur=o=>{const r=e.activeEditor;r&&rb(o).each(a=>{const c=a;c.ownerDocument===document&&c!==document.body&&!Zc(r,c)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},wd.bind(document,"focusin",Ur))},eL=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ur&&(wd.unbind(document,"focusin",Ur),Ur=null)},tL=e=>{e.on("AddEditor",ae(ZI,e)),e.on("RemoveEditor",ae(eL,e))},nL=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),sL=e=>e.collapsed?y.from(Js(e.startContainer,e.startOffset)).map(x.fromDom):y.none(),oL=(e,t)=>sL(t).bind(n=>RT(n)?y.some(n):ks(e,n)?y.none():y.some(e)),OC=(e,t)=>{oL(x.fromDom(e.getBody()),t).bind(n=>Jt(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Ad=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},rL=e=>kC(e)||LI(e).isSome(),aL=e=>ee(e.iframeElement)&&kC(x.fromDom(e.iframeElement)),iL=e=>{const t=e.getBody();return t&&rL(x.fromDom(t))},cL=e=>{const t=js(x.fromDom(e.getElement()));return Ed(t).filter(n=>!xd(n.dom)&&Zc(e,n.dom)).isSome()},Go=e=>e.inline?iL(e):aL(e),lL=e=>Go(e)||cL(e),uL=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),ee(e.bookmark)&&!Go(e)&&Sd(e).each(r=>{e.selection.setRng(r),s=r});const o=nL(e,t.getNode());if(o&&e.dom.isChildOf(o,n)){Ad(o),OC(e,s),Nd(e);return}e.inline||(Ie.browser.isOpera()||Ad(n),e.getWin().focus()),(Ie.browser.isFirefox()||e.inline)&&(Ad(n),OC(e,s)),Nd(e)},Nd=e=>e.editorManager.setActive(e),fL=(e,t)=>{e.removed||(t?Nd(e):uL(e))},PC=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return y.from(r).map(x.fromDom).map(c=>!s||!t.collapsed?sc(c,o(c,a)).getOr(c):c).bind(c=>nn(c)?y.some(c):Un(c).filter(nn)).map(c=>c.dom).getOr(e)},DC=(e,t,n=!1)=>PC(e,t,!0,n,(s,o)=>Math.min(sb(s),o)),BC=(e,t,n=!1)=>PC(e,t,!1,n,(s,o)=>o>0?o-1:o),IC=(e,t)=>{const n=e;for(;e&&z(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},dL=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let a=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(a=n.childNodes[o]),z(n)&&z(s)&&(n.length===o?n=IC(n.nextSibling,!0):n=n.parentNode,r===0?s=IC(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(a=n)));const c=z(a)?a.parentNode:a;return te(c)?c:e},mL=(e,t,n,s)=>{const o=[],r=e.getRoot(),a=e.getParent(n||DC(r,t,t.collapsed),e.isBlock),c=e.getParent(s||BC(r,t,t.collapsed),e.isBlock);if(a&&a!==r&&o.push(a),a&&c&&a!==c){let l;const f=new _t(a,r);for(;(l=f.next())&&l!==c;)e.isBlock(l)&&o.push(l)}return c&&a!==c&&c!==r&&o.push(c),o},pL=(e,t,n)=>y.from(t).bind(s=>y.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),a=e.createRng();return a.setStart(o,r),a.setEnd(o,r+1),n&&(od(e,a,s,!0),od(e,a,s,!1)),a})),Rd=(e,t)=>Le(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),gL=e=>et(e)==="img"?1:Ab(e).fold(()=>Bt(e).length,t=>t.length),hL=e=>Ab(e).filter(t=>t.trim().length!==0||t.indexOf(At)>-1).isSome(),bL=e=>wR(e)&&hn(e,"contenteditable")==="false",yL=["img","br"],LC=e=>hL(e)||Ge(yL,et(e))||bL(e),vL=e=>KR(e,LC),CL=e=>EL(e,LC),EL=(e,t)=>{const n=s=>{const o=Bt(s);for(let r=o.length-1;r>=0;r--){const a=o[r];if(t(a))return y.some(a);const c=n(a);if(c.isSome())return c}return y.none()};return n(e)},$C="[data-mce-autocompleter]",_L=(e,t)=>{if(FC(x.fromDom(e.getBody())).isNone()){const n=x.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Et(n,x.fromDom(t.extractContents())),t.insertNode(n.dom),Un(n).each(s=>s.dom.normalize()),CL(n).map(s=>{e.selection.setCursorLocation(s.dom,gL(s))})}},SL=e=>ko(e,$C),FC=e=>ka(e,$C),wL=(e,t)=>FC(t).each(n=>{const s=e.selection.getBookmark();Rs(n),e.selection.moveToBookmark(s)}),xL={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},el=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let a=e.parent;a&&a!==t;a=a.parent)if(r=a[o],r)return r}},kL=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!Po(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},MC=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Qt{constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}static create(t,n){const s=new Qt(t,xL[t]||1);return n&&Je(n,(o,r)=>{s.attr(r,o)}),s}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!ne(t))return ee(t)&&Je(t,(r,a)=>{s.attr(a,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new Qt(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,a=s.length;r<a;r++){const c=s[r];c.name!=="id"&&(o[o.length]={name:c.name,value:c.value},o.map[c.name]=c.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=el(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=el(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let a=r.firstChild;if(MC(r))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||MC(a))return!1}if(a.type===8||a.type===3&&!kL(a)||a.type===3&&a.parent&&n[a.parent.name]&&Po((o=a.value)!==null&&o!==void 0?o:"")||s&&s(a))return!1}while(a=el(a,r));return!0}walk(t){return el(this,null,t)}}const AL=(e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)),UC=(e,t,n=0)=>{const s=e.toLowerCase();if(s.indexOf("[if ",n)!==-1&&AL(s,n)){const o=s.indexOf("[endif]",n);return s.indexOf(">",o)}else if(t){const o=s.indexOf(">",n);return o!==-1?o:s.length}else{const o=/--!?>/g;o.lastIndex=n;const r=o.exec(e);return r?r.index+r[0].length:s.length}},NL=(e,t,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,r=e.getVoidElements();let a=1,c=n;for(;a!==0;)for(s.lastIndex=c;;){const l=s.exec(t);if(l===null)return c;if(l[1]==="!"){Pt(l[2],"--")?c=UC(t,!1,l.index+3):c=UC(t,!0,l.index+1);break}else{o.lastIndex=s.lastIndex;const f=o.exec(t);if(Pn(f)||f.index!==s.lastIndex)continue;l[1]==="/"?a-=1:Se(r,l[2])||(a+=1),c=s.lastIndex+f[0].length;break}}return c},RL=(e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},zC=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=e.schema;let o=RL(e.getTempAttrs(),t);const r=s.getVoidElements();let a;for(;a=n.exec(o);){const c=n.lastIndex,l=a[0].length;let f;r[a[1]]?f=c:f=NL(s,o,c),o=o.substring(0,c-l)+o.substring(f),n.lastIndex=c-l}return Os(o)},TL=zC,HC=e=>{const t=Ut(e,"[data-mce-bogus]");j(t,n=>{hn(n,"data-mce-bogus")==="all"?st(n):To(n)?(bn(n,x.fromText(wr)),st(n)):Rs(n)})},jC=e=>{const t=Ut(e,"input");j(t,n=>{Dt(n,"name")})},OL=(e,t)=>{const n=fn(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},PL=(e,t)=>{const n=e.getDoc(),s=js(x.fromDom(e.getBody())),o=x.fromTag("div",n);kt(o,"data-mce-bogus","all"),rc(o,{position:"fixed",left:"-9999999px",top:"0"}),ic(o,t.innerHTML),HC(o),jC(o);const r=zR(s);Et(r,o);const a=Os(o.dom.innerText);return st(o),a},DL=(e,t,n)=>{let s;return t.format==="raw"?s=q.trim(TL(e.serializer,n.innerHTML)):t.format==="text"?s=PL(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=OL(e,e.serializer.serialize(n,t)),t.format!=="text"&&!pc(x.fromDom(n))&&ne(s)?q.trim(s):s},BL=(e,t)=>y.from(e.getBody()).fold(Z(t.format==="tree"?new Qt("body",11):""),n=>DL(e,t,n)),VC=q.makeMap,WC=e=>{const t=[];e=e||{};const n=e.indent,s=VC(e.indent_before||""),o=VC(e.indent_after||""),r=Gs.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(c,l,f)=>{if(n&&s[c]&&t.length>0){const g=t[t.length-1];g.length>0&&g!==`
`&&t.push(`
`)}if(t.push("<",c),l)for(let g=0,m=l.length;g<m;g++){const h=l[g];t.push(" ",h.name,'="',r(h.value,!0),'"')}if(!f||a?t[t.length]=">":t[t.length]=" />",f&&n&&o[c]&&t.length>0){const g=t[t.length-1];g.length>0&&g!==`
`&&t.push(`
`)}},end:c=>{let l;t.push("</",c,">"),n&&o[c]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(c,l)=>{c.length>0&&(t[t.length]=l?c:r(c))},cdata:c=>{t.push("<![CDATA[",c,"]]>")},comment:c=>{t.push("<!--",c,"-->")},pi:(c,l)=>{l?t.push("<?",c," ",r(l),"?>"):t.push("<?",c,"?>"),n&&t.push(`
`)},doctype:c=>{t.push("<!DOCTYPE",c,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},to=(e={},t=Ys())=>{const n=WC(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,a={3:l=>{var f;n.text((f=l.value)!==null&&f!==void 0?f:"",l.raw)},8:l=>{var f;n.comment((f=l.value)!==null&&f!==void 0?f:"")},7:l=>{n.pi(l.name,l.value)},10:l=>{var f;n.doctype((f=l.value)!==null&&f!==void 0?f:"")},4:l=>{var f;n.cdata((f=l.value)!==null&&f!==void 0?f:"")},11:l=>{let f=l;if(f=f.firstChild)do c(f);while(f=f.next)}};n.reset();const c=l=>{var f;const g=a[l.type];if(g)g(l);else{const m=l.name,h=m in t.getVoidElements();let _=l.attributes;if(r&&_&&_.length>1){const w=[];w.map={};const C=t.getElementRule(l.name);if(C){for(let S=0,N=C.attributesOrder.length;S<N;S++){const k=C.attributesOrder[S];if(k in _.map){const R=_.map[k];w.map[k]=R,w.push({name:k,value:R})}}for(let S=0,N=_.length;S<N;S++){const k=_[S].name;if(!(k in w.map)){const R=_.map[k];w.map[k]=R,w.push({name:k,value:R})}}_=w}}if(n.start(m,_,h),!h){let w=l.firstChild;if(w){(m==="pre"||m==="textarea")&&w.type===3&&((f=w.value)===null||f===void 0?void 0:f[0])===`
`&&n.text(`
`,!0);do c(w);while(w=w.next)}n.end(m)}}};return o.type===1&&!e.inner?c(o):o.type===3?a[3](o):a[11](o),n.getContent()}}},qC=new Set;j(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{qC.add(t)});const KC=["font","text-decoration","text-emphasis"],Td=(e,t)=>un(e.parseStyle(e.getAttrib(t,"style"))),IL=e=>qC.has(e),LL=(e,t)=>Us(Td(e,t),n=>!IL(n)),$L=e=>be(e,t=>mt(KC,n=>Pt(t,n))),FL=(e,t,n)=>{const s=Td(e,t),o=Td(e,n),r=a=>{var c,l;const f=(c=e.getStyle(t,a))!==null&&c!==void 0?c:"",g=(l=e.getStyle(n,a))!==null&&l!==void 0?l:"";return ss(f)&&ss(g)&&f!==g};return mt(s,a=>{const c=l=>mt(l,f=>f===a);if(!c(o)&&c(KC)){const l=$L(o);return mt(l,r)}else return r(a)})},GC=(e,t,n)=>y.from(n.container()).filter(z).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),Od=ae(GC,!0,Ir),Pd=ae(GC,!1,Ir),ML=e=>{const t=e.container();return z(t)&&(t.data.length===0||hc(t.data)&&Za.isBookmarkNode(t.parentNode))},no=(e,t)=>n=>qf(e?0:-1,n).filter(t).isSome(),YC=e=>xb(e)&&as(x.fromDom(e),"display")==="block",XC=e=>Qe(e)&&!dT(e),UL=no(!0,YC),zL=no(!1,YC),ni=no(!0,is),si=no(!1,is),JC=no(!0,Ts),QC=no(!1,Ts),so=no(!0,XC),oo=no(!1,XC),HL=e=>e.slice(0,-1),jL=(e,t,n)=>ks(t,e)?HL(eb(e,s=>n(s)||Fe(s,t))):[],ZC=(e,t)=>jL(e,t,it),Bs=(e,t)=>[e].concat(ZC(e,t)),Dd=(e,t,n)=>xv(e,t,n,ML),eE=(e,t)=>Ct(Bs(x.fromDom(t.container()),e),yn),tE=(e,t,n)=>Dd(e,t.dom,n).forall(s=>eE(t,n).fold(()=>!ls(s,n,t.dom),o=>!ls(s,n,t.dom)&&ks(o,x.fromDom(s.container())))),nE=(e,t,n)=>eE(t,n).fold(()=>Dd(e,t.dom,n).forall(s=>!ls(s,n,t.dom)),s=>Dd(e,s.dom,n).isNone()),Bd=ae(nE,!1),sE=ae(nE,!0),VL=ae(tE,!1),WL=ae(tE,!0),qL=e=>Ic(e).exists(To),tl=(e,t,n)=>{const s=be(Bs(x.fromDom(n.container()),t),yn),o=tn(s).getOr(t);return Cn(e,o.dom,n).filter(qL)},Id=(e,t)=>Ic(t).exists(To)||tl(!0,e,t).isSome(),Ld=(e,t)=>wD(t).exists(To)||tl(!1,e,t).isSome(),KL=ae(tl,!1),GL=ae(tl,!0),oE=e=>L.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),rE=(e,t)=>{const n=be(Bs(x.fromDom(t.container()),e),yn);return tn(n).getOr(e)},aE=(e,t)=>oE(t)?Pd(t):Pd(t)||En(rE(e,t).dom,t).exists(Pd),iE=(e,t)=>oE(t)?Od(t):Od(t)||sn(rE(e,t).dom,t).exists(Od),YL=e=>Ge(["pre","pre-wrap"],e),$d=e=>Ic(e).bind(t=>xo(t,nn)).exists(t=>YL(as(t,"white-space"))),XL=(e,t)=>En(e.dom,t).isNone(),JL=(e,t)=>sn(e.dom,t).isNone(),QL=(e,t)=>XL(e,t)||JL(e,t)||Bd(e,t)||sE(e,t)||Ld(e,t)||Id(e,t),ZL=e=>ee(e)&&Qe(e)&&dv(e),cE=(e,t)=>n=>ZL(new _t(n,e)[t]()),e$=(e,t)=>{const n=sn(e.dom,t).getOr(t),s=cE(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},t$=(e,t)=>{const n=En(e.dom,t).getOr(t),s=cE(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},n$=(e,t)=>$d(t)?!1:QL(e,t)||aE(e,t)||iE(e,t),oi=(e,t)=>$d(t)?!1:Bd(e,t)||VL(e,t)||Ld(e,t)||aE(e,t)||t$(e,t),s$=e=>{const t=e.container(),n=e.offset();return z(t)&&n<t.data.length?L(t,n+1):e},ri=(e,t)=>$d(t)?!1:sE(e,t)||WL(e,t)||Id(e,t)||iE(e,t)||e$(e,t),Fd=(e,t)=>oi(e,t)||ri(e,s$(t)),lE=(e,t)=>Uc(e.charAt(t)),uE=(e,t)=>Ir(e.charAt(t)),o$=e=>{const t=e.container();return z(t)&&Mt(t.data,At)},r$=e=>{const t=e.split("");return Le(t,(n,s)=>Uc(n)&&s>0&&s<t.length-1&&Zf(t[s-1])&&Zf(t[s+1])?" ":n).join("")},fE=(e,t,n)=>{const s=t.data,o=L(t,0);return!n&&lE(s,0)&&!Fd(e,o)?(t.data=" "+s.slice(1),!0):n&&uE(s,0)&&oi(e,o)?(t.data=At+s.slice(1),!0):!1},a$=e=>{const t=e.data,n=r$(t);return n!==t?(e.data=n,!0):!1},dE=(e,t,n)=>{const s=t.data,o=L(t,s.length-1);return!n&&lE(s,s.length-1)&&!Fd(e,o)?(t.data=s.slice(0,-1)+" ",!0):n&&uE(s,s.length-1)&&ri(e,o)?(t.data=s.slice(0,-1)+At,!0):!1},i$=(e,t)=>{const n=t.container();if(!z(n))return y.none();if(o$(t)){const s=fE(e,n,!1)||a$(n)||dE(e,n,!1);return ya(s,t)}else if(Fd(e,t)){const s=fE(e,n,!0)||dE(e,n,!0);return ya(s,t)}else return y.none()},c$=e=>{const t=x.fromDom(e.getBody());e.selection.isCollapsed()&&i$(t,L.fromRangeStart(e.selection.getRng())).each(n=>{e.selection.setRng(n.toRange())})},mE=(e,t,n)=>{if(n===0)return;const s=x.fromDom(e),o=Ns(s,yn).getOr(s),r=e.data.slice(t,t+n),a=t+n>=e.data.length&&ri(o,L(e,e.data.length)),c=t===0&&oi(o,L(e,0));e.replaceData(t,n,Ib(r,4,c,a))},nl=(e,t)=>{const n=e.data.slice(t),s=n.length-QN(n).length;mE(e,t,s)},Md=(e,t)=>{const n=e.data.slice(0,t),s=n.length-bh(n).length;mE(e,t-s,s)},Ud=(e,t,n,s=!0)=>{const o=bh(e.data).length,r=s?e:t,a=s?t:e;return s?r.appendData(a.data):r.insertData(0,a.data),st(x.fromDom(a)),n&&nl(r,o),r},l$=(e,t)=>{const n=e.container(),s=e.offset();return!L.isTextPosition(e)&&n===t.parentNode&&s>L.before(t).offset()},u$=(e,t)=>l$(t,e)?L(t.container(),t.offset()-1):t,f$=e=>z(e)?L(e,0):L.before(e),d$=e=>z(e)?L(e,e.data.length):L.after(e),pE=e=>Dn(e.previousSibling)?y.some(d$(e.previousSibling)):e.previousSibling?ds(e.previousSibling):y.none(),gE=e=>Dn(e.nextSibling)?y.some(f$(e.nextSibling)):e.nextSibling?Jt(e.nextSibling):y.none(),m$=(e,t)=>y.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>En(e,L.before(n))).orThunk(()=>sn(e,L.after(t))),p$=(e,t)=>sn(e,L.after(t)).orThunk(()=>En(e,L.before(t))),g$=(e,t)=>pE(t).orThunk(()=>gE(t)).orThunk(()=>m$(e,t)),h$=(e,t)=>gE(t).orThunk(()=>pE(t)).orThunk(()=>p$(e,t)),b$=(e,t,n)=>e?h$(t,n):g$(t,n),y$=(e,t,n)=>b$(e,t,n).map(ae(u$,n)),hE=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},v$=e=>t=>t.dom===e,C$=(e,t)=>t&&Se(e.schema.getBlockElements(),et(t)),E$=e=>{if(pt(e)){const t=x.fromHtml('<br data-mce-bogus="1">');return _r(e),Et(e,t),y.some(L.before(t.dom))}else return y.none()},_$=(e,t,n)=>{const s=wo(e).filter(gn),o=wa(e).filter(gn);return st(e),gR(s,o,t,(r,a,c)=>{const l=r.dom,f=a.dom,g=l.data.length;return Ud(l,f,n),c.container()===f?L(l,g):c}).orThunk(()=>(n&&(s.each(r=>Md(r.dom,r.dom.length)),o.each(r=>nl(r.dom,0))),t))},S$=(e,t)=>Se(e.schema.getTextInlineElements(),et(t)),Yo=(e,t,n,s=!0)=>{const o=y$(t,e.getBody(),n.dom),r=Ns(n,ae(C$,e),v$(e.getBody())),a=_$(n,o,S$(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):r.bind(E$).fold(()=>{s&&hE(e,t,a)},c=>{s&&hE(e,t,y.some(c))})},w$=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,x$=e=>w$.test(e),Xo=(e,t)=>Mn(x.fromDom(t),uP(e))&&!Do(e.schema,t)&&e.dom.isEditable(t),k$=e=>{var t;return Ve.DOM.getStyle(e,"direction",!0)==="rtl"||x$((t=e.textContent)!==null&&t!==void 0?t:"")},A$=(e,t,n)=>be(Ve.DOM.getParents(n.container(),"*",t),e),ro=(e,t,n)=>{const s=A$(e,t,n);return y.from(s[s.length-1])},N$=(e,t,n)=>{const s=Zs(t,e),o=Zs(n,e);return ee(s)&&s===o},R$=e=>ff(e)||df(e),xn=(e,t)=>{const n=t.container(),s=t.offset();return e?Ks(n)?z(n.nextSibling)?L(n.nextSibling,0):L.after(n):ff(t)?L(n,s+1):t:Ks(n)?z(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):df(t)?L(n,s-1):t},bE=ae(xn,!0),yE=ae(xn,!1),vE=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},T$=e=>{e.execCommand("delete")},zd=e=>vE(e,"Delete"),O$=e=>vE(e,"ForwardDelete"),P$=e=>t=>vr(Un(t),e,Fe),D$=e=>Nb(e)||Ra(e),sl=(e,t)=>ks(e,t)?xo(t,D$,P$(e)):y.none(),Hd=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},B$=(e,t,n)=>Yt(Jt(n),ds(n),(s,o)=>{const r=xn(!0,s),a=xn(!1,o),c=xn(!1,t);return e?sn(n,c).exists(l=>l.isEqual(a)&&t.isEqual(r)):En(n,c).exists(l=>l.isEqual(r)&&t.isEqual(a))}).getOr(!0),CE=e=>(SR(e)?wo(e):ef(e)).bind(CE).orThunk(()=>y.some(e)),EE=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=CE(n).getOr(n),a=x.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(a.dom===e.getBody()?Hd(e,s):pt(a)&&(Oo(a),s&&e.selection.setCursorLocation(a.dom,0)),!Fe(n,a)){const c=vr(Un(a),n)?[]:FR(a);j(c.concat(Bt(n)),l=>{!Fe(l,a)&&!ks(l,a)&&pt(l)&&st(l)})}},I$=e=>t=>Fe(e,t),jd=e=>Ut(e,"td,th"),L$=(e,t)=>{const n=f=>Ja(x.fromDom(f),t),s=n(e.startContainer),o=n(e.endContainer),r=s.isSome(),a=o.isSome(),c=Yt(s,o,Fe).getOr(!1);return{startTable:s,endTable:o,isStartInTable:r,isEndInTable:a,isSameTable:c,isMultiTable:!c&&r&&a}},Vd=(e,t)=>({start:e,end:t}),$$=(e,t,n)=>({rng:e,table:t,cells:n}),ai=cs.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ol=(e,t)=>ko(x.fromDom(e),"td,th",t),_E=e=>!Fe(e.start,e.end),SE=(e,t)=>Ja(e.start,t).bind(n=>Ja(e.end,t).bind(s=>ya(Fe(n,s),n))),F$=(e,t)=>!_E(e)&&SE(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),M$=(e,t)=>{const n=ol(e.startContainer,t),s=ol(e.endContainer,t);return Yt(n,s,Vd)},U$=e=>t=>Ja(t,e).bind(n=>Co(jd(n)).map(s=>Vd(t,s))),z$=e=>t=>Ja(t,e).bind(n=>tn(jd(n)).map(s=>Vd(s,t))),Wd=e=>t=>SE(t,e).map(n=>$$(t,n,jd(n))),wE=(e,t,n,s)=>{if(n.collapsed||!e.forall(_E))return y.none();if(t.isSameTable){const o=e.bind(Wd(s));return y.some({start:o,end:o})}else{const o=ol(n.startContainer,s),r=ol(n.endContainer,s),a=o.bind(U$(s)).bind(Wd(s)),c=r.bind(z$(s)).bind(Wd(s));return y.some({start:a,end:c})}},xE=(e,t)=>da(e,n=>Fe(n,t)),qd=e=>Yt(xE(e.cells,e.rng.start),xE(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),H$=(e,t,n)=>e.exists(s=>F$(s,n)&&sd(s.start,t)),kE=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},j$=(e,t,n,s)=>wE(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,a=qd(o).getOr([]);if(r&&o.cells.length===a.length)return y.some(ai.fullTable(o.table));if(a.length>0){if(r)return y.some(ai.partialTable(a,y.none()));{const c=kE(n,t);return y.some(ai.partialTable(a,y.some({...t,rng:c})))}}else return y.none()}),V$=(e,t,n,s)=>wE(e,t,n,s).bind(({start:o,end:r})=>{const a=o.bind(qd).getOr([]),c=r.bind(qd).getOr([]);if(a.length>0&&c.length>0){const l=kE(n,t);return y.some(ai.multiTable(a,c,l))}else return y.none()}),W$=(e,t)=>{const n=I$(e),s=M$(t,n),o=L$(t,n);return H$(s,t,n)?s.map(r=>ai.singleCellTable(t,r.start)):o.isMultiTable?V$(s,o,t,n):j$(s,o,t,n)},AE=e=>j(e,t=>{Dt(t,"contenteditable"),Oo(t)}),q$=(e,t)=>y.from(e.dom.getParent(t,e.dom.isBlock)).map(x.fromDom),K$=(e,t,n)=>{n.each(s=>{t?st(s):(Oo(s),e.selection.setCursorLocation(s.dom,0))})},Kd=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Gd(e,o,t,!1).each(r=>r())},NE=e=>{const t=Lr(e),n=x.fromDom(e.selection.getNode());fc(n.dom)&&pt(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&mt(t,s=>Fe(s,n))&&kt(n,"data-mce-selected","1")},RE=(e,t,n)=>y.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:a})=>{const c=q$(e,a?r.endContainer:r.startContainer);r.deleteContents(),K$(e,a,c.filter(pt));const l=a?t[0]:t[t.length-1];return Kd(e,l,s,a),pt(l)?y.none():y.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);AE(o),NE(e)}),G$=(e,t,n,s)=>y.some(()=>{const o=e.selection.getRng(),r=t[0],a=n[n.length-1];Kd(e,r,o,!0),Kd(e,a,o,!1);const c=pt(r)?t:t.slice(1),l=pt(a)?n:n.slice(0,-1);AE(c.concat(l)),s.deleteContents(),NE(e)}),Gd=(e,t,n,s=!0)=>y.some(()=>{EE(e,t,n,s)}),Y$=(e,t)=>y.some(()=>Yo(e,!1,t)),X$=(e,t,n)=>W$(t,n).bind(s=>s.fold(ae(Gd,e),ae(Y$,e),ae(RE,e),ae(G$,e))),J$=(e,t)=>rl(e,t),Q$=(e,t,n,s)=>Yd(t,s).fold(()=>X$(e,t,n),o=>J$(e,o)),Z$=(e,t,n)=>{const s=x.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?RE(e,n,y.none()):Q$(e,s,o,t)},TE=(e,t)=>Ct(Bs(t,e),Ta),Yd=(e,t)=>Ct(Bs(t,e),Yu("caption")),eF=(e,t,n,s,o)=>Fc(n,e.getBody(),o).bind(r=>TE(t,x.fromDom(r.getNode())).bind(a=>Fe(a,s)?y.none():y.some(Ae))),rl=(e,t)=>y.some(()=>{Oo(t),e.selection.setCursorLocation(t.dom,0)}),tF=(e,t,n,s)=>Jt(e.dom).bind(o=>ds(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),nF=(e,t)=>rl(e,t),sF=(e,t,n)=>Yd(e,x.fromDom(n.getNode())).fold(()=>y.some(Ae),s=>ya(!Fe(s,t),Ae)),oF=(e,t,n,s,o)=>Fc(n,e.getBody(),o).fold(()=>y.some(Ae),r=>tF(s,n,o,r)?nF(e,s):sF(t,s,r)),rF=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return TE(n,s).bind(r=>pt(r)?rl(e,r):eF(e,n,t,r,o))},aF=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return pt(s)?rl(e,s):oF(e,n,t,s,o)},OE=(e,t)=>e?JC(t):QC(t),iF=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return OE(t,n)||Cn(t,e.getBody(),n).exists(s=>OE(t,s))},cF=(e,t,n)=>{const s=x.fromDom(e.getBody());return Yd(s,n).fold(()=>rF(e,t,s,n).orThunk(()=>ya(iF(e,t),Ae)),o=>aF(e,t,s,o))},Xd=(e,t)=>{const n=x.fromDom(e.selection.getStart(!0)),s=Lr(e);return e.selection.isCollapsed()&&s.length===0?cF(e,t,n):Z$(e,n,s)},Jo=(e,t)=>{let n=t;for(;n&&n!==e;){if(Hn(n)||Qe(n))return n;n=n.parentNode}return null},lF=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],uF=q.each,Jd=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,a)=>{if(r.nodeName!==a.nodeName||r.nodeType!==a.nodeType)return!1;const c=f=>{const g={};return uF(t.getAttribs(f),m=>{const h=m.nodeName.toLowerCase();h!=="style"&&!o(h)&&(g[h]=t.getAttrib(f,h))}),g},l=(f,g)=>{for(const m in f)if(Se(f,m)){const h=g[m];if(Kt(h)||f[m]!==h)return!1;delete g[m]}for(const m in g)if(Se(g,m))return!1;return!0};return te(r)&&te(a)&&(!l(c(r),c(a))||!l(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(a,"style"))))?!1:!_n(r)&&!_n(a)},o=r=>mt(lF,a=>Pt(r,a))||n.has(r);return{compare:s,isAttributeInternal:o}},fF=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},PE=(e,t,n,s)=>{const o=n.name;for(let r=0,a=e.length;r<a;r++){const c=e[r];if(c.name===o){const l=s.nodes[o];l?l.nodes.push(n):s.nodes[o]={filter:c,nodes:[n]}}}if(n.attributes)for(let r=0,a=t.length;r<a;r++){const c=t[r],l=c.name;if(l in n.attributes.map){const f=s.attributes[l];f?f.nodes.push(n):s.attributes[l]={filter:c,nodes:[n]}}}},dF=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&fF(n,o=>{PE(e,t,o,s)}),s},DE=(e,t)=>{const n=(s,o)=>{Je(s,r=>{const a=ln(r.nodes);j(r.filter.callbacks,c=>{for(let l=a.length-1;l>=0;l--){const f=a[l];(!(o?f.attr(r.filter.name)!==void 0:f.name===r.filter.name)||bt(f.parent))&&a.splice(l,1)}a.length>0&&c(a,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},BE=(e,t,n,s={})=>{const o=dF(e,t,n);DE(o,s)},Qd=(e,t,n)=>{if(e.insert&&t(n)){const s=new Qt("br",1);s.attr("data-mce-bogus","1"),n.empty().append(s)}else n.empty().append(new Qt("#text",3)).value=At},mF=e=>{var t;return IE(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===At},IE=(e,t)=>{const n=e==null?void 0:e.firstChild;return ee(n)&&n===e.lastChild&&n.name===t},pF=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},ii=(e,t,n,s)=>s.isEmpty(t,n,o=>pF(e,o)),gF=(e,t)=>ee(e)&&(t(e)||e.name==="br"),hF=e=>{let t;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return y.from(t)},Zd=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&Zd(o,t,n);e.unwrap()}},em=(e,t,n,s=Ae)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),c=q.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,f=g=>g!==n&&!c[g.name];for(let g=0;g<e.length;g++){const m=e[g];let h,_,w;if(!m.parent||l.has(m))continue;if(o[m.name]&&m.parent.name==="li"){let S=m.next;for(;S&&o[S.name];){S.name="li",l.add(S),m.parent.insert(S,m.parent);S=S.next}m.unwrap();continue}const C=[m];for(h=m.parent;h&&!t.isValidChild(h.name,m.name)&&f(h);h=h.parent)C.push(h);if(h&&C.length>1)if(t.isValidChild(h.name,m.name)){C.reverse(),_=C[0].clone(),s(_);let S=_;for(let N=0;N<C.length-1;N++){t.isValidChild(S.name,C[N].name)&&N>0?(w=C[N].clone(),s(w),S.append(w)):w=S;for(let k=C[N].firstChild;k&&k!==C[N+1];){const R=k.next;w.append(k),k=R}S=w}ii(t,r,a,_)?h.insert(m,C[0],!0):(h.insert(_,C[0],!0),h.insert(m,_)),h=C[0],(ii(t,r,a,h)||IE(h,"br"))&&h.empty().remove()}else Zd(m,t);else if(m.parent){if(m.name==="li"){let S=m.prev;if(S&&(S.name==="ul"||S.name==="ol")){S.append(m);continue}if(S=m.next,S&&(S.name==="ul"||S.name==="ol")&&S.firstChild){S.insert(m,S.firstChild,!0);continue}const N=new Qt("ul",1);s(N),m.wrap(N);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){const S=new Qt("div",1);s(S),m.wrap(S)}else Zd(m,t)}}},bF=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},LE=(e,t,n=t.parent)=>n&&e.children[t.name]&&!e.isValidChild(n.name,t.name)?!0:!!(n&&t.name==="a"&&bF(n,"a")),yF=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},vF=e=>{const t=L.fromRangeStart(e),n=L.fromRangeEnd(e),s=e.commonAncestorContainer;return Cn(!1,s,n).map(o=>!ls(t,n,s)&&ls(t,o,s)?yF(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},tm=e=>e.collapsed?e:vF(e),CF=e=>ee(e.firstChild)&&e.firstChild===e.lastChild,EF=e=>e.name==="br"||e.value===At,_F=(e,t)=>e.getBlockElements()[t.name]&&CF(t)&&EF(t.firstChild),SF=(e,t)=>{const n=e.getNonEmptyElements();return ee(t)&&(t.isEmpty(n)||_F(e,t))},wF=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),SF(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},xF=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},kF=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return xF(o)},AF=e=>{var t;return be((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},NF=e=>e.data===At||ut(e),RF=e=>ee(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&NF(e.firstChild),TF=e=>!e.firstChild||RF(e),OF=e=>e.length>0&&TF(e[e.length-1])?e.slice(0,-1):e,nm=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},PF=(e,t)=>!!nm(e,t),DF=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},BF=(e,t)=>{const n=L.before(e),o=fs(t).next(n);return o?o.toRange():null},$E=(e,t)=>{const n=L.after(e),o=fs(t).prev(n);return o?o.toRange():null},IF=(e,t,n,s)=>{const o=DF(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),q.each(t,a=>{r.insertBefore(a,e)}),r.insertBefore(o[1],e),r.removeChild(e)),$E(t[t.length-1],n)},LF=(e,t,n)=>{const s=e.parentNode;return s&&q.each(t,o=>{s.insertBefore(o,e)}),BF(e,n)},$F=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),$E(t[0],n)),FF=(e,t,n,s)=>{const o=kF(t,e,s),r=nm(t,n.startContainer),a=OF(AF(o.firstChild)),c=1,l=2,f=t.getRoot(),g=m=>{const h=L.fromRangeStart(n),_=fs(t.getRoot()),w=m===c?_.prev(h):_.next(h),C=w==null?void 0:w.getNode();return C?nm(t,C)!==r:!0};return r?g(c)?LF(r,a,f):g(l)?$F(r,a,f,t):IF(r,a,f,n):null},MF=["pre"],UF=(e,t,n,s)=>{var o;const r=t.firstChild,a=t.lastChild,c=a.attr("data-mce-type")==="bookmark"?a.prev:a,l=r===c,f=Ge(MF,r.name);if(l&&f){const g=r.attr("contenteditable")!=="false",m=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,h=y.from(Jo(s,n)).forall(Hn);return g&&m&&h}else return!1},sm=fc,zF=(e,t,n)=>{if(ee(n)){const s=e.getParent(t.endContainer,sm);return n===s&&sd(x.fromDom(n),t)}else return!1},HF=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},jF=(e,t)=>{y.from(e.getParent(t,"td,th")).map(x.fromDom).each(BT)},VF=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=Jd(e);q.each(s.select("*[data-mce-fragment]"),a=>{if(ee(n[a.nodeName.toLowerCase()])&&LL(s,a)){for(let l=a.parentElement;ee(l)&&l!==o&&!FL(s,a,l);l=l.parentElement)if(r.compare(l,a)){s.remove(a,!0);break}}})}},WF=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},qF=e=>{q.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},KF=e=>!!e.getAttribute("data-mce-fragment"),GF=(e,t)=>ee(t)&&!e.schema.getVoidElements()[t.nodeName],YF=(e,t)=>{var n,s,o;let r;const a=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const l=Jo(e.getBody(),t);if(l&&a.getContentEditable(l)==="false"){a.remove(t),c.select(l);return}let f=a.createRng();const g=t.previousSibling;if(z(g)){f.setStart(g,(s=(n=g.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const _=t.nextSibling;z(_)&&(g.appendData(_.data),(o=_.parentNode)===null||o===void 0||o.removeChild(_))}else f.setStartBefore(t),f.setEndBefore(t);const m=_=>{let w=L.fromRangeStart(_);return w=fs(e.getBody()).next(w),w==null?void 0:w.toRange()},h=a.getParent(t,a.isBlock);a.remove(t),h&&a.isEmpty(h)&&(_r(x.fromDom(h)),f.setStart(h,0),f.setEnd(h,0),!sm(h)&&!KF(h)&&(r=m(f))?(f=r,a.remove(h)):a.add(h,a.create("br",{"data-mce-bogus":"1"}))),c.setRng(f)},XF=e=>{const t=e.dom,n=tm(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,sm);zF(t,n,s)?Gd(e,n,x.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&z(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},JF=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return y.some(t);return y.none()},QF=(e,t,n)=>{var s,o;const r=e.selection,a=e.dom,c=e.parser,l=n.merge,f=to({validate:!0},e.schema),g='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,g);let m=r.getRng();const h=m.startContainer,_=e.getBody();h===_&&r.isCollapsed()&&a.isBlock(_.firstChild)&&GF(e,_.firstChild)&&a.isEmpty(_.firstChild)&&(m=a.createRng(),m.setStart(_.firstChild,0),m.setEnd(_.firstChild,0),r.setRng(m)),r.isCollapsed()||XF(e);const w=r.getNode(),C={context:w.nodeName.toLowerCase(),data:n.data,insert:!0},S=c.parse(t,C);if(n.paste===!0&&wF(e.schema,S)&&PF(a,w))return m=FF(f,a,r.getRng(),S),m&&r.setRng(m),t;n.paste===!0&&UF(a,S,w,e.getBody())&&((s=S.firstChild)===null||s===void 0||s.unwrap()),WF(S);let N=S.lastChild;if(N&&N.attr("id")==="mce_marker"){const k=N;for(N=N.prev;N;N=N.walk(!0))if(N.type===3||!a.isBlock(N.name)){N.parent&&e.schema.isValidChild(N.parent.name,"span")&&N.parent.insert(k,N,N.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(w),!C.invalid)t=f.serialize(S),HF(e,t,w);else{e.selection.setContent(g);let k=r.getNode(),R;const T=e.getBody();for(Na(k)?k=R=T:R=k;R&&R!==T;)k=R,R=R.parentNode;t=k===T?T.innerHTML:a.getOuterHTML(k);const F=c.parse(t),G=JF(F),W=G.bind(hF).getOr(F);G.each(ce=>ce.replace(S));const B=S.children(),D=(o=S.parent)!==null&&o!==void 0?o:F;S.unwrap();const Q=be(B,ce=>LE(e.schema,ce,D));em(Q,e.schema,W),BE(c.getNodeFilters(),c.getAttributeFilters(),F),t=f.serialize(F),k===T?a.setHTML(T,t):a.setOuterHTML(k,t)}return VF(e,l),YF(e,a.get("mce_marker")),qF(e.getBody()),jF(a,r.getStart()),u1(e.schema,e.getBody(),r.getStart()),t},al=e=>e instanceof Qt,ZF=e=>{Go(e)&&Jt(e.getBody()).each(t=>{const n=t.getNode(),s=Ts(n)?Jt(n).getOr(t):t;e.selection.setRng(s.toRange())})},om=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&ZF(e)},eM=(e,t,n,s)=>{if(n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=fn(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,ja(e),n)):n||(n=o),om(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=to({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=pc(x.fromDom(t))?n:q.trim(n);return om(e,o,s.no_selection),{content:o,html:o}}},tM=(e,t,n,s)=>{BE(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=to({validate:!1},e.schema).serialize(n),r=pc(x.fromDom(t))?o:q.trim(o);return om(e,r,s.no_selection),{content:n,html:r}},nM=(e,t,n)=>y.from(e.getBody()).map(s=>al(t)?tM(e,s,t,n):eM(e,s,t,n)).getOr({content:t,html:al(n.content)?"":n.content}),sM=(e,t,n)=>Ns(e,t,n).isSome(),oM=(e,t)=>WR(e,t).isSome(),FE=e=>$e(e)?e:it,rM=(e,t,n)=>{let s=e.dom;const o=FE(n);for(;s.parentNode;){s=s.parentNode;const r=x.fromDom(s),a=t(r);if(a.isSome())return a;if(o(r))break}return y.none()},rm=(e,t,n)=>{const s=t(e),o=FE(n);return s.orThunk(()=>o(e)?y.none():rM(e,t,o))},am=ld,ME=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Sn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},im=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const a=e.dom.getParent(t,c=>ME(e,c,n)?!0:c.parentNode===r||!!ps(e,c,n,s,!0));return!!ps(e,a,n,s,o)},il=(e,t,n)=>St(n)&&am(t,n.inline)||ms(n)&&am(t,n.block)?!0:Sn(n)?te(t)&&e.is(t,n.selector):!1,UE=(e,t,n,s,o,r)=>{const a=n[s],c=s==="attributes";if($e(n.onmatch))return n.onmatch(t,n,s);if(a){if(uh(a)){for(let l=0;l<a.length;l++)if(c?e.getAttrib(t,a[l]):Vc(e,t,a[l]))return!0}else for(const l in a)if(Se(a,l)){const f=c?e.getAttrib(t,l):Vc(e,t,l),g=eo(a[l],r),m=bt(f)||ba(f);if(m&&bt(g))continue;if(o&&m&&!n.exact||(!o||n.exact)&&!am(f,ud(g,l)))return!1}}return!0},ps=(e,t,n,s,o)=>{const r=e.formatter.get(n),a=e.dom;if(r&&te(t))for(let c=0;c<r.length;c++){const l=r[c];if(il(e.dom,t,l)&&UE(a,t,l,"attributes",o,s)&&UE(a,t,l,"styles",o,s)){const f=l.classes;if(f){for(let g=0;g<f.length;g++)if(!e.dom.hasClass(t,eo(f[g],s)))return}return l}}},cm=(e,t,n,s,o)=>{if(s)return im(e,s,t,n,o);if(s=e.selection.getNode(),im(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&im(e,r,t,n,o))},aM=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,a=>{for(let c=0;c<t.length;c++){const l=t[c];!o[l]&&ps(e,a,l,n)&&(o[l]=!0,s.push(l))}},e.dom.getRoot()),s},iM=(e,t)=>{const n=o=>Fe(o,x.fromDom(e.getBody())),s=(o,r)=>ps(e,o.dom,r)?y.some(r):y.none();return y.from(e.selection.getStart(!0)).bind(o=>rm(x.fromDom(o),r=>hr(t,a=>s(r,a)),n)).getOrNull()},cM=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n){const o=e.selection.getStart(),r=Wc(s,o);for(let a=n.length-1;a>=0;a--){const c=n[a];if(!Sn(c))return!0;for(let l=r.length-1;l>=0;l--)if(s.is(r[l],c.selector))return!0}}return!1},lM=(e,t,n)=>cn(n,(s,o)=>{const r=iB(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),zr=It,uM=(e,t)=>e.importNode(t,!0),fM=e=>{const t=[];let n=e;for(;n;){if(z(n)&&n.data!==zr||n.childNodes.length>1)return[];te(n)&&t.push(n),n=n.firstChild}return t},zE=e=>fM(e).length>0,HE=e=>{if(e){const t=new _t(e,e);for(let n=t.current();n;n=t.next())if(z(n))return n}return null},lm=e=>{const t=x.fromTag("span");return Hs(t,{id:Jf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Et(t,x.fromText(zr)),t},dM=e=>{const t=HE(e);return t&&t.data.charAt(0)===zr&&t.deleteData(0,1),t},um=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(zE(t))Yo(e,!1,x.fromDom(t),n);else{const r=o.getRng(),a=s.getParent(t,s.isBlock),c=r.startContainer,l=r.startOffset,f=r.endContainer,g=r.endOffset,m=dM(t);s.remove(t,!0),c===m&&l>0&&r.setStart(m,l-1),f===m&&g>0&&r.setEnd(m,g-1),a&&s.isEmpty(a)&&Oo(x.fromDom(a)),o.setRng(r)}},fm=(e,t,n=!0)=>{const s=e.dom,o=e.selection;if(t)um(e,t,n);else if(t=jo(e.getBody(),o.getStart()),!t)for(;t=s.get(Jf);)um(e,t,!1)},mM=(e,t,n)=>{var s,o;const r=e.dom,a=r.getParent(n,ae(id,e.schema));a&&r.isEmpty(a)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(DT(x.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},jE=(e,t)=>(e.appendChild(t),t),VE=(e,t)=>{var n;const s=fa(e,(r,a)=>jE(r,a.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return jE(s,o.createTextNode(zr))},pM=(e,t,n,s,o,r)=>{const a=e.formatter,c=e.dom,l=be(un(a.get()),m=>m!==s&&!Mt(m,"removeformat")),f=lM(e,n,l);if(be(f,m=>!cB(e,m,s)).length>0){const m=n.cloneNode(!1);return c.add(t,m),a.remove(s,o,m,r),c.remove(m),y.some(m)}else return y.none()},gM=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const a=o.getRng();let c=a.startOffset;const f=a.startContainer.nodeValue;s=jo(e.getBody(),o.getStart());const g=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(f&&c>0&&c<f.length&&g.test(f.charAt(c))&&g.test(f.charAt(c-1))){const m=o.getBookmark();a.collapse(!0);let h=Wo(e.dom,a,r);h=Qc(h),e.formatter.apply(t,n,h),o.moveToBookmark(m)}else{let m=s?HE(s):null;(!s||(m==null?void 0:m.data)!==zr)&&(s=uM(e.getDoc(),lm(!0).dom),m=s.firstChild,a.insertNode(s),c=1),e.formatter.apply(t,n,s),o.setCursorLocation(m,c)}},hM=(e,t,n,s)=>{const o=e.dom,r=e.selection;let a=!1;const c=e.formatter.get(t);if(!c)return;const l=r.getRng(),f=l.startContainer,g=l.startOffset;let m=f;z(f)&&(g!==f.data.length&&(a=!0),m=m.parentNode);const h=[];let _;for(;m;){if(ps(e,m,t,n,s)){_=m;break}m.nextSibling&&(a=!0),h.push(m),m=m.parentNode}if(_)if(a){const w=r.getBookmark();l.collapse(!0);let C=Wo(o,l,c,!0);C=Qc(C),e.formatter.remove(t,n,C,s),r.moveToBookmark(w)}else{const w=jo(e.getBody(),_),C=lm(!1).dom;mM(e,C,w??_);const S=pM(e,C,_,t,n,s),N=VE(h.concat(S.toArray()),C);w&&um(e,w,!1),r.setCursorLocation(N,1),o.isEmpty(_)&&o.remove(_)}},bM=(e,t)=>{const n=e.selection,s=e.getBody();fm(e,null,!1),(t===8||t===46)&&n.isCollapsed()&&n.getStart().innerHTML===zr&&fm(e,jo(s,n.getStart())),(t===37||t===39)&&fm(e,jo(s,n.getStart()))},yM=e=>{e.on("mouseup keydown",t=>{bM(e,t.keyCode)})},WE=e=>{const t=lm(!1),n=VE(e,t.dom);return{caretContainer:t,caretPosition:L(n,0)}},qE=(e,t)=>{const{caretContainer:n,caretPosition:s}=WE(t);return bn(x.fromDom(e),n),st(x.fromDom(e)),s},vM=(e,t)=>{const{caretContainer:n,caretPosition:s}=WE(t);return e.selection.getRng().insertNode(n.dom),s},KE=(e,t)=>{const n=e.schema.getTextInlineElements();return Se(n,et(t))&&!Bn(t.dom)&&!Ro(t.dom)},GE=e=>Bn(e.dom)&&zE(e.dom),ci={},YE=zn(["pre"]),CM=(e,t)=>{ci[e]||(ci[e]=[]),ci[e].push(t)},EM=(e,t)=>{Se(ci,e)&&j(ci[e],n=>{n(t)})};CM("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const a=r.previousSibling;return YE(a)&&Ge(o,a)},s=(o,r)=>{const a=x.fromDom(r),c=As(a).dom;st(a),Ao(x.fromDom(o),[x.fromTag("br",c),x.fromTag("br",c),...Bt(a)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=be(be(o,YE),n(o));j(r,a=>{s(a.previousSibling,a)})}});const XE=["fontWeight","fontStyle","color","fontSize","fontFamily"],_M=e=>Xe(e.styles)&&mt(un(e.styles),t=>Ge(XE,t)),SM=e=>Ct(e,t=>St(t)&&t.inline==="span"&&_M(t)),JE=(e,t)=>{const n=e.get(t);return at(n)?SM(n):y.none()},QE=(e,t)=>En(t,L.fromRangeStart(e)).isNone(),ZE=(e,t)=>sn(t,L.fromRangeEnd(e)).exists(n=>!ut(n.getNode())||sn(t,n).isSome())===!1,e_=e=>t=>hT(t)&&e.isEditable(t),wM=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return QE(n,t[0])&&ZE(n,t[0])?t:[];{const s=tn(t).filter(a=>QE(n,a)).toArray(),o=Co(t).filter(a=>ZE(n,a)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},xM=e=>be(wM(e),e_(e.dom)),t_=e=>be(e.getSelectedBlocks(),e_(e.dom)),dm=q.each,mm=e=>te(e)&&!_n(e)&&!Bn(e)&&!Ro(e),n_=(e,t)=>{for(let n=e;n;n=n[t]){if(z(n)&&ss(n.data))return e;if(te(n)&&!_n(n))return n}return e},s_=(e,t,n)=>{const s=Jd(e),o=te(t)&&Vo(t),r=te(n)&&Vo(n);if(o&&r){const a=n_(t,"previousSibling"),c=n_(n,"nextSibling");if(s.compare(a,c)){for(let l=a.nextSibling;l&&l!==c;){const f=l;l=l.nextSibling,a.appendChild(f)}return e.dom.remove(c),q.each(q.grep(c.childNodes),l=>{a.appendChild(l)}),a}}return n},o_=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=s_(e,Fv(s),s))!==null&&o!==void 0?o:s;s_(e,r,Fv(r,!0))}},kM=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";dm(e.select(s,n),o=>{mm(o)&&Vo(o)&&dm(t.styles,(r,a)=>{e.setStyle(o,a,"")})})}},pm=(e,t,n)=>{dm(e.childNodes,s=>{mm(s)&&(t(s)&&n(s),s.hasChildNodes()&&pm(s,t,n))})},AM=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},r_=(e,t)=>n=>!!(n&&Vc(e,n,t)),a_=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),AM(e,s)},Qo=cs.generate([{keep:[]},{rename:["name"]},{removed:[]}]),NM=/^(src|href|style)$/,gm=q.each,cl=ld,RM=e=>/^(TR|TH|TD)$/.test(e.nodeName),i_=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),c_=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(te(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return z(s)&&n&&o>=s.data.length&&(s=new _t(s,e.getBody()).next()||s),z(s)&&!n&&o===0&&(s=new _t(s,e.getBody()).prev()||s),s},l_=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return RM(e)&&s?e.nodeName==="TR"&&s[n]||s:e},hm=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},u_=(e,t,n,s,o)=>{const r=x.fromDom(t),a=x.fromDom(e.create(s,o)),c=n?nb(r):tb(r);return Ao(a,c),n?(bn(r,a),db(a,r)):(Vs(r,a),Et(a,r)),a.dom},TM=(e,t)=>t.links&&e.nodeName==="A",f_=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,a=fn(e);ms(n)&&s===r.getRoot()&&(!n.list_block||!cl(t,n.list_block))&&j(ln(t.childNodes),c=>{$r(e,a,c.nodeName.toLowerCase())?o?o.appendChild(c):(o=hm(r,c,a),r.setAttribs(o,ja(e))):o=null}),!(fB(n)&&!cl(n.inline,t))&&r.remove(t,!0)},d_=(e,t,n)=>Fn(e)?{name:t,value:null}:{name:e,value:eo(t,n)},m_=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},p_=(e,t,n,s,o)=>{let r=!1;gm(n.styles,(a,c)=>{const{name:l,value:f}=d_(c,a,s),g=ud(f,l);(n.remove_similar||Pn(f)||!te(o)||cl(Vc(e,o,l),g))&&e.setStyle(t,l,""),r=!0}),r&&m_(e,t)},OM=(e,t,n)=>{t==="removeformat"?j(t_(e.selection),s=>{j(XE,o=>e.dom.setStyle(s,o,"")),m_(e.dom,s)}):JE(e.formatter,t).each(s=>{j(t_(e.selection),o=>p_(e.dom,o,s,n,null))})},g_=(e,t,n,s,o)=>{const r=e.dom,a=Jd(e),c=e.schema;if(St(t)&&Cc(c,t.inline)&&Do(c,s)&&s.parentElement===e.getBody())return f_(e,s,t),Qo.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!il(r,s,t)&&!TM(s,t))return Qo.keep();const l=s,f=t.preserve_attributes;if(St(t)&&t.remove==="all"&&at(f)){const g=be(r.getAttribs(l),m=>Ge(f,m.name.toLowerCase()));if(r.removeAllAttribs(l),j(g,m=>r.setAttrib(l,m.name,m.value)),g.length>0)return Qo.rename("span")}if(t.remove!=="all"){p_(r,l,t,n,o),gm(t.attributes,(m,h)=>{const{name:_,value:w}=d_(h,m,n);if(t.remove_similar||Pn(w)||!te(o)||cl(r.getAttrib(o,_),w)){if(_==="class"){const C=r.getAttrib(l,_);if(C){let S="";if(j(C.split(/\s+/),N=>{/mce\-\w+/.test(N)&&(S+=(S?" ":"")+N)}),S){r.setAttrib(l,_,S);return}}}if(NM.test(_)&&l.removeAttribute("data-mce-"+_),_==="style"&&zn(["li"])(l)&&r.getStyle(l,"list-style-type")==="none"){l.removeAttribute(_),r.setStyle(l,"list-style-type","none");return}_==="class"&&l.removeAttribute("className"),l.removeAttribute(_)}}),gm(t.classes,m=>{m=eo(m,n),(!te(o)||r.hasClass(o,m))&&r.removeClass(l,m)});const g=r.getAttribs(l);for(let m=0;m<g.length;m++){const h=g[m].nodeName;if(!a.isAttributeInternal(h))return Qo.keep()}}return t.remove!=="none"?(f_(e,l,t),Qo.removed()):Qo.keep()},li=(e,t,n,s,o)=>g_(e,t,n,s,o).fold(it,r=>(e.dom.rename(s,r),!0),yt),PM=(e,t,n,s,o)=>{let r;return t.parentNode&&j(Wc(e.dom,t.parentNode).reverse(),a=>{if(!r&&te(a)&&a.id!=="_start"&&a.id!=="_end"){const c=ps(e,a,n,s,o);c&&c.split!==!1&&(r=a)}}),r},DM=(e,t,n,s)=>g_(e,t,n,s,s).fold(Z(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),Z(null)),BM=(e,t,n,s,o,r,a,c)=>{var l,f;let g,m;const h=e.dom;if(n){const _=n.parentNode;for(let w=s.parentNode;w&&w!==_;w=w.parentNode){let C=h.clone(w,!1);for(let S=0;S<t.length&&(C=DM(e,t[S],c,C),C!==null);S++);C&&(g&&C.appendChild(g),m||(m=C),g=C)}r&&(!a.mixed||!h.isBlock(n))&&(s=(l=h.split(n,s))!==null&&l!==void 0?l:s),g&&m&&((f=o.parentNode)===null||f===void 0||f.insertBefore(g,o),m.appendChild(o),St(a)&&o_(e,a,c,g))}return s},h_=(e,t,n,s,o)=>{const r=e.formatter.get(t),a=r[0],c=e.dom,l=e.selection,f=C=>{const S=PM(e,C,t,n,o);return BM(e,r,S,C,C,!0,a,n)},g=C=>_n(C)&&te(C)&&(C.id==="_start"||C.id==="_end"),m=C=>mt(r,S=>li(e,S,n,C,C)),h=C=>{const S=ln(C.childNodes),k=m(C)||mt(r,F=>il(c,C,F)),R=C.parentNode;if(!k&&ee(R)&&dd(a)&&m(R),a.deep&&S.length)for(let F=0;F<S.length;F++)h(S[F]);j(["underline","line-through","overline"],F=>{te(C)&&e.dom.getStyle(C,"text-decoration")===F&&C.parentNode&&Uv(c,C.parentNode)===F&&li(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:F}},void 0,C)})},_=C=>{const S=c.get(C?"_start":"_end");if(S){let N=S[C?"firstChild":"lastChild"];return g(N)&&(N=N[C?"firstChild":"lastChild"]),z(N)&&N.data.length===0&&(N=C?S.previousSibling||S.nextSibling:S.nextSibling||S.previousSibling),c.remove(S,!0),N}else return null},w=C=>{let S,N,k=Wo(c,C,r,C.collapsed);if(a.split){if(k=Qc(k),S=c_(e,k,!0),N=c_(e,k),S!==N){if(S=l_(S,!0),N=l_(N,!1),i_(c,S,N)){const T=y.from(S.firstChild).getOr(S);f(u_(c,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),_(!0);return}if(i_(c,N,S)){const T=y.from(N.lastChild).getOr(N);f(u_(c,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),_(!1);return}S=hm(c,S,"span",{id:"_start","data-mce-type":"bookmark"}),N=hm(c,N,"span",{id:"_end","data-mce-type":"bookmark"});const R=c.createRng();R.setStartAfter(S),R.setEndBefore(N),Qa(c,R,T=>{j(T,F=>{!_n(F)&&!_n(F.parentNode)&&f(F)})}),f(S),f(N),S=_(!0),N=_()}else S=N=f(S);k.startContainer=S.parentNode?S.parentNode:S,k.startOffset=c.nodeIndex(S),k.endContainer=N.parentNode?N.parentNode:N,k.endOffset=c.nodeIndex(N)+1}Qa(c,k,R=>{j(R,h)})};if(s){if(jc(s)){const C=c.createRng();C.setStartBefore(s),C.setEndAfter(s),w(C)}else w(s);nC(e,t,s,n);return}!l.isCollapsed()||!St(a)||Lr(e).length?($v(e,()=>rd(e,w),C=>St(a)&&cm(e,t,n,C)),e.nodeChanged()):hM(e,t,n,o),OM(e,t,n),nC(e,t,s,n)},b_=q.each,IM=(e,t,n,s)=>{const o=r=>{if(te(r)&&te(r.parentNode)&&Vo(r)){const a=Uv(e,r.parentNode);e.getStyle(r,"color")&&a?e.setStyle(r,"text-decoration",a):e.getStyle(r,"text-decoration")===a&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(q.walk(s,o,"childNodes"),o(s))},LM=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=r_(e,"fontSize");pm(s,r=>o(r)&&Vo(r),a_(e,"backgroundColor",eo(t.styles.backgroundColor,n)))}},$M=(e,t,n,s)=>{if(St(t)&&(t.inline==="sub"||t.inline==="sup")){const o=r_(e,"fontSize");pm(s,a=>o(a)&&Vo(a),a_(e,"fontSize",""));const r=be(e.select(t.inline==="sup"?"sub":"sup",s),Vo);e.remove(r,!0)}},FM=(e,t,n,s)=>{b_(t,o=>{St(o)&&b_(e.dom.select(o.inline,s),r=>{mm(r)&&li(e,o,n,r,o.exact?r:null)}),kM(e.dom,o,s)})},MM=(e,t,n,s,o)=>{const r=o.parentNode;ps(e,r,n,s)&&li(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,a=>ps(e,a,n,s)?(li(e,t,s,o),!0):!1)},ll=q.each,UM=(e,t,n,s)=>{if(yP(e)&&St(t)&&n.parentNode){const o=Jb(e.schema),r=oM(x.fromDom(n),a=>Bn(a.dom));return br(o,s)&&pt(x.fromDom(n.parentNode),!1)&&!r}else return!1},y_=(e,t,n,s)=>{if(ll(n.styles,(o,r)=>{e.setStyle(t,r,eo(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},v_=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],a=!s&&e.selection.isCollapsed(),c=e.dom,l=e.selection,f=(w,C=r)=>{$e(C.onformat)&&C.onformat(w,C,n,s),y_(c,w,C,n),ll(C.attributes,(S,N)=>{c.setAttrib(w,N,eo(S,n))}),ll(C.classes,S=>{const N=eo(S,n);c.hasClass(w,N)||c.addClass(w,N)})},g=(w,C)=>{let S=!1;return ll(w,N=>Sn(N)?c.getContentEditable(C)==="false"&&!N.ceFalseOverride||ee(N.collapsed)&&N.collapsed!==a?!0:c.is(C,N.selector)&&!Bn(C)?(f(C,N),S=!0,!1):!0:!1),S},m=w=>{if(ne(w)){const C=c.create(w);return f(C),C}else return null},h=(w,C,S)=>{const N=[];let k=!0;const R=r.inline||r.block,T=m(R),F=B=>lB(r)&&ps(e,B,t,n),G=(B,D,Q)=>{const ce=uB(r)&&id(e.schema,B)&&$r(e,D,R);return Q&&ce},W=(B,D,Q,ce)=>{const de=B.nodeName.toLowerCase(),ye=$r(e,R,de)&&$r(e,D,R),ke=!S&&z(B)&&hc(B.data),De=Bn(B),Ue=!St(r)||!w.isBlock(B);return(Q||ce)&&ye&&!ke&&!De&&Ue};Qa(w,C,B=>{let D;const Q=ce=>{let de=!1,ye=k,ke=!1;const De=ce.parentNode,Ue=De.nodeName.toLowerCase(),nt=w.getContentEditable(ce);ee(nt)&&(ye=k,k=nt==="true",de=!0,ke=Mv(e,ce));const Rt=k&&!de;if(ut(ce)&&!UM(e,r,ce,Ue)){D=null,ms(r)&&w.remove(ce);return}if(F(ce)){D=null;return}if(G(ce,Ue,Rt)){const gt=w.rename(ce,R);f(gt),N.push(gt),D=null;return}if(Sn(r)){let gt=g(o,ce);if(!gt&&ee(De)&&dd(r)&&(gt=g(o,De)),!St(r)||gt){D=null;return}}ee(T)&&W(ce,Ue,Rt,ke)?(D||(D=w.clone(T,!1),De.insertBefore(D,ce),N.push(D)),ke&&de&&(k=ye),D.appendChild(ce)):(D=null,j(ln(ce.childNodes),Q),de&&(k=ye),D=null)};j(B,Q)}),r.links===!0&&j(N,B=>{const D=Q=>{Q.nodeName==="A"&&f(Q,r),j(ln(Q.childNodes),D)};D(B)}),j(N,B=>{const D=de=>{let ye=0;return j(de.childNodes,ke=>{!rB(ke)&&!_n(ke)&&ye++}),ye},Q=de=>Ct(de.childNodes,ad).filter(ke=>w.getContentEditable(ke)!=="false"&&il(w,ke,r)).map(ke=>{const De=w.clone(ke,!1);return f(De),w.replace(De,de,!0),w.remove(ke,!0),De}).getOr(de),ce=D(B);if((N.length>1||!w.isBlock(B))&&ce===0){w.remove(B,!0);return}(St(r)||ms(r)&&r.wrapper)&&(!r.exact&&ce===1&&(B=Q(B)),FM(e,o,n,B),MM(e,r,t,n,B),LM(w,r,n,B),IM(w,r,n,B),$M(w,r,n,B),o_(e,r,n,B))})},_=jc(s)?s:l.getNode();if(c.getContentEditable(_)==="false"&&!Mv(e,_)){s=_,g(o,s),tC(e,t,s,n);return}if(r){if(s)if(jc(s)){if(!g(o,s)){const w=c.createRng();w.setStartBefore(s),w.setEndAfter(s),h(c,Wo(c,w,o),!0)}}else h(c,s,!0);else!a||!St(r)||Lr(e).length?(l.setRng(tm(l.getRng())),$v(e,()=>{rd(e,(w,C)=>{const S=C?w:Wo(c,w,o);h(c,S,!1)})},yt),e.nodeChanged()):gM(e,t,n),JE(e.formatter,t).each(w=>{j(xM(e.selection),C=>y_(c,C,w,n))});EM(t,e)}tC(e,t,s,n)},C_=e=>Se(e,"vars"),zM=(e,t)=>{e.set({}),t.on("NodeChange",n=>{w_(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=y.from(n.node).map(o=>jc(o)?o:o.startContainer).bind(o=>te(o)?y.some(o):y.from(o.parentElement)).getOrThunk(()=>E_(t));w_(t,s,e.get())})},E_=e=>e.selection.getStart(),__=(e,t,n,s,o)=>ah(t,c=>{const l=e.formatter.matchNode(c,n,o??{},s);return!Kt(l)},c=>ME(e,c,n)?!0:s?!1:ee(e.formatter.matchNode(c,n,o,!0))),S_=(e,t)=>{const n=t??E_(e);return be(Wc(e.dom,n),s=>te(s)&&!Ro(s))},w_=(e,t,n)=>{const s=S_(e,t);Je(n,(o,r)=>{const a=c=>{const l=__(e,s,r,c.similar,C_(c)?c.vars:void 0),f=l.isSome();if(c.state.get()!==f){c.state.set(f);const g=l.getOr(t);C_(c)?c.callback(f,{node:g,format:r,parents:s}):j(c.callbacks,m=>m(f,{node:g,format:r,parents:s}))}};j([o.withSimilar,o.withoutSimilar],a),j(o.withVars,a)})},HM=(e,t,n,s,o,r)=>{const a=t.get();j(n.split(","),c=>{const l=Ze(a,c).getOrThunk(()=>{const g={withSimilar:{state:wt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:wt(!1),similar:!1,callbacks:[]},withVars:[]};return a[c]=g,g}),f=()=>{const g=S_(e);return __(e,g,c,o,r).isSome()};if(Kt(r)){const g=o?l.withSimilar:l.withoutSimilar;g.callbacks.push(s),g.callbacks.length===1&&g.state.set(f())}else l.withVars.push({state:wt(f()),similar:o,vars:r,callback:s})}),t.set(a)},jM=(e,t,n)=>{const s=e.get();j(t.split(","),o=>Ze(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:be(r.withSimilar.callbacks,a=>a!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:be(r.withoutSimilar.callbacks,a=>a!==n)},withVars:be(r.withVars,a=>a.callback!==n)}})),e.set(s)},VM=(e,t,n,s,o,r)=>(HM(e,t,n,s,o,r),{unbind:()=>jM(t,n,s)}),WM=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(cm(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?h_(e,t,n,s):v_(e,t,n,s))},x_=q.explode,k_=()=>{const e={};return{addFilter:(o,r)=>{j(x_(o),a=>{Se(e,a)||(e[a]={name:a,callbacks:[]}),e[a].callbacks.push(r)})},getFilters:()=>Hu(e),removeFilter:(o,r)=>{j(x_(o),a=>{if(Se(e,a))if(ee(r)){const c=e[a],l=be(c.callbacks,f=>f!==r);l.length>0?c.callbacks=l:delete e[a]}else delete e[a]})}}},qM=(e,t)=>{j(t,n=>{e.attr(n,null)})},KM=(e,t,n)=>{e.addNodeFilter("font",s=>{j(s,o=>{const r=t.parse(o.attr("style")),a=o.attr("color"),c=o.attr("face"),l=o.attr("size");a&&(r.color=a),c&&(r["font-family"]=c),l&&ec(l).each(f=>{r["font-size"]=n[f-1]}),o.name="span",o.attr("style",t.serialize(r)),qM(o,["color","face","size"])})})},GM=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";j(s,r=>{if(o)r.name="s";else{const a=n.parse(r.attr("style"));a["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(a))}})})},YM=(e,t,n)=>{var s;const o=wf();t.convert_fonts_to_spans&&KM(e,o,q.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),GM(e,n,o)},XM=(e,t,n)=>{t.inline_styles&&YM(e,t,n)},JM=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),QM=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},bm=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",a=r?QM(s):decodeURIComponent(s);return y.some({type:o[1],data:a,base64Encoded:r})}else return y.none()},A_=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return y.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return y.some(new Blob([o],{type:e}))},ZM=e=>new Promise((t,n)=>{bm(e).bind(({type:s,data:o,base64Encoded:r})=>A_(s,o,r)).fold(()=>n("Invalid data URI"),t)}),eU=e=>Pt(e,"blob:")?JM(e):Pt(e,"data:")?ZM(e):Promise.reject("Unknown URI format"),N_=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let tU=0;const nU=e=>(e||"blobid")+tU++,R_=(e,t,n)=>bm(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return y.none();{const a=r?s:btoa(s);return n(a,o)}}),T_=(e,t,n)=>{const s=e.create(nU(),t,n);return e.add(s),s},O_=(e,t,n=!1)=>R_(t,n,(s,o)=>y.from(e.getByData(s,o)).orThunk(()=>A_(o,s).map(r=>T_(e,r,s)))),sU=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Pt(t,"blob:")){const s=e.getByUri(t);return ee(s)?Promise.resolve(s):eU(t).then(o=>N_(o).then(r=>R_(r,!1,a=>y.some(T_(e,o,a))).getOrThunk(n)))}else return Pt(t,"data:")?O_(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},oU=e=>ee(e.attr("data-mce-bogus")),rU=e=>e.attr("src")===Ie.transparentSrc||ee(e.attr("data-mce-placeholder")),aU=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");rU(o)||oU(o)||bt(r)||O_(n,r,!0).each(a=>{o.attr("src",a.blobUri())})};e.addAttributeFilter("src",o=>j(o,s))}},iU=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(o,r,a)=>{const c=q.extend({},n.getBlockElements()),l=n.getNonEmptyElements(),f=n.getWhitespaceElements();c.body=1;const g=m=>m.name in c&&Mb(n,m);for(let m=0,h=o.length;m<h;m++){let _=o[m],w=_.parent;if(w&&c[w.name]&&_===w.lastChild){let C=_.prev;for(;C;){const S=C.name;if(S!=="span"||C.attr("data-mce-type")!=="bookmark"){S==="br"&&(_=null);break}C=C.prev}if(_&&(_.remove(),ii(n,l,f,w))){const S=n.getElementRule(w.name);S&&(S.removeEmpty?w.remove():S.paddEmpty&&Qd(a,g,w))}}else{let C=_;for(;w&&w.firstChild===C&&w.lastChild===C&&(C=w,!c[w.name]);)w=w.parent;if(C===w){const S=new Qt("#text",3);S.value=At,_.replace(S)}}}}),e.addAttributeFilter("href",o=>{let r=o.length;const a=l=>l.split(" ").filter(g=>g.length>0).concat(["noopener"]).sort().join(" "),c=l=>{const f=l?q.trim(l):"";return/\b(noopener)\b/g.test(f)?f:a(f)};if(!t.allow_unsafe_link_target)for(;r--;){const l=o[r];l.name==="a"&&l.attr("target")==="_blank"&&l.attr("rel",c(l.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let r=o.length,a,c,l,f;for(;r--;)if(f=o[r],f.name==="a"&&f.firstChild&&!f.attr("href"))for(l=f.parent,a=f.lastChild;a&&l;)c=a.prev,l.insert(a,f),a=c}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let r=o.length,a,c;for(;r--;)if(a=o[r],c=a.parent,c&&(c.name==="ul"||c.name==="ol"))if(a.prev&&a.prev.name==="li")a.prev.append(a);else{const l=new Qt("li",1);l.attr("style","list-style-type: none"),a.wrap(l)}});const s=n.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",o=>{var r;let a=o.length;for(;a--;){const c=o[a],l=(r=c.attr("class"))!==null&&r!==void 0?r:"",f=q.explode(l," ");let g="";for(let m=0;m<f.length;m++){const h=f[m];let _=!1,w=s["*"];w&&w[h]&&(_=!0),w=s[c.name],!_&&w&&w[h]&&(_=!0),_&&(g&&(g+=" "),g+=h)}g.length||(g=null),c.attr("class",g)}}),aU(e,t)};function Zo(e){return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zo(e)}function ym(e,t){return ym=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},ym(e,t)}function cU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ul(e,t,n){return cU()?ul=Reflect.construct:ul=function(o,r,a){var c=[null];c.push.apply(c,r);var l=Function.bind.apply(o,c),f=new l;return a&&ym(f,a.prototype),f},ul.apply(null,arguments)}function Wn(e){return lU(e)||uU(e)||fU(e)||dU()}function lU(e){if(Array.isArray(e))return vm(e)}function uU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fU(e,t){if(e){if(typeof e=="string")return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vm(e,t)}}function vm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function dU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mU=Object.hasOwnProperty,P_=Object.setPrototypeOf,pU=Object.isFrozen,gU=Object.getPrototypeOf,hU=Object.getOwnPropertyDescriptor,on=Object.freeze,gs=Object.seal,bU=Object.create,D_=typeof Reflect<"u"&&Reflect,fl=D_.apply,Cm=D_.construct;fl||(fl=function(t,n,s){return t.apply(n,s)}),on||(on=function(t){return t}),gs||(gs=function(t){return t}),Cm||(Cm=function(t,n){return ul(t,Wn(n))});var yU=qn(Array.prototype.forEach),vU=qn(Array.prototype.pop),ui=qn(Array.prototype.push),dl=qn(String.prototype.toLowerCase),CU=qn(String.prototype.match),ao=qn(String.prototype.replace),EU=qn(String.prototype.indexOf),_U=qn(String.prototype.trim),rn=qn(RegExp.prototype.test),Em=SU(TypeError);function qn(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return fl(e,t,s)}}function SU(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Cm(e,n)}}function Me(e,t){P_&&P_(e,null);for(var n=t.length;n--;){var s=t[n];if(typeof s=="string"){var o=dl(s);o!==s&&(pU(t)||(t[n]=o),s=o)}e[s]=!0}return e}function er(e){var t=bU(null),n;for(n in e)fl(mU,e,[n])&&(t[n]=e[n]);return t}function ml(e,t){for(;e!==null;){var n=hU(e,t);if(n){if(n.get)return qn(n.get);if(typeof n.value=="function")return qn(n.value)}e=gU(e)}function s(o){return console.warn("fallback value for",o),null}return s}var B_=on(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_m=on(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Sm=on(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wU=on(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wm=on(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),xU=on(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I_=on(["#text"]),L_=on(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),xm=on(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$_=on(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pl=on(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),kU=gs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),AU=gs(/<%[\w\W]*|[\w\W]*%>/gm),NU=gs(/^data-[\-\w.\u00B7-\uFFFF]/),RU=gs(/^aria-[\-\w]+$/),TU=gs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),OU=gs(/^(?:\w+script|data):/i),PU=gs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DU=gs(/^html$/i),BU=function(){return typeof window>"u"?null:window},IU=function(t,n){if(Zo(t)!=="object"||typeof t.createPolicy!="function")return null;var s=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(s=n.currentScript.getAttribute(o));var r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function F_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:BU(),t=function(I){return F_(I)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,s=e.document,o=e.DocumentFragment,r=e.HTMLTemplateElement,a=e.Node,c=e.Element,l=e.NodeFilter,f=e.NamedNodeMap,g=f===void 0?e.NamedNodeMap||e.MozNamedAttrMap:f,m=e.HTMLFormElement,h=e.DOMParser,_=e.trustedTypes,w=c.prototype,C=ml(w,"cloneNode"),S=ml(w,"nextSibling"),N=ml(w,"childNodes"),k=ml(w,"parentNode");if(typeof r=="function"){var R=s.createElement("template");R.content&&R.content.ownerDocument&&(s=R.content.ownerDocument)}var T=IU(_,n),F=T?T.createHTML(""):"",G=s,W=G.implementation,B=G.createNodeIterator,D=G.createDocumentFragment,Q=G.getElementsByTagName,ce=n.importNode,de={};try{de=er(s).documentMode?s.documentMode:{}}catch{}var ye={};t.isSupported=typeof k=="function"&&W&&typeof W.createHTMLDocument<"u"&&de!==9;var ke=kU,De=AU,Ue=NU,nt=RU,Rt=OU,gt=PU,H=TU,re=null,Ne=Me({},[].concat(Wn(B_),Wn(_m),Wn(Sm),Wn(wm),Wn(I_))),Y=null,ue=Me({},[].concat(Wn(L_),Wn(xm),Wn($_),Wn(pl))),me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,xe=null,we=!0,vt=!0,We=!1,ge=!1,Oe=!1,ct=!1,ze=!1,tt=!1,ot=!1,qe=!1,lt=!0,Nn=!0,Tt=!1,Xn={},mn=null,ir=Me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),cr=null,Jn=Me({},["audio","video","img","source","image","track"]),Ln=null,dt=Me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rn="http://www.w3.org/1998/Math/MathML",Qn="http://www.w3.org/2000/svg",Tn="http://www.w3.org/1999/xhtml",On=Tn,vs=!1,$t,$s=["application/xhtml+xml","text/html"],Cs="text/html",$n,lo=null,Ri=s.createElement("form"),Jp=function(I){return I instanceof RegExp||I instanceof Function},cu=function(I){lo&&lo===I||((!I||Zo(I)!=="object")&&(I={}),I=er(I),re="ALLOWED_TAGS"in I?Me({},I.ALLOWED_TAGS):Ne,Y="ALLOWED_ATTR"in I?Me({},I.ALLOWED_ATTR):ue,Ln="ADD_URI_SAFE_ATTR"in I?Me(er(dt),I.ADD_URI_SAFE_ATTR):dt,cr="ADD_DATA_URI_TAGS"in I?Me(er(Jn),I.ADD_DATA_URI_TAGS):Jn,mn="FORBID_CONTENTS"in I?Me({},I.FORBID_CONTENTS):ir,X="FORBID_TAGS"in I?Me({},I.FORBID_TAGS):{},xe="FORBID_ATTR"in I?Me({},I.FORBID_ATTR):{},Xn="USE_PROFILES"in I?I.USE_PROFILES:!1,we=I.ALLOW_ARIA_ATTR!==!1,vt=I.ALLOW_DATA_ATTR!==!1,We=I.ALLOW_UNKNOWN_PROTOCOLS||!1,ge=I.SAFE_FOR_TEMPLATES||!1,Oe=I.WHOLE_DOCUMENT||!1,tt=I.RETURN_DOM||!1,ot=I.RETURN_DOM_FRAGMENT||!1,qe=I.RETURN_TRUSTED_TYPE||!1,ze=I.FORCE_BODY||!1,lt=I.SANITIZE_DOM!==!1,Nn=I.KEEP_CONTENT!==!1,Tt=I.IN_PLACE||!1,H=I.ALLOWED_URI_REGEXP||H,On=I.NAMESPACE||Tn,I.CUSTOM_ELEMENT_HANDLING&&Jp(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(me.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&Jp(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(me.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(me.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$t=$s.indexOf(I.PARSER_MEDIA_TYPE)===-1?$t=Cs:$t=I.PARSER_MEDIA_TYPE,$n=$t==="application/xhtml+xml"?function(oe){return oe}:dl,ge&&(vt=!1),ot&&(tt=!0),Xn&&(re=Me({},Wn(I_)),Y=[],Xn.html===!0&&(Me(re,B_),Me(Y,L_)),Xn.svg===!0&&(Me(re,_m),Me(Y,xm),Me(Y,pl)),Xn.svgFilters===!0&&(Me(re,Sm),Me(Y,xm),Me(Y,pl)),Xn.mathMl===!0&&(Me(re,wm),Me(Y,$_),Me(Y,pl))),I.ADD_TAGS&&(re===Ne&&(re=er(re)),Me(re,I.ADD_TAGS)),I.ADD_ATTR&&(Y===ue&&(Y=er(Y)),Me(Y,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Me(Ln,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(mn===ir&&(mn=er(mn)),Me(mn,I.FORBID_CONTENTS)),Nn&&(re["#text"]=!0),Oe&&Me(re,["html","head","body"]),re.table&&(Me(re,["tbody"]),delete X.tbody),on&&on(I),lo=I)},Qp=Me({},["mi","mo","mn","ms","mtext"]),Zp=Me({},["foreignobject","desc","title","annotation-xml"]),Ok=Me({},["title","style","font","a","script"]),Zn=Me({},_m);Me(Zn,Sm),Me(Zn,wU);var Zr=Me({},wm);Me(Zr,xU);var O=function(I){var oe=k(I);(!oe||!oe.tagName)&&(oe={namespaceURI:Tn,tagName:"template"});var pe=dl(I.tagName),rt=dl(oe.tagName);return I.namespaceURI===Qn?oe.namespaceURI===Tn?pe==="svg":oe.namespaceURI===Rn?pe==="svg"&&(rt==="annotation-xml"||Qp[rt]):!!Zn[pe]:I.namespaceURI===Rn?oe.namespaceURI===Tn?pe==="math":oe.namespaceURI===Qn?pe==="math"&&Zp[rt]:!!Zr[pe]:I.namespaceURI===Tn?oe.namespaceURI===Qn&&!Zp[rt]||oe.namespaceURI===Rn&&!Qp[rt]?!1:!Zr[pe]&&(Ok[pe]||!Zn[pe]):!1},P=function(I){ui(t.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=F}catch{I.remove()}}},V=function(I,oe){try{ui(t.removed,{attribute:oe.getAttributeNode(I),from:oe})}catch{ui(t.removed,{attribute:null,from:oe})}if(oe.removeAttribute(I),I==="is"&&!Y[I])if(tt||ot)try{P(oe)}catch{}else try{oe.setAttribute(I,"")}catch{}},U=function(I){var oe,pe;if(ze)I="<remove></remove>"+I;else{var rt=CU(I,/^[\r\n\t ]+/);pe=rt&&rt[0]}$t==="application/xhtml+xml"&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");var pn=T?T.createHTML(I):I;if(On===Tn)try{oe=new h().parseFromString(pn,$t)}catch{}if(!oe||!oe.documentElement){oe=W.createDocument(On,"template",null);try{oe.documentElement.innerHTML=vs?"":pn}catch{}}var en=oe.body||oe.documentElement;return I&&pe&&en.insertBefore(s.createTextNode(pe),en.childNodes[0]||null),On===Tn?Q.call(oe,Oe?"html":"body")[0]:Oe?oe.documentElement:en},le=function(I){return B.call(I.ownerDocument||I,I,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Re=function(I){return I instanceof m&&(typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof g)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function")},He=function(I){return Zo(a)==="object"?I instanceof a:I&&Zo(I)==="object"&&typeof I.nodeType=="number"&&typeof I.nodeName=="string"},je=function(I,oe,pe){ye[I]&&yU(ye[I],function(rt){rt.call(t,oe,pe,lo)})},lr=function(I){var oe;if(je("beforeSanitizeElements",I,null),Re(I)||rn(/[\u0080-\uFFFF]/,I.nodeName))return P(I),!0;var pe=$n(I.nodeName);if(je("uponSanitizeElement",I,{tagName:pe,allowedTags:re}),I.hasChildNodes()&&!He(I.firstElementChild)&&(!He(I.content)||!He(I.content.firstElementChild))&&rn(/<[/\w]/g,I.innerHTML)&&rn(/<[/\w]/g,I.textContent)||pe==="select"&&rn(/<template/i,I.innerHTML))return P(I),!0;if(!re[pe]||X[pe]){if(!X[pe]&&Pk(pe)&&(me.tagNameCheck instanceof RegExp&&rn(me.tagNameCheck,pe)||me.tagNameCheck instanceof Function&&me.tagNameCheck(pe)))return!1;if(Nn&&!mn[pe]){var rt=k(I)||I.parentNode,pn=N(I)||I.childNodes;if(pn&&rt)for(var en=pn.length,Wt=en-1;Wt>=0;--Wt)rt.insertBefore(C(pn[Wt],!0),S(I))}return P(I),!0}return I instanceof c&&!O(I)||(pe==="noscript"||pe==="noembed")&&rn(/<\/no(script|embed)/i,I.innerHTML)?(P(I),!0):(ge&&I.nodeType===3&&(oe=I.textContent,oe=ao(oe,ke," "),oe=ao(oe,De," "),I.textContent!==oe&&(ui(t.removed,{element:I.cloneNode()}),I.textContent=oe)),je("afterSanitizeElements",I,null),!1)},Ti=function(I,oe,pe){if(lt&&(oe==="id"||oe==="name")&&(pe in s||pe in Ri))return!1;if(!(vt&&!xe[oe]&&rn(Ue,oe))){if(!(we&&rn(nt,oe))){if(!Y[oe]||xe[oe]){if(!(Pk(I)&&(me.tagNameCheck instanceof RegExp&&rn(me.tagNameCheck,I)||me.tagNameCheck instanceof Function&&me.tagNameCheck(I))&&(me.attributeNameCheck instanceof RegExp&&rn(me.attributeNameCheck,oe)||me.attributeNameCheck instanceof Function&&me.attributeNameCheck(oe))||oe==="is"&&me.allowCustomizedBuiltInElements&&(me.tagNameCheck instanceof RegExp&&rn(me.tagNameCheck,pe)||me.tagNameCheck instanceof Function&&me.tagNameCheck(pe))))return!1}else if(!Ln[oe]){if(!rn(H,ao(pe,gt,""))){if(!((oe==="src"||oe==="xlink:href"||oe==="href")&&I!=="script"&&EU(pe,"data:")===0&&cr[I])){if(!(We&&!rn(Rt,ao(pe,gt,"")))){if(pe)return!1}}}}}}return!0},Pk=function(I){return I.indexOf("-")>0},Dk=function(I){var oe,pe,rt,pn;je("beforeSanitizeAttributes",I,null);var en=I.attributes;if(en){var Wt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y};for(pn=en.length;pn--;){oe=en[pn];var lu=oe,qt=lu.name,Bk=lu.namespaceURI;pe=qt==="value"?oe.value:_U(oe.value),rt=$n(qt);var W9=pe;if(Wt.attrName=rt,Wt.attrValue=pe,Wt.keepAttr=!0,Wt.forceKeepAttr=void 0,je("uponSanitizeAttribute",I,Wt),pe=Wt.attrValue,!Wt.forceKeepAttr){if(!Wt.keepAttr){V(qt,I);continue}if(rn(/\/>/i,pe)){V(qt,I);continue}ge&&(pe=ao(pe,ke," "),pe=ao(pe,De," "));var q9=$n(I.nodeName);if(!Ti(q9,rt,pe)){V(qt,I);continue}if(pe!==W9)try{Bk?I.setAttributeNS(Bk,qt,pe):I.setAttribute(qt,pe)}catch{V(qt,I)}}}je("afterSanitizeAttributes",I,null)}},V9=function _e(I){var oe,pe=le(I);for(je("beforeSanitizeShadowDOM",I,null);oe=pe.nextNode();)je("uponSanitizeShadowNode",oe,null),!lr(oe)&&(oe.content instanceof o&&_e(oe.content),Dk(oe));je("afterSanitizeShadowDOM",I,null)};return t.sanitize=function(_e,I){var oe,pe,rt,pn,en;if(vs=!_e,vs&&(_e="<!-->"),typeof _e!="string"&&!He(_e)){if(typeof _e.toString!="function")throw Em("toString is not a function");if(_e=_e.toString(),typeof _e!="string")throw Em("dirty is not a string, aborting")}if(!t.isSupported){if(Zo(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof _e=="string")return e.toStaticHTML(_e);if(He(_e))return e.toStaticHTML(_e.outerHTML)}return _e}if(ct||cu(I),t.removed=[],typeof _e=="string"&&(Tt=!1),Tt){if(_e.nodeName){var Wt=$n(_e.nodeName);if(!re[Wt]||X[Wt])throw Em("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof a)oe=U("<!---->"),pe=oe.ownerDocument.importNode(_e,!0),pe.nodeType===1&&pe.nodeName==="BODY"||pe.nodeName==="HTML"?oe=pe:oe.appendChild(pe);else{if(!tt&&!ge&&!Oe&&_e.indexOf("<")===-1)return T&&qe?T.createHTML(_e):_e;if(oe=U(_e),!oe)return tt?null:qe?F:""}oe&&ze&&P(oe.firstChild);for(var lu=le(Tt?_e:oe);rt=lu.nextNode();)rt.nodeType===3&&rt===pn||lr(rt)||(rt.content instanceof o&&V9(rt.content),Dk(rt),pn=rt);if(pn=null,Tt)return _e;if(tt){if(ot)for(en=D.call(oe.ownerDocument);oe.firstChild;)en.appendChild(oe.firstChild);else en=oe;return Y.shadowroot&&(en=ce.call(n,en,!0)),en}var qt=Oe?oe.outerHTML:oe.innerHTML;return Oe&&re["!doctype"]&&oe.ownerDocument&&oe.ownerDocument.doctype&&oe.ownerDocument.doctype.name&&rn(DU,oe.ownerDocument.doctype.name)&&(qt="<!DOCTYPE "+oe.ownerDocument.doctype.name+`>
`+qt),ge&&(qt=ao(qt,ke," "),qt=ao(qt,De," ")),T&&qe?T.createHTML(qt):qt},t.setConfig=function(_e){cu(_e),ct=!0},t.clearConfig=function(){lo=null,ct=!1},t.isValidAttribute=function(_e,I,oe){lo||cu({});var pe=$n(_e),rt=$n(I);return Ti(pe,rt,oe)},t.addHook=function(_e,I){typeof I=="function"&&(ye[_e]=ye[_e]||[],ui(ye[_e],I))},t.removeHook=function(_e){if(ye[_e])return vU(ye[_e])},t.removeHooks=function(_e){ye[_e]&&(ye[_e]=[])},t.removeAllHooks=function(){ye={}},t}var LU=F_();const M_=q.each,$U=q.trim,FU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],MU={ftp:21,http:80,https:443,mailto:25},UU=["img","video"],zU=(e,t)=>ee(e)?!e:ee(t)?!Ge(UU,t):!0,HU=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},U_=(e,t,n)=>{const s=HU(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?zU(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class Kn{constructor(t,n={}){this.path="",this.directory="",t=$U(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const c=s?s.path:new Kn(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(c,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(c,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&M_(FU,(c,l)=>{let f=a[l];f&&(f=f.replace(/\(mce_at\)/g,"@@")),o[c]=f}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=Gs.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!U_(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Kn(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new Kn(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?MU[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,a;const c=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(c.length>=l.length){for(r=0,a=c.length;r<a;r++)if(r>=l.length||c[r]!==l[r]){s=r+1;break}}if(c.length<l.length){for(r=0,a=l.length;r<a;r++)if(r>=c.length||c[r]!==l[r]){s=r+1;break}}if(s===1)return n;for(r=0,a=c.length-(s-1);r<a;r++)o+="../";for(r=s-1,a=l.length;r<a;r++)r!==s-1?o+="/"+l[r]:o+=l[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),a=n.split("/"),c=[];M_(r,m=>{m&&c.push(m)});const l=[];for(let m=a.length-1;m>=0;m--)if(!(a[m].length===0||a[m]===".")){if(a[m]===".."){s++;continue}if(s>0){s--;continue}l.push(a[m])}const f=c.length-s;let g;return f<=0?g=ma(l).join("/"):g=c.slice(0,f).join("/")+"/"+ma(l).join("/"),g.indexOf("/")!==0&&(g="/"+g),o&&g.lastIndexOf("/")!==g.length-1&&(g+=o),g}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const jU=q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),km="data-mce-type";let z_=0;const H_=(e,t,n,s)=>{var o,r,a,c;const l=t.validate,f=n.getSpecialElements();e.nodeType===Uh&&!t.allow_conditional_comments&&/^\[if/i.test((o=e.nodeValue)!==null&&o!==void 0?o:"")&&(e.nodeValue=" "+e.nodeValue);const g=(r=s==null?void 0:s.tagName)!==null&&r!==void 0?r:e.nodeName.toLowerCase();if(e.nodeType!==va||g==="body")return;const m=x.fromDom(e),h=nc(m,km),_=hn(m,"data-mce-bogus");if(!h&&ne(_)){_==="all"?st(m):Rs(m);return}const w=n.getElementRule(g);if(l&&!w){Se(f,g)?st(m):Rs(m);return}else ee(s)&&(s.allowedTags[g]=!0);if(l&&w&&!h){if(j((a=w.attributesForced)!==null&&a!==void 0?a:[],C=>{kt(m,C.name,C.value==="{$uid}"?`mce_${z_++}`:C.value)}),j((c=w.attributesDefault)!==null&&c!==void 0?c:[],C=>{nc(m,C.name)||kt(m,C.name,C.value==="{$uid}"?`mce_${z_++}`:C.value)}),w.attributesRequired&&!mt(w.attributesRequired,C=>nc(m,C))){Rs(m);return}if(w.removeEmptyAttrs&&AR(m)){Rs(m);return}w.outputName&&w.outputName!==g&&sO(m,w.outputName)}},j_=(e,t,n,s,o)=>!(s in jU&&U_(e,o,n))&&(!e.validate||t.isValid(n,s)||Pt(s,"data-")||Pt(s,"aria-")),V_=(e,t)=>e.hasAttribute(km)&&(t==="id"||t==="class"||t==="style"),W_=(e,t)=>e in t.getBoolAttrs(),VU=(e,t,n)=>{const{attributes:s}=e;for(let o=s.length-1;o>=0;o--){const r=s[o],a=r.name,c=r.value;!j_(t,n,e.tagName.toLowerCase(),a,c)&&!V_(e,a)?e.removeAttribute(a):W_(a,n)&&e.setAttribute(a,a)}},WU=(e,t)=>{const n=LU();return n.addHook("uponSanitizeElement",(s,o)=>{H_(s,e,t,o)}),n.addHook("uponSanitizeAttribute",(s,o)=>{const r=s.tagName.toLowerCase(),{attrName:a,attrValue:c}=o;o.keepAttr=j_(e,t,r,a,c),o.keepAttr?(o.allowedAttributes[a]=!0,W_(a,t)&&(o.attrValue=a),e.allow_svg_data_urls&&Pt(c,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):V_(s,a)&&(o.forceKeepAttr=!0)}),n},qU=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},KU=(e,t)=>{if(e.sanitize){const n=WU(e,t);return(s,o)=>{n.sanitize(s,qU(e,o)),n.removed=[]}}else return(n,s)=>{const o=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let r;for(;r=o.nextNode();)H_(r,e,t),te(r)&&VU(r,e,t)}},q_=q.makeMap,K_=q.extend,G_=(e,t,n)=>{const s=e.name,o=s in n&&s!=="title"&&s!=="textarea",r=t.childNodes;for(let a=0,c=r.length;a<c;a++){const l=r[a],f=new Qt(l.nodeName.toLowerCase(),l.nodeType);if(te(l)){const g=l.attributes;for(let m=0,h=g.length;m<h;m++){const _=g[m];f.attr(_.name,_.value)}}else z(l)?(f.value=l.data,o&&(f.raw=!0)):(Ws(l)||mT(l)||pT(l))&&(f.value=l.data);G_(f,l,n),e.append(f)}},GU=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const a=o;j(t,c=>c(a)),bt(a.parent)&&a!==e?o=r:s.push(a)}for(let o=s.length-1;o>=0;o--){const r=s[o];j(n,a=>a(r))}},YU=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),a=t.getWhitespaceElements(),c=K_(q_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=Jb(t),f=/[ \t\r\n]+/g,g=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,h=k=>{let R=k.parent;for(;ee(R);){if(R.name in a)return!0;R=R.parent}return!1},_=k=>{let R=k;for(;ee(R);){if(R.name in l)return ii(t,r,a,R);R=R.parent}return!1},w=k=>k.name in c&&!Mb(t,k),C=(k,R)=>{const T=R?k.prev:k.next;return ee(T)||bt(k.parent)?!1:w(k.parent)&&(k.parent!==e||s.isRootContent===!0)};return[k=>{var R;if(k.type===3&&!h(k)){let T=(R=k.value)!==null&&R!==void 0?R:"";T=T.replace(f," "),(gF(k.prev,w)||C(k,!0))&&(T=T.replace(g,"")),T.length===0?k.remove():k.value=T}},k=>{var R;if(k.type===1){const T=t.getElementRule(k.name);if(o&&T){const F=ii(t,r,a,k);T.paddInEmptyBlock&&F&&_(k)?Qd(s,w,k):T.removeEmpty&&F?w(k)?k.remove():k.unwrap():T.paddEmpty&&(F||mF(k))&&Qd(s,w,k)}}else if(k.type===3&&!h(k)){let T=(R=k.value)!==null&&R!==void 0?R:"";(k.next&&w(k.next)||C(k,!1))&&(T=T.replace(m,"")),T.length===0?k.remove():k.value=T}}]},XU=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},Hr=(e={},t=Ys())=>{const n=k_(),s=k_(),o={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,a=KU(o,t),c=(R,T,F="html")=>{const G=F==="xhtml"?"application/xhtml+xml":"text/html",W=Se(t.getSpecialElements(),T.toLowerCase()),B=W?`<${T}>${R}</${T}>`:R,D=F==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${B}</body></html>`:`<body>${B}</body>`,Q=r.parseFromString(D,G).body;return a(Q,G),W?Q.firstChild:Q},l=n.addFilter,f=n.getFilters,g=n.removeFilter,m=s.addFilter,h=s.getFilters,_=s.removeFilter,w=(R,T)=>{LE(t,R)&&T.push(R)},C=(R,T)=>{const F=ne(T.attr(km)),G=T.type===1&&!Se(R,T.name)&&!d1(t,T);return T.type===3||G&&!F},S=(R,T)=>{const F=K_(q_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),G=/^[ \t\r\n]+/,W=/[ \t\r\n]+$/;let B=R.firstChild,D=null;const Q=ce=>{var de,ye;ce&&(B=ce.firstChild,B&&B.type===3&&(B.value=(de=B.value)===null||de===void 0?void 0:de.replace(G,"")),B=ce.lastChild,B&&B.type===3&&(B.value=(ye=B.value)===null||ye===void 0?void 0:ye.replace(W,"")))};if(t.isValidChild(R.name,T.toLowerCase())){for(;B;){const ce=B.next;C(F,B)?(D||(D=new Qt(T,1),D.attr(o.forced_root_block_attrs),R.insert(D,B)),D.append(B)):(Q(D),D=null),B=ce}Q(D)}},k={schema:t,addAttributeFilter:m,getAttributeFilters:h,removeAttributeFilter:_,addNodeFilter:l,getNodeFilters:f,removeNodeFilter:g,parse:(R,T={})=>{var F;const G=o.validate,W=(F=T.context)!==null&&F!==void 0?F:o.root_name,B=c(R,W,T.format);hf(t,B);const D=new Qt(W,11);G_(D,B,t.getSpecialElements()),B.innerHTML="";const[Q,ce]=YU(D,t,o,T),de=[],ye=G?nt=>w(nt,de):Ae,ke={nodes:{},attributes:{}},De=nt=>PE(f(),h(),nt,ke);if(GU(D,[Q,De],[ce,ye]),de.reverse(),G&&de.length>0)if(T.context){const{pass:nt,fail:Rt}=ua(de,gt=>gt.parent===D);em(Rt,t,D,De),T.invalid=nt.length>0}else em(de,t,D,De);const Ue=XU(o,T);return Ue&&(D.name==="body"||T.isRootContent)&&S(D,Ue),T.invalid||DE(ke,T),D}};return iU(k,o),XM(k,o,t),k},JU=e=>al(e)?to({validate:!1}).serialize(e):e,Y_=(e,t,n)=>{const s=JU(e),o=t(s);if(o.isDefaultPrevented())return o;if(al(e))if(o.content!==s){const r=Hr({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:e.name});return{...o,content:r}}else return{...o,content:e};else return o},X_=(e,t)=>{if(t.no_events)return Xt.value(t);{const n=IB(e,t);return n.isDefaultPrevented()?Xt.error(oC(e,{content:"",...n}).content):Xt.value(n)}},J_=(e,t,n)=>n.no_events?t:Y_(t,o=>oC(e,{...n,content:o}),Vf(e)).content,Am=(e,t)=>{if(t.no_events)return Xt.value(t);{const n=Y_(t.content,s=>BB(e,{...t,content:s}),Vf(e));return n.isDefaultPrevented()?(sC(e,n),Xt.error(void 0)):Xt.value(n)}},Nm=(e,t,n)=>{n.no_events||sC(e,{...n,content:t})},Rm=(e,t,n)=>({element:e,width:t,rows:n}),Q_=(e,t)=>({element:e,cells:t}),QU=(e,t)=>({x:e,y:t}),Z_=(e,t)=>xs(e,t).bind(ec).getOr(1),ZU=(e,t,n,s,o)=>{const r=Z_(o,"rowspan"),a=Z_(o,"colspan"),c=e.rows;for(let l=n;l<n+r;l++){c[l]||(c[l]=Q_(dy(s),[]));for(let f=t;f<t+a;f++){const g=c[l].cells;g[f]=l===n&&f===t?o:$o(o)}}},ez=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},tz=(e,t,n)=>{for(;ez(e,t,n);)t++;return t},e0=e=>cn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),t0=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(Fe(o[r],t))return y.some(QU(r,s))}return y.none()},n0=(e,t,n,s,o)=>{const r=[],a=e.rows;for(let c=n;c<=o;c++){const l=a[c].cells,f=t<s?l.slice(t,s+1):l.slice(s,t+1);r.push(Q_(a[c].element,f))}return r},nz=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,a=n.y,c=o<a?n0(e,s,o,r,a):n0(e,s,a,r,o);return Rm(e.element,e0(c),c)},sz=(e,t)=>{const n=$o(e.element),s=x.fromTag("tbody");return Ao(s,t),Et(n,s),n},oz=e=>Le(e.rows,t=>{const n=Le(t.cells,o=>{const r=dy(o);return Dt(r,"colspan"),Dt(r,"rowspan"),r}),s=$o(t.element);return Ao(s,n),s}),rz=e=>{const t=Rm($o(e),0,[]);return j(Ut(e,"tr"),(n,s)=>{j(Ut(n,"td,th"),(o,r)=>{ZU(t,tz(t,r,s),s,n,o)})}),Rm(t.element,e0(t.rows),t.rows)},az=e=>sz(e,oz(e)),iz=(e,t,n)=>t0(e,t).bind(s=>t0(e,n).map(o=>nz(e,s,o))),cz=e=>Ct(e,t=>et(t)==="ul"||et(t)==="ol"),lz=(e,t)=>Ct(e,n=>et(n)==="li"&&sd(n,t)).fold(Z([]),n=>cz(e).map(s=>{const o=x.fromTag(et(s)),r=pa(ub(s),(a,c)=>Pt(c,"list-style"));return rc(o,r),[x.fromTag("li"),o]}).getOr([])),uz=(e,t)=>{const n=cn(t,(s,o)=>(Et(o,s),o),e);return t.length>0?hd([n]):n},fz=e=>Ra(e)?Un(e).filter(uf).fold(Z([]),t=>[e,t]):uf(e)?[e]:[],dz=(e,t)=>{const n=x.fromDom(t.commonAncestorContainer),s=Bs(n,e),o=be(s,OT),r=lz(s,t),a=o.concat(r.length?r:fz(n));return Le(a,$o)},s0=()=>hd([]),mz=(e,t)=>uz(x.fromDom(t.cloneContents()),dz(e,t)),pz=(e,t)=>xa(t,"table",ae(Fe,e)),gz=(e,t)=>pz(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=rz(n);return iz(r,s,o).map(a=>hd([az(a)]))}).getOrThunk(s0),hz=(e,t)=>t.length>0&&t[0].collapsed?s0():mz(e,t[0]),bz=(e,t)=>{const n=Bv(t,e);return n.length>0?gz(e,n):hz(e,t)},gl=(e,t)=>t>=0&&t<e.length&&Ir(e.charAt(t)),o0=e=>Os(e.innerText),yz=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),vz=e=>y.from(e.selection.getRng()).map(t=>{var n;const s=y.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=yz(s),a=x.fromDom(t.cloneContents());HC(a),jC(a);const c=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),l=o0(c),f=Os((n=c.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(c),gl(f,0)||gl(f,f.length-1)){const g=s.getOr(o),m=o0(g),h=m.indexOf(l);if(h===-1)return l;{const _=gl(m,h-1),w=gl(m,h+l.length);return(_?" ":"")+l+(w?" ":"")}}else return l}).getOr(""),Cz=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Rd(e,td(o)),a=t.contextual?bz(x.fromDom(e.getBody()),r).dom:n.cloneContents();return a&&s.appendChild(a),e.selection.serializer.serialize(s,t)},Ez=(e,t)=>{if(t.format==="text")return vz(e);{const n=Cz(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},_z=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),Sz=(e,t,n={})=>{const s=_z(n,t);return X_(e,s).fold(Gt,o=>{const r=Ez(e,o);return J_(e,r,o)})},Tm=0,r0=1,a0=2,wz=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(g,m,h)=>({start:g,end:m,diag:h}),a=(g,m,h,_,w)=>{const C=l(g,m,h,_);if(C===null||C.start===m&&C.diag===m-_||C.end===g&&C.diag===g-h){let S=g,N=h;for(;S<m||N<_;)S<m&&N<_&&e[S]===t[N]?(w.push([Tm,e[S]]),++S,++N):m-g>_-h?(w.push([a0,e[S]]),++S):(w.push([r0,t[N]]),++N)}else{a(g,C.start,h,C.start-C.diag,w);for(let S=C.start;S<C.end;++S)w.push([Tm,e[S]]);a(C.end,m,C.end-C.diag,_,w)}},c=(g,m,h,_)=>{let w=g;for(;w-m<_&&w<h&&e[w]===t[w-m];)++w;return r(g,w,m)},l=(g,m,h,_)=>{const w=m-g,C=_-h;if(w===0||C===0)return null;const S=w-C,N=C+w,k=(N%2===0?N:N+1)/2;s[1+k]=g,o[1+k]=m+1;let R,T,F,G,W;for(R=0;R<=k;++R){for(T=-R;T<=R;T+=2){for(F=T+k,T===-R||T!==R&&s[F-1]<s[F+1]?s[F]=s[F+1]:s[F]=s[F-1]+1,G=s[F],W=G-g+h-T;G<m&&W<_&&e[G]===t[W];)s[F]=++G,++W;if(S%2!==0&&S-R<=T&&T<=S+R&&o[F-S]<=s[F])return c(o[F-S],T+g-h,m,_)}for(T=S-R;T<=S+R;T+=2){for(F=T+k-S,T===S-R||T!==S+R&&o[F+1]<=o[F-1]?o[F]=o[F+1]-1:o[F]=o[F-1],G=o[F]-1,W=G-g+h-T;G>=g&&W>=h&&e[G]===t[W];)o[F]=G--,W--;if(S%2===0&&-R<=T&&T<=R&&o[F]<=s[F+S])return c(o[F],T+g-h,m,_)}}return null},f=[];return a(0,e.length,0,t.length,f),f},i0=e=>te(e)?e.outerHTML:z(e)?Gs.encodeRaw(e.data,!1):Ws(e)?"<!--"+e.data+"-->":"",xz=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},kz=(e,t,n)=>{const s=xz(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},Az=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},Nz=(e,t)=>{let n=0;j(e,s=>{s[0]===Tm?n++:s[0]===r0?(kz(t,s[1],n),n++):s[0]===a0&&Az(t,n)})},Rz=e=>be(Le(ln(e.childNodes),i0),t=>t.length>0),Tz=(e,t)=>{const n=Le(ln(t.childNodes),i0);return Nz(wz(n,e),t),t},Oz=_o(()=>document.implementation.createHTMLDocument("undo")),Pz=e=>e.indexOf("</iframe>")!==-1,Dz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Bz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),hl=e=>{const t=Rz(e.getBody()),n=ns(t,o=>{const r=zC(e.serializer,o);return r.length>0?[r]:[]}),s=n.join("");return Pz(s)?Dz(n):Bz(s)},Om=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?Tz(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:ee(s)&&Av(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},Pm=e=>e.type==="fragmented"?e.fragments.join(""):e.content,c0=e=>{const t=x.fromTag("body",Oz());return ic(t,Pm(e)),j(Ut(t,"*[data-mce-bogus]"),Rs),gb(t)},Iz=(e,t)=>Pm(e)===Pm(t),Lz=(e,t)=>c0(e)===c0(t),Dm=(e,t)=>!e||!t?!1:Iz(e,t)?!0:Lz(e,t),Bm=e=>e.get()===0,bl=(e,t,n)=>{Bm(n)&&(e.typing=t)},l0=(e,t)=>{e.typing&&(bl(e,!1,t),e.add())},$z=e=>{e.typing&&(e.typing=!1,e.add())},Fz=(e,t,n)=>{Bm(t)&&n.set(Ff(e.selection))},Mz=(e,t,n,s,o,r,a)=>{const c=hl(e),l=q.extend(r||{},c);if(!Bm(s)||e.removed)return null;const f=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:f,originalEvent:a}).isDefaultPrevented()||f&&Dm(f,l))return null;t.data[n.get()]&&o.get().each(h=>{t.data[n.get()].beforeBookmark=h});const g=xP(e);if(g&&t.data.length>g){for(let h=0;h<t.data.length-1;h++)t.data[h]=t.data[h+1];t.data.length--,n.set(t.data.length)}l.bookmark=Ff(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(l),n.set(t.data.length-1);const m={level:l,lastLevel:f,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",m),e.dispatch("change",m)):e.dispatch("AddUndo",m),l},Uz=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},zz=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,a=t.data[n.get()-1];Om(e,a,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},Hz=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Om(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},jz=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,bl(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Om(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},Vz=e=>{e.clear(),e.add()},Wz=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!Dm(hl(e),t.data[0]),qz=(e,t)=>t.get()<e.data.length-1&&!e.typing,Kz=(e,t,n)=>(l0(e,t),e.beforeChange(),e.ignore(n),e.add()),Gz=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},Yz=(e,t)=>{const n=e.dom,s=ee(t)?t:e.getBody();j(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=TP(e),a=n.getAttrib(o,"border");(!a||a==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const c=n.getAttrib(o,"name")||o.id,l=nv(e);c&&e.hasVisual?n.addClass(o,l):n.removeClass(o,l)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},u0=e=>({init:{bindEvents:Ae},undoManager:{beforeChange:(t,n)=>Fz(e,t,n),add:(t,n,s,o,r,a)=>Mz(e,t,n,s,o,r,a),undo:(t,n,s)=>jz(e,t,n,s),redo:(t,n)=>Hz(e,t,n),clear:(t,n)=>Uz(e,t,n),reset:t=>Vz(t),hasUndo:(t,n)=>Wz(e,t,n),hasRedo:(t,n)=>qz(t,n),transact:(t,n,s)=>Kz(t,n,s),ignore:(t,n)=>Gz(t,n),extra:(t,n,s,o)=>zz(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>cm(e,t,n,s,o),matchAll:(t,n)=>aM(e,t,n),matchNode:(t,n,s,o)=>ps(e,t,n,s,o),canApply:t=>cM(e,t),closest:t=>iM(e,t),apply:(t,n,s)=>v_(e,t,n,s),remove:(t,n,s,o)=>h_(e,t,n,s,o),toggle:(t,n,s)=>WM(e,t,n,s),formatChanged:(t,n,s,o,r)=>VM(e,t,n,s,o,r)},editor:{getContent:t=>BL(e,t),setContent:(t,n)=>nM(e,t,n),insertContent:(t,n)=>QF(e,t,n),addVisual:t=>Yz(e,t)},selection:{getContent:(t,n)=>Sz(e,t,n)},autocompleter:{addDecoration:t=>_L(e,t),removeDecoration:()=>wL(e,x.fromDom(e.getBody()))},raw:{getModel:()=>y.none()}}),Xz=e=>{const t=f=>Xe(f)?f:{},{init:n,undoManager:s,formatter:o,editor:r,selection:a,autocompleter:c,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(f,g,m)=>s.transact(m),ignore:(f,g)=>s.ignore(g),extra:(f,g,m,h)=>s.extra(m,h)},formatter:{match:(f,g,m,h)=>o.match(f,t(g),h),matchAll:o.matchAll,matchNode:o.matchNode,canApply:f=>o.canApply(f),closest:f=>o.closest(f),apply:(f,g,m)=>o.apply(f,t(g)),remove:(f,g,m,h)=>o.remove(f,t(g)),toggle:(f,g,m)=>o.toggle(f,t(g)),formatChanged:(f,g,m,h,_)=>o.formatChanged(g,m,h,_)},editor:{getContent:f=>r.getContent(f),setContent:(f,g)=>({content:r.setContent(f,g),html:""}),insertContent:(f,g)=>(r.insertContent(f),""),addVisual:r.addVisual},selection:{getContent:(f,g)=>a.getContent(g)},autocompleter:{addDecoration:c.addDecoration,removeDecoration:c.removeDecoration},raw:{getModel:()=>y.some(l.getRawModel())}}},Jz=()=>{const e=Z(null),t=Z("");return{init:{bindEvents:Ae},undoManager:{beforeChange:Ae,add:e,undo:e,redo:e,clear:Ae,reset:Ae,hasUndo:it,hasRedo:it,transact:e,ignore:Ae,extra:Ae},formatter:{match:it,matchAll:Z([]),matchNode:Z(void 0),canApply:it,closest:t,apply:Ae,remove:Ae,toggle:Ae,formatChanged:Z({unbind:Ae})},editor:{getContent:t,setContent:Z({content:"",html:""}),insertContent:Z(""),addVisual:Ae},selection:{getContent:t},autocompleter:{addDecoration:Ae,removeDecoration:Ae},raw:{getModel:Z(y.none())}}},hs=e=>Se(e.plugins,"rtc"),Qz=e=>Ze(e.plugins,"rtc").bind(t=>y.from(t.setup)),Zz=e=>{const t=e;return Qz(e).fold(()=>(t.rtcInstance=u0(e),y.none()),n=>(t.rtcInstance=Jz(),y.some(()=>n().then(s=>(t.rtcInstance=Xz(s),s.rtc.isRemote)))))},Im=e=>e.rtcInstance?e.rtcInstance:u0(e),ft=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},e2=(e,t,n)=>{ft(e).undoManager.beforeChange(t,n)},t2=(e,t,n,s,o,r,a)=>ft(e).undoManager.add(t,n,s,o,r,a),n2=(e,t,n,s)=>ft(e).undoManager.undo(t,n,s),s2=(e,t,n)=>ft(e).undoManager.redo(t,n),o2=(e,t,n)=>{ft(e).undoManager.clear(t,n)},r2=(e,t)=>{ft(e).undoManager.reset(t)},a2=(e,t,n)=>ft(e).undoManager.hasUndo(t,n),i2=(e,t,n)=>ft(e).undoManager.hasRedo(t,n),c2=(e,t,n,s)=>ft(e).undoManager.transact(t,n,s),l2=(e,t,n)=>{ft(e).undoManager.ignore(t,n)},u2=(e,t,n,s,o)=>{ft(e).undoManager.extra(t,n,s,o)},f2=(e,t,n,s,o)=>ft(e).formatter.match(t,n,s,o),d2=(e,t,n)=>ft(e).formatter.matchAll(t,n),m2=(e,t,n,s,o)=>ft(e).formatter.matchNode(t,n,s,o),p2=(e,t)=>ft(e).formatter.canApply(t),g2=(e,t)=>ft(e).formatter.closest(t),h2=(e,t,n,s)=>{ft(e).formatter.apply(t,n,s)},b2=(e,t,n,s,o)=>{ft(e).formatter.remove(t,n,s,o)},y2=(e,t,n,s)=>{ft(e).formatter.toggle(t,n,s)},v2=(e,t,n,s,o,r)=>ft(e).formatter.formatChanged(t,n,s,o,r),C2=(e,t)=>Im(e).editor.getContent(t),E2=(e,t,n)=>Im(e).editor.setContent(t,n),_2=(e,t,n)=>Im(e).editor.insertContent(t,n),S2=(e,t,n)=>ft(e).selection.getContent(t,n),w2=(e,t)=>ft(e).editor.addVisual(t),f0=e=>ft(e).init.bindEvents(),x2=(e,t)=>ft(e).autocompleter.addDecoration(t),k2=e=>ft(e).autocompleter.removeDecoration(),A2=(e,t={})=>{const n=t.format?t.format:"html";return S2(e,n,t)},d0=e=>e.dom.length===0?(st(e),y.none()):y.some(e),N2=(e,t)=>e.filter(n=>Za.isBookmarkNode(n.dom)).bind(t?wa:wo),R2=(e,t,n,s)=>{const o=e.dom,r=t.dom,a=s?o.length:r.length;s?(Ud(o,r,!1,!s),n.setStart(r,a)):(Ud(r,o,!1,!s),n.setEnd(r,a))},T2=(e,t)=>{Un(e).each(n=>{const s=e.dom;t&&oi(n,L(s,0))?nl(s,0):!t&&ri(n,L(s,s.length))&&Md(s,s.length)})},m0=(e,t,n,s)=>{e.bind(o=>((s?Md:nl)(o.dom,s?o.dom.length:0),t.filter(gn).map(a=>R2(o,a,n,s)))).orThunk(()=>N2(t,s).or(t).filter(gn).map(r=>T2(r,s)))},O2=(e,t)=>{const n=y.from(t.firstChild).map(x.fromDom),s=y.from(t.lastChild).map(x.fromDom);e.deleteContents(),e.insertNode(t);const o=n.bind(wo).filter(gn).bind(d0),r=s.bind(wa).filter(gn).bind(d0);m0(o,n,e,!0),m0(r,s,e,!1),e.collapse(!1)},P2=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),D2=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return to({validate:!1},e.schema).serialize(r)}else return t.content},B2=(e,t,n={})=>{const s=P2(n,t);Am(e,s).each(o=>{const r=D2(e,o),a=e.selection.getRng();O2(a,a.createContextualFragment(r)),e.selection.setRng(a),ti(e,a),Nm(e,r,o)})},p0=(e,t,n)=>{if(Se(e,t)){const s=be(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var I2=(e,t)=>{let n,s;const o=(c,l)=>Ct(l,f=>e.is(f,c)),r=c=>e.getParents(c,void 0,e.getRoot()),a=()=>{n={},s={},t.on("NodeChange",c=>{const l=c.element,f=r(l),g={};Je(n,(m,h)=>{o(h,f).each(_=>{s[h]||(j(m,w=>{w(!0,{node:_,selector:h,parents:f})}),s[h]=m),g[h]=m})}),Je(s,(m,h)=>{g[h]||(delete s[h],j(m,_=>{_(!1,{node:l,selector:h,parents:f})}))})})};return{selectorChangedWithUnbind:(c,l)=>(n||a(),n[c]||(n[c]=[]),n[c].push(l),o(c,r(t.selection.getStart())).each(()=>{s[c]=n[c]}),{unbind:()=>{p0(n,c,l),p0(s,c,l)}})}};const g0=e=>!!(e&&e.ownerDocument)&&ks(x.fromDom(e.ownerDocument),x.fromDom(e)),L2=e=>e?g0(e.startContainer)&&g0(e.endContainer):!1,h0=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:a}=I2(e,s),c=(H,re)=>{const Ne=e.createRng();ee(H)&&ee(re)?(Ne.setStart(H,re),Ne.setEnd(H,re),T(Ne),N(!1)):(od(e,Ne,s.getBody(),!0),T(Ne))},l=H=>A2(s,H),f=(H,re)=>B2(s,H,re),g=H=>DC(s.getBody(),R(),H),m=H=>BC(s.getBody(),R(),H),h=(H,re)=>Rt.getBookmark(H,re),_=H=>Rt.moveToBookmark(H),w=(H,re)=>(pL(e,H,re).each(T),H),C=()=>{const H=R(),re=k();return!H||H.item?!1:H.compareEndPoints?H.compareEndPoints("StartToEnd",H)===0:!re||H.collapsed},S=()=>{const H=R(),re=s.getBody().querySelectorAll('[data-mce-selected="1"]');return re.length>0?Us(re,Ne=>e.isEditable(Ne.parentElement)):H.startContainer===H.endContainer?e.isEditable(H.startContainer):e.isEditable(H.startContainer)&&e.isEditable(H.endContainer)},N=H=>{const re=R();re.collapse(!!H),T(re)},k=()=>t.getSelection?t.getSelection():t.document.selection,R=()=>{let H;const re=(Y,ue,me)=>{try{return ue.compareBoundaryPoints(Y,me)}catch{return-1}},Ne=t.document;if(ee(s.bookmark)&&!Go(s)){const Y=Sd(s);if(Y.isSome())return Y.map(ue=>Rd(s,[ue])[0]).getOr(Ne.createRange())}try{const Y=k();Y&&!lc(Y.anchorNode)&&(Y.rangeCount>0?H=Y.getRangeAt(0):H=Ne.createRange(),H=Rd(s,[H])[0])}catch{}if(H||(H=Ne.createRange()),Na(H.startContainer)&&H.collapsed){const Y=e.getRoot();H.setStart(Y,0),H.setEnd(Y,0)}return o&&r&&(re(H.START_TO_START,H,o)===0&&re(H.END_TO_END,H,o)===0?H=r:(o=null,r=null)),H},T=(H,re)=>{if(!L2(H))return;const Ne=k();if(H=s.dispatch("SetSelectionRange",{range:H,forward:re}).range,Ne){r=H;try{Ne.removeAllRanges(),Ne.addRange(H)}catch{}re===!1&&Ne.extend&&(Ne.collapse(H.endContainer,H.endOffset),Ne.extend(H.startContainer,H.startOffset)),o=Ne.rangeCount>0?Ne.getRangeAt(0):null}if(!H.collapsed&&H.startContainer===H.endContainer&&(Ne!=null&&Ne.setBaseAndExtent)&&H.endOffset-H.startOffset<2&&H.startContainer.hasChildNodes()){const ue=H.startContainer.childNodes[H.startOffset];ue&&ue.nodeName==="IMG"&&(Ne.setBaseAndExtent(H.startContainer,H.startOffset,H.endContainer,H.endOffset),(Ne.anchorNode!==H.startContainer||Ne.focusNode!==H.endContainer)&&Ne.setBaseAndExtent(ue,0,ue,1))}s.dispatch("AfterSetSelectionRange",{range:H,forward:re})},F=H=>(f(e.getOuterHTML(H)),H),G=()=>dL(s.getBody(),R()),W=(H,re)=>mL(e,R(),H,re),B=()=>{const H=k(),re=H==null?void 0:H.anchorNode,Ne=H==null?void 0:H.focusNode;if(!H||!re||!Ne||lc(re)||lc(Ne))return!0;const Y=e.createRng(),ue=e.createRng();try{Y.setStart(re,H.anchorOffset),Y.collapse(!0),ue.setStart(Ne,H.focusOffset),ue.collapse(!0)}catch{return!0}return Y.compareBoundaryPoints(Y.START_TO_START,ue)<=0},nt={dom:e,win:t,serializer:n,editor:s,expand:(H={type:"word"})=>T(Ko(e).expand(R(),H)),collapse:N,setCursorLocation:c,getContent:l,setContent:f,getBookmark:h,moveToBookmark:_,select:w,isCollapsed:C,isEditable:S,isForward:B,setNode:F,getNode:G,getSel:k,setRng:T,getRng:R,getStart:g,getEnd:m,getSelectedBlocks:W,normalize:()=>{const H=R(),re=k();if(!QD(re)&&Hc(s)){const Ne=Xc(e,H);return Ne.each(Y=>{T(Y,B())}),Ne.getOr(H)}return H},selectorChanged:(H,re)=>(a(H,re),nt),selectorChangedWithUnbind:a,getScrollContainer:()=>{let H,re=e.getRoot();for(;re&&re.nodeName!=="BODY";){if(re.scrollHeight>re.clientHeight){H=re;break}re=re.parentNode}return H},scrollIntoView:(H,re)=>{ee(H)?II(s,H,re):ti(s,R(),re)},placeCaretAt:(H,re)=>T(dC(H,re,s.getDoc())),getBoundingClientRect:()=>{const H=R();return H.collapsed?L.fromRangeStart(H).getClientRects()[0]:H.getBoundingClientRect()},destroy:()=>{t=o=r=null,gt.destroy()}},Rt=Za(nt),gt=iC(nt,s);return nt.bookmarkManager=Rt,nt.controlSelection=gt,nt},$2=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.attr("tabindex",a.attr("data-mce-tabindex")),a.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,a=t.url_converter,c=t.url_converter_scope;let l=s.length;for(;l--;){const f=s[l];let g=f.attr(r);g!==void 0?(f.attr(o,g.length>0?g:null),f.attr(r,null)):(g=f.attr(o),o==="style"?g=n.serializeStyle(n.parseStyle(g),f.name):a&&(g=a.call(c,g,o,f.name)),f.attr(o,g.length>0?g:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let a=r.attr("class");a&&(a=a.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",a.length>0?a:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let a=s.length;for(;a--;){const c=s[a];c.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(y.from(c.firstChild).exists(f=>{var g;return!hc((g=f.value)!==null&&g!==void 0?g:"")})?c.unwrap():c.remove())}}),e.addNodeFilter("noscript",s=>{var o;let r=s.length;for(;r--;){const a=s[r].firstChild;a&&(a.value=Gs.decode((o=a.value)!==null&&o!==void 0?o:""))}}),e.addNodeFilter("script,style",(s,o)=>{var r;const a=l=>l.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let c=s.length;for(;c--;){const l=s[c],f=l.firstChild,g=(r=f==null?void 0:f.value)!==null&&r!==void 0?r:"";if(o==="script"){const m=l.attr("type");m&&l.attr("type",m==="mce-no/type"?null:m.replace(/^mce\-/,"")),t.element_format==="xhtml"&&f&&g.length>0&&(f.value=`// <![CDATA[
`+a(g)+`
// ]]>`)}else t.element_format==="xhtml"&&f&&g.length>0&&(f.value=`<!--
`+a(g)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],a=r.value;t.preserve_cdata&&(a==null?void 0:a.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):(a==null?void 0:a.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(a).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const a=s[r];a.type===7?a.remove():a.type===1&&o==="input"&&!a.attr("type")&&a.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{j(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)})},F2=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},M2=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const a=document.implementation;if(a.createHTMLDocument){const c=a.createHTMLDocument("");q.each(r.nodeName==="BODY"?r.childNodes:[r],l=>{c.body.appendChild(c.importNode(l,!0))}),r.nodeName!=="BODY"?r=c.body.firstChild:r=c.body,s=o.doc,o.doc=c}return SB(e,{...n,node:r}),s&&(o.doc=s),r},U2=(e,t)=>ee(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,z2=(e,t,n)=>U2(e,n)?M2(e,t,n):t,H2=(e,t,n)=>{q.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},j2=(e,t,n)=>!t.no_events&&e?wB(e,{...t,content:n}).content:n,V2=(e,t,n)=>{const s=Os(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||pc(x.fromDom(t))?s:q.trim(s)},W2=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return F2(o),o},q2=(e,t,n)=>to(e,t).serialize(n),K2=(e,t,n,s,o)=>{const r=q2(t,n,s);return j2(e,o,r)},G2=(e,t)=>{const n=["data-mce-selected"],s=t&&t.dom?t.dom:Ve.DOM,o=t&&t.schema?t.schema:Ys(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const r=Hr(e,o);$2(r,e,s);const a=(c,l={})=>{const f={format:"html",...l},g=z2(t,c,f),m=V2(s,g,f),h=W2(r,m,f);return f.format==="tree"?h:K2(t,e,o,h,f)};return{schema:o,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:a,addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:ae(H2,r,n),getTempAttrs:Z(n),getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},b0=(e,t)=>{const n=G2(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Y2="html",X2=(e,t)=>({...e,format:t,get:!0,getInner:!0}),J2=(e,t={})=>{const n=t.format?t.format:Y2,s=X2(t,n);return X_(e,s).fold(Gt,o=>{const r=C2(e,o);return J_(e,r,o)})},Q2="html",Z2=(e,t)=>({format:Q2,...e,set:!0,content:t}),Lm=(e,t,n={})=>{const s=Z2(n,t);return Am(e,s).map(o=>{const r=E2(e,o.content,o);return Nm(e,r.html,o),r.content}).getOr(t)},eH="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),tH="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),nH="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),y0=[{name:"template",replacedWith:"Advanced Template"}],v0=(e,t)=>{const n=be(t,s=>Se(e,s));return vo(n)},sH=e=>{const t=v0(e,eH),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),vo(t)},oH=e=>v0(e,tH),C0=(e,t)=>{const n=q.makeMap(e.plugins," "),o=be(t,r=>Se(n,r));return vo(o)},rH=e=>C0(e,nH),aH=e=>C0(e,y0.map(t=>t.name)),iH=(e,t)=>{const n=sH(e),s=rH(t),o=s.length>0,r=n.length>0,a=t.theme==="mobile";if(o||r||a){const c=`
- `,l=a?`

Themes:${c}mobile`:"",f=o?`

Plugins:${c}${s.join(c)}`:"",g=r?`

Options:${c}${n.join(c)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+l+f+g)}},cH=e=>Ct(y0,t=>t.name===e).fold(()=>e,t=>`${e}, replaced by ${t.replacedWith}`),lH=(e,t)=>{const n=oH(e),s=aH(t),o=s.length>0,r=n.length>0;if(o||r){const a=`
- `,c=o?`

Plugins:${a}${s.map(cH).join(a)}`:"",l=r?`

Options:${a}${n.join(a)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+c+l)}},uH=(e,t)=>{iH(e,t),lH(e,t)},yl=Ve.DOM,fH=e=>{yl.setStyle(e.id,"display",e.orgDisplay)},vl=e=>y.from(e).each(t=>t.destroy()),dH=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},mH=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),yl.unbind(t,"submit reset",e.formEventDelegate))},pH=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ee(o==null?void 0:o.nextSibling)&&yl.remove(o.nextSibling),xB(e),e.editorManager.remove(e),!e.inline&&s&&fH(e),kB(e),yl.remove(e.getContainer()),vl(t),vl(n),e.destroy()}},gH=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),vl(n),vl(s)),mH(e),dH(e),e.destroyed=!0}},Cl=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Se(e,o)}})(),jr=jt.ModelManager,E0=(e,t)=>t.dom[e],_0=(e,t)=>parseInt(as(t,e),10),hH=ae(E0,"clientWidth"),bH=ae(E0,"clientHeight"),yH=ae(_0,"margin-top"),vH=ae(_0,"margin-left"),CH=e=>e.dom.getBoundingClientRect(),EH=(e,t,n)=>{const s=hH(e),o=bH(e);return t>=0&&n>=0&&t<=s&&n<=o},_H=(e,t,n,s)=>{const o=CH(t),r=e?o.left+t.dom.clientLeft+vH(t):0,a=e?o.top+t.dom.clientTop+yH(t):0,c=n-r,l=s-a;return{x:c,y:l}},SH=(e,t,n)=>{const s=x.fromDom(e.getBody()),o=e.inline?s:$R(s),r=_H(e.inline,o,t,n);return EH(o,r.x,r.y)},wH=e=>y.from(e).map(x.fromDom),xH=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return wH(t).map(Er).getOr(!1)};var kH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const S0=e=>{const t=[],n=()=>{const h=e.theme;return h&&h.getNotificationManagerImpl?h.getNotificationManagerImpl():kH()},s=()=>y.from(t[0]),o=(h,_)=>h.type===_.type&&h.text===_.text&&!h.progressBar&&!h.timeout&&!_.progressBar&&!_.timeout,r=()=>{j(t,h=>{h.reposition()})},a=h=>{t.push(h)},c=h=>{da(t,_=>_===h).each(_=>{t.splice(_,1)})},l=(h,_=!0)=>e.removed||!xH(e)?{}:(_&&e.dispatch("BeforeOpenNotification",{notification:h}),Ct(t,w=>o(n().getArgs(w),h)).getOrThunk(()=>{e.editorManager.setActive(e);const w=n().open(h,()=>{c(w),r(),s().fold(()=>e.focus(),C=>xC(x.fromDom(C.getEl())))});return a(w),r(),e.dispatch("OpenNotification",{notification:{...w}}),w})),f=()=>{s().each(h=>{n().close(h),c(h),r()})},g=Z(t);return(h=>{h.on("SkinLoaded",()=>{const _=mP(h);_&&l({text:_,type:"warning",timeout:0},!1),r()}),h.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),h.on("remove",()=>{j(t.slice(),_=>{n().close(_)})})})(e),{open:l,close:f,getNotifications:g}},Vr=jt.PluginManager,tr=jt.ThemeManager;var AH=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const w0=e=>{let t=[];const n=()=>{const C=e.theme;return C&&C.getWindowManagerImpl?C.getWindowManagerImpl():AH()},s=(C,S)=>(...N)=>S?S.apply(C,N):void 0,o=C=>{e.dispatch("OpenWindow",{dialog:C})},r=C=>{e.dispatch("CloseWindow",{dialog:C})},a=C=>{t.push(C),o(C)},c=C=>{r(C),t=be(t,S=>S!==C),t.length===0&&e.focus()},l=()=>y.from(t[t.length-1]),f=C=>{e.editorManager.setActive(e),_d(e),e.ui.show();const S=C();return a(S),S},g=(C,S)=>f(()=>n().open(C,S,c)),m=C=>f(()=>n().openUrl(C,c)),h=(C,S,N)=>{const k=n();k.alert(C,s(N||k,S))},_=(C,S,N)=>{const k=n();k.confirm(C,s(N||k,S))},w=()=>{l().each(C=>{n().close(C),c(C)})};return e.on("remove",()=>{j(t,C=>{n().close(C)})}),{open:g,openUrl:m,alert:h,confirm:_,close:w}},x0=(e,t)=>{e.notificationManager.open({type:"error",text:t})},El=(e,t)=>{e._skinLoaded?x0(e,t):e.on("SkinLoaded",()=>{x0(e,t)})},NH=(e,t)=>{El(e,jn.translate(["Failed to upload image: {0}",t]))},fi=(e,t,n)=>{eC(e,t,{message:n}),console.error(n)},di=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,RH=(e,t,n)=>{fi(e,"PluginLoadError",di("plugin",t,n))},TH=(e,t,n)=>{fi(e,"IconsLoadError",di("icons",t,n))},OH=(e,t,n)=>{fi(e,"LanguageLoadError",di("language",t,n))},PH=(e,t,n)=>{fi(e,"ThemeLoadError",di("theme",t,n))},DH=(e,t,n)=>{fi(e,"ModelLoadError",di("model",t,n))},BH=(e,t,n)=>{const s=jn.translate(["Failed to initialize plugin: {0}",t]);eC(e,"PluginLoadError",{message:s}),_l(s,n),El(e,s)},_l=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},IH=e=>/^[a-z0-9\-]+$/i.test(e),LH=e=>k0(e,iP(e)),$H=e=>k0(e,Jy(e)),k0=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return Le(t,r=>IH(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},FH=e=>{e.contentCSS=e.contentCSS.concat(LH(e),$H(e))},MH=e=>e?ln(e.getElementsByTagName("img")):[],UH=(e,t)=>{const n={};return{findAll:(o,r=yt)=>{const a=be(MH(o),l=>{const f=l.src;return l.hasAttribute("data-mce-bogus")||l.hasAttribute("data-mce-placeholder")||!f||f===Ie.transparentSrc?!1:Pt(f,"blob:")?!e.isUploaded(f)&&r(l):Pt(f,"data:")?r(l):!1}),c=Le(a,l=>{const f=l.src;if(Se(n,f))return n[f].then(g=>ne(g)?g:{image:l,blobInfo:g.blobInfo});{const g=sU(t,f).then(m=>(delete n[f],{image:l,blobInfo:m})).catch(m=>(delete n[f],m));return n[f]=g,g}});return Promise.all(c)}}},A0=()=>{let n={};const s=(h,_)=>({status:h,resultUri:_}),o=h=>h in n;return{hasBlobUri:o,getResultUri:h=>{const _=n[h];return _?_.resultUri:null},isPending:h=>o(h)?n[h].status===1:!1,isUploaded:h=>o(h)?n[h].status===2:!1,markPending:h=>{n[h]=s(1,null)},markUploaded:(h,_)=>{n[h]=s(2,_)},removeFailed:h=>{delete n[h]},destroy:()=>{n={}}}};let zH=0;const HH=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},jH=e=>e+zH+++HH(),VH=()=>{let e=[];const t=m=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[m.toLowerCase()]||"dat",n=(m,h,_,w,C)=>{if(ne(m))return s({id:m,name:w,filename:C,blob:h,base64:_});if(Xe(m))return s(m);throw new Error("Unknown input type")},s=m=>{if(!m.blob||!m.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const h=m.id||jH("blobid"),_=m.name||h,w=m.blob;return{id:Z(h),name:Z(_),filename:Z(m.filename||_+"."+t(w.type)),blob:Z(w),base64:Z(m.base64),blobUri:Z(m.blobUri||URL.createObjectURL(w)),uri:Z(m.uri)}},o=m=>{a(m.id())||e.push(m)},r=m=>Ct(e,m).getOrUndefined(),a=m=>r(h=>h.id()===m);return{create:n,add:o,get:a,getByUri:m=>r(h=>h.blobUri()===m),getByData:(m,h)=>r(_=>_.base64()===m&&_.blob().type===h),findFirst:r,removeByUri:m=>{e=be(e,h=>h.blobUri()===m?(URL.revokeObjectURL(h.blobUri()),!1):!0)},destroy:()=>{j(e,m=>{URL.revokeObjectURL(m.blobUri())}),e=[]}}},WH=(e,t)=>{const n={},s=(C,S)=>C?C.replace(/\/$/,"")+"/"+S.replace(/^\//,""):S,o=(C,S)=>new Promise((N,k)=>{const R=new XMLHttpRequest;R.open("POST",t.url),R.withCredentials=t.credentials,R.upload.onprogress=F=>{S(F.loaded/F.total*100)},R.onerror=()=>{k("Image upload failed due to a XHR Transport error. Code: "+R.status)},R.onload=()=>{if(R.status<200||R.status>=300){k("HTTP Error: "+R.status);return}const F=JSON.parse(R.responseText);if(!F||!ne(F.location)){k("Invalid JSON: "+R.responseText);return}N(s(t.basePath,F.location))};const T=new FormData;T.append("file",C.blob(),C.filename()),R.send(T)}),r=$e(t.handler)?t.handler:o,a=()=>new Promise(C=>{C([])}),c=(C,S)=>({url:S,blobInfo:C,status:!0}),l=(C,S)=>({url:"",blobInfo:C,status:!1,error:S}),f=(C,S)=>{q.each(n[C],N=>{N(S)}),delete n[C]},g=(C,S,N)=>(e.markPending(C.blobUri()),new Promise(k=>{let R,T;try{const F=()=>{R&&(R.close(),T=Ae)},G=B=>{F(),e.markUploaded(C.blobUri(),B),f(C.blobUri(),c(C,B)),k(c(C,B))},W=B=>{F(),e.removeFailed(C.blobUri()),f(C.blobUri(),l(C,B)),k(l(C,B))};T=B=>{B<0||B>100||y.from(R).orThunk(()=>y.from(N).map($u)).each(D=>{R=D,D.progressBar.value(B)})},S(C,T).then(G,B=>{W(ne(B)?{message:B}:B)})}catch(F){k(l(C,F))}})),m=C=>C===o,h=C=>{const S=C.blobUri();return new Promise(N=>{n[S]=n[S]||[],n[S].push(N)})},_=(C,S)=>(C=q.grep(C,N=>!e.isUploaded(N.blobUri())),Promise.all(q.map(C,N=>e.isPending(N.blobUri())?h(N):g(N,r,S))));return{upload:(C,S)=>!t.url&&m(r)?a():_(C,S)}},N0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),R0=(e,t)=>WH(t,{url:eP(e),basePath:tP(e),credentials:nP(e),handler:sP(e)}),qH=e=>{const t=A0(),n=R0(e,t);return{upload:(s,o=!0)=>n.upload(s,o?N0(e):void 0)}},KH=e=>{const t=VH();let n,s;const o=A0(),r=[],a=R=>T=>e.selection?R(T):[],c=R=>R+(R.indexOf("?")===-1?"?":"&")+new Date().getTime(),l=(R,T,F)=>{let G=0;do G=R.indexOf(T,G),G!==-1&&(R=R.substring(0,G)+F+R.substr(G+T.length),G+=F.length-T.length+1);while(G!==-1);return R},f=(R,T,F)=>{const G=`src="${F}"${F===Ie.transparentSrc?' data-mce-placeholder="1"':""}`;return R=l(R,`src="${T}"`,G),R=l(R,'data-mce-src="'+T+'"','data-mce-src="'+F+'"'),R},g=(R,T)=>{j(e.undoManager.data,F=>{F.type==="fragmented"?F.fragments=Le(F.fragments,G=>f(G,R,T)):F.content=f(F.content,R,T)})},m=(R,T)=>{const F=e.convertURL(T,"src");g(R.src,T),Hs(x.fromDom(R),{src:Ky(e)?c(T):T,"data-mce-src":F})},h=()=>(n||(n=R0(e,o)),S().then(a(R=>{const T=Le(R,F=>F.blobInfo);return n.upload(T,N0(e)).then(a(F=>{const G=[];let W=!1;const B=Le(F,(D,Q)=>{const{blobInfo:ce,image:de}=R[Q];let ye=!1;return D.status&&QO(e)?(D.url&&!Mt(de.src,D.url)&&(W=!0),t.removeByUri(de.src),hs(e)||m(de,D.url)):D.error&&(D.error.remove&&(g(de.src,Ie.transparentSrc),G.push(de),ye=!0),NH(e,D.error.message)),{element:de,status:D.status,uploadUri:D.url,blobInfo:ce,removed:ye}});return G.length>0&&!hs(e)?e.undoManager.transact(()=>{j(G,D=>{e.dom.remove(D),t.removeByUri(D.src)})}):W&&e.undoManager.dispatchChange(),B}))}))),_=()=>qy(e)?h():Promise.resolve([]),w=R=>Us(r,T=>T(R)),C=R=>{r.push(R)},S=()=>(s||(s=UH(o,t)),s.findAll(e.getBody(),w).then(a(R=>{const T=be(R,F=>ne(F)?(El(e,F),!1):!0);return hs(e)||j(T,F=>{g(F.image.src,F.blobInfo.blobUri()),F.image.src=F.blobInfo.blobUri(),F.image.removeAttribute("data-mce-src")}),T}))),N=()=>{t.destroy(),o.destroy(),s=n=null},k=R=>R.replace(/src="(blob:[^"]+)"/g,(T,F)=>{const G=o.getResultUri(F);if(G)return'src="'+G+'"';let W=t.getByUri(F);return W||(W=cn(e.editorManager.get(),(B,D)=>B||D.editorUpload&&D.editorUpload.blobCache.getByUri(F),void 0)),W?'src="data:'+W.blob().type+";base64,"+W.base64()+'"':T});return e.on("SetContent",()=>{qy(e)?_():S()}),e.on("RawSaveContent",R=>{R.content=k(R.content)}),e.on("GetContent",R=>{R.source_view||R.format==="raw"||R.format==="tree"||(R.content=k(R.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",R=>{j(R,T=>{const F=T.attr("src");if(!F||t.getByUri(F))return;const G=o.getResultUri(F);G&&T.attr("src",G)})})}),{blobCache:t,addFilter:C,uploadImages:h,uploadImagesAuto:_,scanForImages:S,destroy:N}},GH=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[a,o,r]:[o,a,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,a)=>te(o)&&o.hasAttribute("href"),onformat:(o,r,a)=>{q.each(a,(c,l)=>{t.setAttrib(o,l,c)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},T0={remove_similar:!0,inherit:!1},Wr={selector:"td,th",...T0},YH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Wr},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Wr},tablecellbordercolor:{styles:{borderColor:"%value"},...Wr},tablecellclass:{classes:["%value"],...Wr},tableclass:{selector:"table",classes:["%value"],...T0},tablecellborderstyle:{styles:{borderStyle:"%value"},...Wr},tablecellborderwidth:{styles:{borderWidth:"%value"},...Wr}},XH=Z(YH),JH=e=>{const t={},n=a=>ee(a)?t[a]:t,s=a=>Se(t,a),o=(a,c)=>{a&&(ne(a)?(at(c)||(c=[c]),j(c,l=>{Kt(l.deep)&&(l.deep=!Sn(l)),Kt(l.split)&&(l.split=!Sn(l)||St(l)),Kt(l.remove)&&Sn(l)&&!St(l)&&(l.remove="none"),Sn(l)&&St(l)&&(l.mixed=!0,l.block_expand=!0),ne(l.classes)&&(l.classes=l.classes.split(/\s+/))}),t[a]=c):Je(a,(l,f)=>{o(f,l)}))},r=a=>(a&&t[a]&&delete t[a],t);return o(GH(e)),o(XH()),o(hP(e)),{get:n,has:s,register:o,unregister:r}},Sl=q.each,kn=Ve.DOM,$m=e=>ee(e)&&Xe(e),O0=(e,t)=>{const n=t&&t.schema||Ys({}),s=(l,f)=>{f.classes.length>0&&kn.addClass(l,f.classes.join(" ")),kn.setAttribs(l,f.attrs)},o=l=>{const f=ne(l)?{name:l,classes:[],attrs:{}}:l,g=kn.create(f.name);return s(g,f),g},r=(l,f)=>{const g=n.getElementRule(l.nodeName.toLowerCase()),m=g==null?void 0:g.parentsRequired;return m&&m.length?f&&Ge(m,f)?f:m[0]:!1},a=(l,f,g)=>{let m;const h=f[0],_=$m(h)?h.name:void 0,w=r(l,_);if(w)_===w?(m=h,f=f.slice(1)):m=w;else if(h)m=h,f=f.slice(1);else if(!g)return l;const C=m?o(m):kn.create("div");C.appendChild(l),g&&q.each(g,N=>{const k=o(N);C.insertBefore(k,l)});const S=$m(m)?m.siblings:void 0;return a(C,f,S)},c=kn.create("div");if(e.length>0){const l=e[0],f=o(l),g=$m(l)?l.siblings:void 0;c.appendChild(a(f,e.slice(1),g))}return c},QH=e=>{e=q.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,a,c)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":q.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(a==="["){const l=c.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},ZH=e=>ne(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),q.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=q.map(t.split(/(?:~\+|~|\+)/),QH),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],ej=(e,t)=>{let n="",s=bP(e);if(s==="")return"";const o=h=>ne(h)?h.replace(/%(\w+)/g,""):"",r=(h,_)=>kn.getStyle(_??e.getBody(),h,!0);if(ne(t)){const h=e.formatter.get(t);if(!h)return"";t=h[0]}if("preview"in t){const h=t.preview;if(h===!1)return"";s=h||s}let a=t.block||t.inline||"span",c;const l=ZH(t.selector);l.length>0?(l[0].name||(l[0].name=a),a=t.selector,c=O0(l,e)):c=O0([a],e);const f=kn.select(a,c)[0]||c.firstChild;Sl(t.styles,(h,_)=>{const w=o(h);w&&kn.setStyle(f,_,w)}),Sl(t.attributes,(h,_)=>{const w=o(h);w&&kn.setAttrib(f,_,w)}),Sl(t.classes,h=>{const _=o(h);kn.hasClass(f,_)||kn.addClass(f,_)}),e.dispatch("PreviewFormats"),kn.setStyles(c,{position:"absolute",left:-65535}),e.getBody().appendChild(c);const g=r("fontSize"),m=/px$/.test(g)?parseInt(g,10):0;return Sl(s.split(" "),h=>{let _=r(h,f);if(!(h==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(_)&&(_=r(h),zc(_).toLowerCase()==="#ffffff"))&&!(h==="color"&&zc(_).toLowerCase()==="#000000")){if(h==="font-size"&&/em|%$/.test(_)){if(m===0)return;_=parseFloat(_)/(/%$/.test(_)?100:1)*m+"px"}h==="border"&&_&&(n+="padding:0 2px;"),n+=h+":"+_+";"}}),e.dispatch("AfterPreviewFormats"),kn.remove(c),n},tj=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},P0=e=>{const t=JH(e),n=wt({});return tj(e),yM(e),hs(e)||zM(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{h2(e,s,o,r)},remove:(s,o,r,a)=>{b2(e,s,o,r,a)},toggle:(s,o,r)=>{y2(e,s,o,r)},match:(s,o,r,a)=>f2(e,s,o,r,a),closest:s=>g2(e,s),matchAll:(s,o)=>d2(e,s,o),matchNode:(s,o,r,a)=>m2(e,s,o,r,a),canApply:s=>p2(e,s),formatChanged:(s,o,r,a)=>v2(e,n,s,o,r,a),getCssText:ae(ej,e)}},D0=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},nj=(e,t,n)=>{const s=wt(!1),o=l=>{bl(t,!1,n),t.add({},l)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",l=>{const f=l.command;D0(f)||(l0(t,n),t.beforeChange())}),e.on("ExecCommand",l=>{const f=l.command;D0(f)||o(l)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",l=>{const f=l.keyCode;l.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||f===45||l.ctrlKey)&&(o(),e.nodeChanged()),(f===46||f===8)&&e.nodeChanged(),s.get()&&t.typing&&!Dm(hl(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged()))}),e.on("keydown",l=>{const f=l.keyCode;if(l.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45){t.typing&&o(l);return}const g=l.ctrlKey&&!l.altKey||l.metaKey;(f<16||f>20)&&f!==224&&f!==91&&!t.typing&&!g&&(t.beforeChange(),bl(t,!0,n),t.add({},l),s.set(!0))}),e.on("mousedown",l=>{t.typing&&o(l)});const r=l=>l.inputType==="insertReplacementText",a=l=>l.inputType==="insertText"&&l.data===null,c=l=>l.inputType==="insertFromPaste"||l.inputType==="insertFromDrop";e.on("input",l=>{l.inputType&&(r(l)||a(l)||c(l))&&o(l)}),e.on("AddUndo Undo Redo ClearUndos",l=>{l.isDefaultPrevented()||e.nodeChanged()})},sj=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},B0=e=>{const t=Xs(),n=wt(0),s=wt(0),o={data:[],typing:!1,beforeChange:()=>{e2(e,n,t)},add:(r,a)=>t2(e,o,s,n,t,r,a),dispatchChange:()=>{e.setDirty(!0);const r=hl(e);r.bookmark=Ff(e.selection),e.dispatch("change",{level:r,lastLevel:Xi(o.data,s.get()).getOrUndefined()})},undo:()=>n2(e,o,n,s),redo:()=>s2(e,s,o.data),clear:()=>{o2(e,o,s)},reset:()=>{r2(e,o)},hasUndo:()=>a2(e,o,s),hasRedo:()=>i2(e,o,s),transact:r=>c2(e,o,n,r),ignore:r=>{l2(e,n,r)},extra:(r,a)=>{u2(e,o,s,r,a)}};return hs(e)||nj(e,o,n),sj(e),o},oj=[9,27,ie.HOME,ie.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ie.DOWN,ie.UP,ie.LEFT,ie.RIGHT].concat(Ie.browser.isFirefox()?[224]:[]),I0="data-mce-placeholder",L0=e=>e.type==="keydown"||e.type==="keyup",$0=e=>{const t=e.keyCode;return t===ie.BACKSPACE||t===ie.DELETE},rj=e=>{if(L0(e)){const t=e.keyCode;return!$0(e)&&(ie.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Ge(oj,t))}else return!1},aj=e=>L0(e)&&!($0(e)||e.type==="keyup"&&e.keyCode===229),ij=(e,t,n)=>{if(pt(x.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},cj=e=>{var t;const n=e.dom,s=fn(e),o=(t=dP(e))!==null&&t!==void 0?t:"",r=(a,c)=>{if(rj(a))return;const l=e.getBody(),f=aj(a)?!1:ij(n,l,s);(n.getAttrib(l,I0)!==""!==f||c)&&(n.setAttrib(l,I0,f?o:null),n.setAttrib(l,"aria-placeholder",f?o:null),DB(e,f),e.on(f?"keydown":"keyup",r),e.off(f?"keyup":"keydown",r))};ss(o)&&e.on("init",a=>{r(a,!0),e.on("change SetContent ExecCommand",r),e.on("paste",c=>wn.setEditorTimeout(e,()=>r(c)))})},lj=(e,t)=>({block:e,position:t}),uj=(e,t)=>({from:e,to:t}),Fm=(e,t)=>{const n=x.fromDom(e),s=x.fromDom(t.container());return sl(n,s).map(o=>lj(o,t))},fj=e=>!Fe(e.from.block,e.to.block),F0=(e,t)=>xo(t,o=>Ta(o)||Hn(o.dom),o=>Fe(o,e)).filter(nn).getOr(e),dj=(e,t)=>{const n=x.fromDom(e);return Fe(F0(n,t.from.block),F0(n,t.to.block))},mj=e=>Qe(e.from.block.dom)===!1&&Qe(e.to.block.dom)===!1,pj=e=>{const t=n=>Nb(n)||bf(n.dom);return t(e.from.block)&&t(e.to.block)},gj=(e,t,n)=>ut(n.position.getNode())&&!pt(n.block)?Br(!1,n.block.dom).bind(s=>s.isEqual(n.position)?Cn(t,e,s).bind(o=>Fm(e,o)):y.some(n)).getOr(n):n,hj=(e,t,n)=>{const s=Fm(e,L.fromRangeStart(n)),o=s.bind(r=>Cn(t,e,r.position).bind(a=>Fm(e,a).map(c=>gj(e,t,c))));return Yt(s,o,uj).filter(r=>fj(r)&&dj(e,r)&&mj(r)&&pj(r))},bj=(e,t,n)=>n.collapsed?hj(e,t,n):y.none(),yj=e=>{const t=Bt(e);return da(t,yn).fold(Z(t),n=>t.slice(0,n))},M0=e=>{const t=yj(e);return j(t,st),t},U0=(e,t)=>{const n=Bs(t,e);return Ct(n.reverse(),s=>pt(s)).each(st)},vj=e=>be(tb(e),t=>!pt(t)).length===0,Cj=(e,t,n,s)=>{if(pt(n))return Oo(n),Jt(n.dom);vj(s)&&pt(t)&&bn(s,x.fromTag("br"));const o=En(n.dom,L.before(s.dom));return j(M0(t),r=>{bn(s,r)}),U0(e,t),o},Ej=(e,t,n)=>{if(pt(n)){if(pt(t)){const r=fa((a=>{const c=(l,f)=>Zu(l).fold(()=>f,g=>mc(g)?c(g,f.concat($o(g))):f);return c(a,[])})(n),(a,c)=>(mb(a,c),c),gc());_r(t),Et(t,r)}return st(n),Jt(t.dom)}const s=ds(n.dom);return j(M0(t),o=>{Et(n,o)}),U0(e,t),s},_j=(e,t)=>{const n=Bs(t,e);return y.from(n[n.length-1])},Sj=(e,t)=>ks(t,e)?_j(t,e):y.none(),z0=(e,t)=>{Br(e,t.dom).bind(n=>y.from(n.getNode())).map(x.fromDom).filter(To).each(st)},H0=(e,t,n)=>(z0(!0,t),z0(!1,n),Sj(t,n).fold(ae(Ej,e,t,n),ae(Cj,e,t,n))),j0=(e,t,n,s)=>t?H0(e,s,n):H0(e,n,s),Mm=(e,t)=>{const n=x.fromDom(e.getBody());return bj(n.dom,t,e.selection.getRng()).map(o=>()=>{j0(n,t,o.from.block,o.to.block).each(r=>{e.selection.setRng(r.toRange())})})},wj=(e,t)=>{const n=t.getRng();return Yt(sl(e,x.fromDom(n.startContainer)),sl(e,x.fromDom(n.endContainer)),(s,o)=>Fe(s,o)?y.none():y.some(()=>{n.deleteContents(),j0(e,!0,s,o).each(r=>{t.setRng(r.toRange())})})).getOr(y.none())},V0=(e,t)=>{const n=x.fromDom(t),s=ae(Fe,e);return Ns(n,Ta,s).isSome()},xj=(e,t)=>V0(e,t.startContainer)||V0(e,t.endContainer),kj=(e,t)=>{const n=En(e.dom,L.fromRangeStart(t)).isNone(),s=sn(e.dom,L.fromRangeEnd(t)).isNone();return!xj(e,t)&&n&&s},Aj=e=>y.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Nj=e=>{const t=x.fromDom(e.getBody()),n=e.selection.getRng();return kj(t,n)?Aj(e):wj(t,e.selection)},Um=(e,t)=>e.selection.isCollapsed()?y.none():Nj(e),Is=(e,t,n,s,o)=>y.from(t._selectionOverrides.showCaret(e,n,s,o)),Rj=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},mi=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?y.none():y.some(Rj(t)),Tj=(e,t,n)=>{const s=Kf(1,e.getBody(),t),o=L.fromRangeStart(s),r=o.getNode();if(Wa(r))return Is(1,e,r,!o.isAtEnd(),!1);const a=o.getNode(!0);if(Wa(a))return Is(1,e,a,!1,!1);const c=Jo(e.dom.getRoot(),o.getNode());return Wa(c)?Is(1,e,c,!1,n):y.none()},zm=(e,t,n)=>t.collapsed?Tj(e,t,n).getOr(t):t,Oj=e=>so(e)||ni(e),Pj=e=>oo(e)||si(e),Dj=(e,t)=>{z(t)&&t.data.length===0&&e.remove(t)},W0=(e,t,n,s,o,r)=>{Is(s,e,r.getNode(!o),o,!0).each(a=>{if(t.collapsed){const c=t.cloneRange();o?c.setEnd(a.startContainer,a.startOffset):c.setStart(a.endContainer,a.endOffset),c.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),Dj(e.dom,n)},Bj=(e,t)=>{const n=e.selection.getRng();if(!z(n.commonAncestorContainer))return y.none();const s=t?xt.Forwards:xt.Backwards,o=fs(e.getBody()),r=ae(Gf,t?o.next:o.prev),a=t?Oj:Pj,c=Xa(s,e.getBody(),n),l=r(c),f=l&&xn(t,l);if(!f||!Lc(c,f))return y.none();if(a(f))return y.some(()=>W0(e,n,c.getNode(),s,t,f));const g=r(f);return g&&a(g)&&Lc(f,g)?y.some(()=>W0(e,n,c.getNode(),s,t,g)):y.none()},Hm=(e,t)=>Bj(e,t),jm=(e,t)=>{const n=e.getBody();return t?Jt(n).filter(so):ds(n).filter(oo)},Vm=e=>{const t=e.selection.getRng();return!t.collapsed&&(jm(e,!0).exists(n=>n.isEqual(L.fromRangeStart(t)))||jm(e,!1).exists(n=>n.isEqual(L.fromRangeEnd(t))))},Ij=e=>ee(e)&&(Ta(x.fromDom(e))||Ra(x.fromDom(e))),dn=cs.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Lj=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return te(n)&&n.getAttribute("data-mce-caret")===s},$j=(e,t,n,s)=>{const o=r=>mc(x.fromDom(r))&&!ls(n,s,e);return bv(!t,n).fold(()=>bv(t,s).fold(it,o),o)},q0=(e,t,n,s)=>{const o=s.getNode(!t);return sl(x.fromDom(e),x.fromDom(n.getNode())).map(r=>pt(r)?dn.remove(r.dom):dn.moveToElement(o)).orThunk(()=>y.some(dn.moveToElement(o)))},K0=(e,t,n)=>Cn(t,e,n).bind(s=>Ij(s.getNode())||$j(e,t,n,s)?y.none():t&&Qe(s.getNode())||!t&&Qe(s.getNode(!0))?q0(e,t,n,s):t&&oo(n)||!t&&so(n)?y.some(dn.moveToPosition(s)):y.none()),Fj=(e,t)=>bt(t)?y.none():e&&Qe(t.nextSibling)?y.some(dn.moveToElement(t.nextSibling)):!e&&Qe(t.previousSibling)?y.some(dn.moveToElement(t.previousSibling)):y.none(),Mj=(e,t,n)=>n.fold(s=>y.some(dn.remove(s)),s=>y.some(dn.moveToElement(s)),s=>ls(t,s,e)?y.none():y.some(dn.moveToPosition(s))),Uj=(e,t,n)=>Lj(t,n)?Fj(t,n.getNode(!t)).orThunk(()=>K0(e,t,n)):K0(e,t,n).bind(s=>Mj(e,n,s)),zj=(e,t,n)=>{const s=Kf(t?1:-1,e,n),o=L.fromRangeStart(s),r=x.fromDom(e);return!t&&oo(o)?y.some(dn.remove(o.getNode(!0))):t&&so(o)?y.some(dn.remove(o.getNode())):!t&&so(o)&&Ld(r,o)?KL(r,o).map(a=>dn.remove(a.getNode())):t&&oo(o)&&Id(r,o)?GL(r,o).map(a=>dn.remove(a.getNode())):Uj(e,t,o)},Hj=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Yo(e,t,x.fromDom(n)),!0),jj=(e,t)=>n=>{const s=t?L.before(n):L.after(n);return e.selection.setRng(s.toRange()),!0},Vj=e=>t=>(e.selection.setRng(t.toRange()),!0),G0=(e,t)=>y.from(Jo(e.getBody(),t)),Wj=(e,t)=>{const n=e.selection.getNode();return G0(e,n).filter(Qe).fold(()=>zj(e.getBody(),t,e.selection.getRng()).map(s=>()=>s.fold(Hj(e,t),jj(e,t),Vj(e))),()=>y.some(Ae))},qj=e=>{j(Ut(e,".mce-offscreen-selection"),st)},Kj=(e,t)=>{const n=e.selection.getNode();return Qe(n)&&!fc(n)?G0(e,n.parentNode).filter(Qe).fold(()=>y.some(()=>{qj(x.fromDom(e.getBody())),Yo(e,t,x.fromDom(e.selection.getNode())),Hd(e)}),()=>y.some(Ae)):Vm(e)?y.some(()=>{EE(e,e.selection.getRng(),x.fromDom(e.getBody()))}):y.none()},Y0=e=>{const t=e.dom,n=e.selection,s=Jo(e.getBody(),n.getNode());if(Hn(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(L.before(o).toRange())}return!0},Wm=(e,t)=>e.selection.isCollapsed()?Wj(e,t):Kj(e,t),Gj=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return Cn(t,e.getBody(),n).filter(s=>t?UL(s):zL(s)).bind(s=>qf(t?0:-1,s)).map(s=>()=>e.selection.select(s))},qm=(e,t)=>e.selection.isCollapsed()?Gj(e,t):y.none(),qr=z,X0=e=>qr(e)&&e.data[0]===It,J0=e=>qr(e)&&e.data[e.data.length-1]===It,Q0=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(It)},Yj=e=>{var t;if(qr(e.previousSibling))return J0(e.previousSibling)||e.previousSibling.appendData(It),e.previousSibling;if(qr(e))return X0(e)||e.insertData(0,It),e;{const n=Q0(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},Xj=e=>{var t,n;if(qr(e.nextSibling))return X0(e.nextSibling)||e.nextSibling.insertData(0,It),e.nextSibling;if(qr(e))return J0(e)||e.appendData(It),e;{const s=Q0(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},wl=(e,t)=>e?Yj(t):Xj(t),Jj=ae(wl,!0),Qj=ae(wl,!1),Z0=(e,t)=>z(e.container())?wl(t,e.container()):wl(t,e.getNode()),eS=(e,t)=>{const n=t.get();return n&&e.container()===n&&Ks(n)},Km=(e,t)=>t.fold(n=>{zo(e.get());const s=Jj(n);return e.set(s),y.some(L(s,s.length-1))},n=>Jt(n).map(s=>{if(eS(s,e)){const o=e.get();return L(o,1)}else{zo(e.get());const o=Z0(s,!0);return e.set(o),L(o,1)}}),n=>ds(n).map(s=>{if(eS(s,e)){const o=e.get();return L(o,o.length-1)}else{zo(e.get());const o=Z0(s,!1);return e.set(o),L(o,o.length-1)}}),n=>{zo(e.get());const s=Qj(n);return e.set(s),y.some(L(s,1))}),tS=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return y.none()},Vt=cs.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),nS=(e,t)=>{const n=Zs(t,e);return n||e},Zj=(e,t,n)=>{const s=bE(n),o=nS(t,s.container());return ro(e,o,s).fold(()=>sn(o,s).bind(ae(ro,e,o)).map(r=>Vt.before(r)),y.none)},eV=(e,t)=>jo(e,t)===null,sS=(e,t,n)=>ro(e,t,n).filter(ae(eV,t)),tV=(e,t,n)=>{const s=yE(n);return sS(e,t,s).bind(o=>En(o,s).isNone()?y.some(Vt.start(o)):y.none())},nV=(e,t,n)=>{const s=bE(n);return sS(e,t,s).bind(o=>sn(o,s).isNone()?y.some(Vt.end(o)):y.none())},sV=(e,t,n)=>{const s=yE(n),o=nS(t,s.container());return ro(e,o,s).fold(()=>En(o,s).bind(ae(ro,e,o)).map(r=>Vt.after(r)),y.none)},oS=e=>!k$(Gm(e)),bs=(e,t,n)=>tS([Zj,tV,nV,sV],[e,t,n]).filter(oS),Gm=e=>e.fold(Gt,Gt,Gt,Gt),rS=e=>e.fold(Z("before"),Z("start"),Z("end"),Z("after")),xl=e=>e.fold(Vt.before,Vt.before,Vt.after,Vt.after),Ym=e=>e.fold(Vt.start,Vt.start,Vt.end,Vt.end),oV=(e,t)=>rS(e)===rS(t)&&Gm(e)===Gm(t),rV=(e,t,n,s,o,r)=>Yt(ro(t,n,s),ro(t,n,o),(a,c)=>a!==c&&N$(n,a,c)?Vt.after(e?a:c):r).getOr(r),aV=(e,t)=>e.fold(yt,n=>!oV(n,t)),iV=(e,t,n,s,o)=>{const r=xn(e,o);return Cn(e,n,r).map(ae(xn,e)).fold(()=>s.map(xl),l=>bs(t,n,l).map(ae(rV,e,t,n,r,l)).filter(ae(aV,s))).filter(oS)},cV=(e,t)=>e?t.fold(yo(y.some,Vt.start),y.none,yo(y.some,Vt.after),y.none):t.fold(y.none,yo(y.some,Vt.before),y.none,yo(y.some,Vt.end)),lV=(e,t,n,s)=>{const o=xn(e,s),r=bs(t,n,o);return bs(t,n,o).bind(ae(cV,e)).orThunk(()=>iV(e,t,n,r,s))},uV=e=>$e(e.selection.getSel().modify),aS=(e,t,n)=>{const s=e?1:-1;return t.setRng(L(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},fV=(e,t)=>{const n=t.selection.getRng(),s=e?L.fromRangeEnd(n):L.fromRangeStart(n);return uV(t)?e&&ff(s)?aS(!0,t.selection,s):!e&&df(s)?aS(!1,t.selection,s):!1:!1};var ys;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ys||(ys={}));const kl=(e,t)=>e===xt.Backwards?ma(t):t,dV=(e,t,n)=>e===xt.Forwards?t.next(n):t.prev(n),mV=(e,t,n,s)=>ut(s.getNode(t===xt.Forwards))?ys.Br:ls(n,s)===!1?ys.Block:ys.Wrap,iS=(e,t,n,s)=>{const o=fs(n);let r=s;const a=[];for(;r;){const c=dV(t,o,r);if(!c)break;if(ut(c.getNode(!1)))return t===xt.Forwards?{positions:kl(t,a).concat([c]),breakType:ys.Br,breakAt:y.some(c)}:{positions:kl(t,a),breakType:ys.Br,breakAt:y.some(c)};if(!c.isVisible()){r=c;continue}if(e(r,c)){const l=mV(n,t,r,c);return{positions:kl(t,a),breakType:l,breakAt:y.some(c)}}a.push(c),r=c}return{positions:kl(t,a),breakType:ys.Eol,breakAt:y.none()}},cS=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===xt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),Xm=(e,t)=>cn(e,(n,s)=>n.fold(()=>y.some(s),o=>Yt(tn(o.getClientRects()),tn(s.getClientRects()),(r,a)=>{const c=Math.abs(t-r.left);return Math.abs(t-a.left)<=c?s:o}).or(n)),y.none()),Al=(e,t)=>tn(t.getClientRects()).bind(n=>Xm(e,n.left)),pi=ae(iS,L.isAbove,-1),gi=ae(iS,L.isBelow,1),lS=ae(cS,-1,pi),uS=ae(cS,1,gi),pV=(e,t)=>pi(e,t).breakAt.isNone(),gV=(e,t)=>gi(e,t).breakAt.isNone(),hV=e=>Jt(e).map(t=>[t].concat(gi(e,t).positions)).getOr([]),bV=e=>ds(e).map(t=>pi(e,t).positions.concat(t)).getOr([]),yV=(e,t)=>Al(lS(e,t),t),vV=(e,t)=>Al(uS(e,t),t),CV=Qe,fS=(e,t)=>Math.abs(e.left-t),dS=(e,t)=>Math.abs(e.right-t),EV=e=>br(e,"node"),mS=(e,t)=>Zi(e,(n,s)=>{const o=Math.min(fS(n,t),dS(n,t)),r=Math.min(fS(s,t),dS(s,t));return r===o&&EV(s)&&CV(s.node)||r<o?s:n}),_V=e=>{const t=n=>Le(n,s=>{const o=Mo(s);return o.node=e,o});if(te(e))return t(e.getClientRects());if(z(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},pS=e=>ns(e,_V);var hi;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(hi||(hi={}));const SV=(e,t,n,s)=>{let o=s;for(;o=Ka(o,e,Db,t);)if(n(o))return},gS=(e,t,n,s,o,r)=>{let a=0;const c=[],l=m=>{let h=pS([m]);e===-1&&(h=h.reverse());for(let _=0;_<h.length;_++){const w=h[_];if(!n(w,f)){if(c.length>0&&t(w,Eo(c))&&a++,w.line=a,o(w))return!0;c.push(w)}}return!1},f=Eo(r.getClientRects());if(!f)return c;const g=r.getNode();return g&&(l(g),SV(e,s,l,g)),c},wV=(e,t)=>t.line>e,xV=(e,t)=>t.line===e,kV=ae(gS,hi.Up,Ma,Ua),AV=ae(gS,hi.Down,Ua,Ma),hS=e=>Eo(e.getClientRects()),NV=(e,t,n,s)=>{const o=fs(t);let r,a,c,l;const f=[];let g=0;e===1?(r=o.next,a=Ua,c=Ma,l=L.after(s)):(r=o.prev,a=Ma,c=Ua,l=L.before(s));const m=hS(l);do{if(!l.isVisible())continue;const h=hS(l);if(c(h,m))continue;f.length>0&&a(h,Eo(f))&&g++;const _=Mo(h);if(_.position=l,_.line=g,n(_))return f;f.push(_)}while(l=r(l));return f},bS=e=>t=>wV(e,t),Jm=e=>t=>xV(e,t),Ls=(e,t)=>{e.selection.setRng(t),ti(e,e.selection.getRng())},Qm=(e,t,n)=>y.some(zm(e,t,n)),yS=(e,t,n,s,o,r)=>{const a=t===xt.Forwards,c=fs(e.getBody()),l=ae(Gf,a?c.next:c.prev),f=a?s:o;if(!n.collapsed){const w=Nc(n);if(r(w))return Is(t,e,w,t===xt.Backwards,!1);if(Vm(e)){const C=n.cloneRange();return C.collapse(t===xt.Backwards),y.from(C)}}const g=Xa(t,e.getBody(),n);if(f(g))return mi(e,g.getNode(!a));let m=l(g);const h=Tb(n);if(m)m=xn(a,m);else return h?y.some(n):y.none();if(f(m))return Is(t,e,m.getNode(!a),a,!1);const _=l(m);return _&&f(_)&&Lc(m,_)?Is(t,e,_.getNode(!a),a,!1):h?Qm(e,m.toRange(),!1):y.none()},vS=(e,t,n,s,o,r)=>{const a=Xa(t,e.getBody(),n),c=Eo(a.getClientRects()),l=t===hi.Down,f=e.getBody();if(!c)return y.none();if(Vm(e)){const S=l?L.fromRangeEnd(n):L.fromRangeStart(n);return(l?vV:yV)(f,S).orThunk(()=>y.from(S)).map(k=>k.toRange())}const m=(l?AV:kV)(f,bS(1),a),h=be(m,Jm(1)),_=c.left,w=mS(h,_);if(w&&r(w.node)){const S=Math.abs(_-w.left),N=Math.abs(_-w.right);return Is(t,e,w.node,S<N,!1)}let C;if(s(a)?C=a.getNode():o(a)?C=a.getNode(!0):C=Nc(n),C){const S=NV(t,f,bS(1),C);let N=mS(be(S,Jm(1)),_);if(N||(N=Eo(be(S,Jm(0))),N))return Qm(e,N.position.toRange(),!1)}return h.length===0?Zm(e,l).filter(l?o:s).map(S=>zm(e,S.toRange(),!1)):y.none()},Zm=(e,t)=>{const n=e.selection.getRng(),s=t?L.fromRangeEnd(n):L.fromRangeStart(n),o=_D(s.container(),e.getBody());if(t){const r=gi(o,s);return Co(r.positions)}else{const r=pi(o,s);return tn(r.positions)}},CS=(e,t,n)=>Zm(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Nl=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},ES=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},_S=(e,t,n)=>Km(t,n).map(s=>(Nl(e,s),n)),RV=(e,t,n)=>{const s=L.fromRangeStart(e);if(e.collapsed)return s;{const o=L.fromRangeEnd(e);return n?En(t,o).getOr(o):sn(t,s).getOr(s)}},TV=(e,t,n)=>{const s=e.getBody(),o=RV(e.selection.getRng(),s,n),r=ae(Xo,e);return lV(n,r,s,o).bind(c=>_S(e,t,c))},OV=(e,t,n)=>{const s=Le(Ut(x.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),a=>a.dom),o=be(s,e),r=be(n,e);j(Yi(o,r),ae(ES,!1)),j(Yi(r,o),ae(ES,!0))},PV=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=L.fromRangeStart(e.selection.getRng());L.isTextPosition(s)&&!R$(s)&&(Nl(e,uD(n,s)),t.set(null))}},DV=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=be(s,e);j(o,r=>{const a=L.fromRangeStart(t.selection.getRng());bs(e,t.getBody(),a).bind(c=>_S(t,n,c))})}},SS=(e,t,n)=>Va(e)?TV(e,t,n).isSome():!1,wS=(e,t,n)=>Va(t)?fV(e,t):!1,BV=e=>{const t=wt(null),n=ae(Xo,e);return e.on("NodeChange",s=>{Va(e)&&(OV(n,e.dom,s.parents),PV(e,t),DV(n,e,t,s.parents))}),t},IV=ae(wS,!0),LV=ae(wS,!1),Rl=(e,t,n)=>{if(Va(e)){const s=Zm(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?L.fromRangeEnd(o):L.fromRangeStart(o)});return bs(ae(Xo,e),e.getBody(),s).exists(o=>{const r=xl(o);return Km(n,r).exists(a=>(Nl(e,a),!0))})}else return!1},$V=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},FV=e=>Yt(Jt(e),ds(e),(t,n)=>{const s=xn(!0,t),o=xn(!1,n);return sn(e,s).forall(r=>r.isEqual(o))}).getOr(!0),xS=(e,t)=>n=>Km(t,n).map(s=>()=>Nl(e,s)),kS=(e,t,n,s)=>{const o=e.getBody(),r=ae(Xo,e);e.undoManager.ignore(()=>{e.selection.setRng($V(n,s)),zd(e),bs(r,o,L.fromRangeStart(e.selection.getRng())).map(Ym).bind(xS(e,t)).each(la)}),e.nodeChanged()},MV=(e,t)=>{const n=Zs(t,e);return n||e},UV=(e,t,n,s)=>{const o=MV(e.getBody(),s.container()),r=ae(Xo,e),a=bs(r,o,s);return a.bind(l=>n?l.fold(Z(y.some(Ym(l))),y.none,Z(y.some(xl(l))),y.none):l.fold(y.none,Z(y.some(xl(l))),y.none,Z(y.some(Ym(l))))).map(xS(e,t)).getOrThunk(()=>{const l=Fc(n,o,s),f=l.bind(g=>bs(r,o,g));return Yt(a,f,()=>ro(r,o,s).bind(g=>FV(g)?y.some(()=>{Yo(e,n,x.fromDom(g))}):y.none())).getOrThunk(()=>f.bind(()=>l.map(g=>()=>{n?kS(e,t,s,g):kS(e,t,g,s)})))})},ep=(e,t,n)=>{if(e.selection.isCollapsed()&&Va(e)){const s=L.fromRangeStart(e.selection.getRng());return UV(e,t,n,s)}return y.none()},zV=e=>sb(e)>1,AS=(e,t)=>{const n=x.fromDom(e.getBody()),s=x.fromDom(e.selection.getStart()),o=Bs(s,n);return da(o,t).fold(Z(o),r=>o.slice(0,r))},HV=e=>AS(e,t=>yn(t)||zV(t)),jV=e=>AS(e,yn),NS=(e,t)=>{const n=ae(KE,e);return ns(t,s=>n(s)?[s.dom]:[])},RS=e=>{const t=jV(e);return NS(e,t)},VV=(e,t,n,s)=>{const o=NS(t,s);if(o.length===0)Yo(t,e,n);else{const r=qE(n.dom,o);t.selection.setRng(r.toRange())}},WV=(e,t)=>{const n=HV(e);return Co(n).bind(s=>{const o=L.fromRangeStart(e.selection.getRng());return B$(t,o,s.dom)&&!GE(s)?y.some(()=>VV(t,e,s,n)):y.none()})},qV=(e,t)=>{const n=t.parentElement;return ut(t)&&!Pn(n)&&e.dom.isEmpty(n)},KV=e=>GE(x.fromDom(e)),TS=(e,t)=>{const n=e.selection.getStart(),s=qV(e,n)||KV(n)?qE(n,t):vM(e,t);e.selection.setRng(s.toRange())},GV=(e,t)=>{const n=Yi(t,RS(e));n.length>0&&TS(e,n)},OS=e=>z(e.startContainer),YV=e=>e.startOffset===0&&OS(e),XV=(e,t)=>{const n=t.startContainer.parentElement;return!Pn(n)&&KE(e,x.fromDom(n))},JV=e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!Pn(t)&&!Pn(n)&&t.isEqualNode(n)},QV=e=>{const t=e.endContainer;return e.endOffset===(z(t)?t.length:t.childNodes.length)},ZV=e=>JV(e)&&QV(e),eW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),tW=e=>ZV(e)||eW(e),nW=e=>{const t=e.selection.getRng();return YV(t)&&XV(e,t)&&tW(t)},sW=e=>{if(nW(e)){const t=RS(e);return y.some(()=>{zd(e),GV(e,t)})}else return y.none()},tp=(e,t)=>e.selection.isCollapsed()?WV(e,t):sW(e),oW=e=>sM(e,t=>Bn(t.dom),yn),rW=e=>oW(x.fromDom(e.selection.getStart())),aW=e=>{const t=e.selection.getRng();return t.collapsed&&(OS(t)||e.dom.isEmpty(t.startContainer))&&!rW(e)},bi=e=>(aW(e)&&TS(e,[]),!0),np=(e,t,n)=>ee(n)?y.some(()=>{e._selectionOverrides.hideFakeCaret(),Yo(e,t,x.fromDom(n))}):y.none(),iW=(e,t)=>{const n=t?ni:si,s=t?xt.Forwards:xt.Backwards,o=Xa(s,e.getBody(),e.selection.getRng());return n(o)?np(e,t,o.getNode(!t)):y.from(xn(t,o)).filter(r=>n(r)&&Lc(o,r)).bind(r=>np(e,t,r.getNode(!t)))},cW=(e,t)=>{const n=e.selection.getNode();return is(n)?np(e,t,n):y.none()},sp=(e,t)=>e.selection.isCollapsed()?iW(e,t):cW(e,t),lW=e=>xo(e,t=>Hn(t.dom)||Qe(t.dom)).exists(t=>Hn(t.dom)),op=e=>ec(e??"").getOr(0),PS=(e,t)=>{const n=e||NT(t)?"margin":"padding",s=as(t,"direction")==="rtl"?"-right":"-left";return n+s},uW=(e,t,n,s,o,r)=>{const a=PS(n,x.fromDom(r)),c=op(e.getStyle(r,a));if(t==="outdent"){const l=Math.max(0,c-s);e.setStyle(r,a,l?l+o:"")}else{const l=c+s+o;e.setStyle(r,a,l)}},fW=(e,t)=>Us(t,n=>{const s=PS(Xy(e),n),o=ac(n,s).map(op).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),DS=e=>{const t=IS(e);return!e.mode.isReadOnly()&&(t.length>1||fW(e,t))},BS=e=>uf(e)||Ra(e),dW=e=>Un(e).exists(BS),IS=e=>be(pb(e.selection.getSelectedBlocks()),t=>!BS(t)&&!dW(t)&&lW(t)),LS=(e,t)=>{var n,s;const{dom:o}=e,r=aP(e),a=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",c=op(r),l=Xy(e);j(IS(e),f=>{uW(o,t,l,c,a,f.dom)})},mW=e=>LS(e,"indent"),$S=e=>LS(e,"outdent"),FS=e=>{if(e.selection.isCollapsed()&&DS(e)){const t=e.dom,n=e.selection.getRng(),s=L.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&Bd(x.fromDom(o),s))return y.some(()=>$S(e))}return y.none()},MS=(e,t,n)=>hr([FS,Wm,Hm,(s,o)=>ep(s,t,o),Mm,Xd,qm,sp,Um,tp],s=>s(e,n)).filter(s=>e.selection.isEditable()),pW=(e,t)=>{MS(e,t,!1).fold(()=>{zd(e),Hd(e)},la)},gW=(e,t)=>{MS(e,t,!0).fold(()=>O$(e),la)},hW=(e,t)=>{e.addCommand("delete",()=>{pW(e,t)}),e.addCommand("forwardDelete",()=>{gW(e,t)})},US=5,bW=400,zS=e=>e.touches===void 0||e.touches.length!==1?y.none():y.some(e.touches[0]),yW=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>US||s>US},vW=e=>{const t=Xs(),n=wt(!1),s=Tf(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},bW);e.on("touchstart",o=>{zS(o).each(r=>{s.cancel();const a={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(a)})},!0),e.on("touchmove",o=>{s.cancel(),zS(o).each(r=>{t.on(a=>{yW(r,a)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},rp=(e,t)=>Se(e,t.nodeName),CW=(e,t)=>z(t)?!0:te(t)?!rp(e.getBlockElements(),t)&&!_n(t)&&!Do(e,t):!1,EW=(e,t,n)=>mt(ZC(x.fromDom(n),x.fromDom(t)),s=>rp(e,s.dom)),_W=(e,t)=>{if(z(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||rp(e,t.nextSibling)))return!0}return!1},HS=e=>e.dom.create(fn(e),ja(e)),SW=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),a=e.getBody();let c,l,f=!1;const g=fn(e);if(!r||!te(r))return;const m=a.nodeName.toLowerCase();if(!s.isValidChild(m,g.toLowerCase())||EW(o,a,r))return;const h=n.getRng(),{startContainer:_,startOffset:w,endContainer:C,endOffset:S}=h,N=Go(e);let k=a.firstChild;for(;k;)if(te(k)&&l1(s,k),CW(s,k)){if(_W(o,k)){l=k,k=k.nextSibling,t.remove(l);continue}c||(c=HS(e),a.insertBefore(c,k),f=!0),l=k,k=k.nextSibling,c.appendChild(l)}else c=null,k=k.nextSibling;f&&N&&(h.setStart(_,w),h.setEnd(C,S),n.setRng(h),e.nodeChanged())},jS=(e,t,n)=>{const s=x.fromDom(HS(e)),o=gc();Et(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},wW=e=>{e.on("NodeChange",ae(SW,e))},VS=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,xW=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],a=r>0?t.charAt(r-1):"";if(a==='"')return s;if(a===">"){const c=t.lastIndexOf("<",r);if(c!==-1&&t.substring(c,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},kW=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],xW(e,o,sv(e)));n.content=o}},AW=e=>{const t="contenteditable",n=" "+q.trim(XP(e))+" ",s=" "+q.trim(sv(e))+" ",o=VS(n),r=VS(s),a=JP(e);a.length>0&&e.on("BeforeSetContent",c=>{kW(e,a,c)}),e.parser.addAttributeFilter("class",c=>{let l=c.length;for(;l--;){const f=c[l];o(f)?f.attr(t,"true"):r(f)&&f.attr(t,"false")}}),e.serializer.addAttributeFilter(t,c=>{let l=c.length;for(;l--;){const f=c[l];!o(f)&&!r(f)||(a.length>0&&f.attr("data-mce-content")?(f.name="#text",f.type=3,f.raw=!0,f.value=f.attr("data-mce-content")):f.attr(t,null))}})},NW=e=>ka(x.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),WS=(e,t)=>{t.hasAttribute("data-mce-caret")&&(mf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},RW=(e,t)=>{const n=NW(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),WS(e,n);return}Rb(n)&&(WS(e,n),e.undoManager.add())}},TW=e=>{e.on("keyup compositionstart",ae(RW,e))},qS=Qe,OW=(e,t,n)=>yS(t,e,n,so,oo,qS),PW=(e,t,n)=>vS(t,e,n,r=>so(r)||JC(r),r=>oo(r)||QC(r),qS),DW=e=>{const t=e.dom.create(fn(e));return t.innerHTML='<br data-mce-bogus="1">',t},KS=(e,t,n)=>{const s=fs(e.getBody()),o=ae(Gf,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(L.fromRangeStart(n))){const c=x.fromDom(DW(e));t===1?Vs(x.fromDom(r),c):bn(x.fromDom(r),c),e.selection.select(c.dom,!0),e.selection.collapse()}}},BW=(e,t)=>{const n=t?xt.Forwards:xt.Backwards,s=e.selection.getRng();return OW(n,e,s).orThunk(()=>(KS(e,n,s),y.none()))},IW=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return PW(n,e,s).orThunk(()=>(KS(e,n,s),y.none()))},GS=(e,t)=>BW(e,t).exists(n=>(Ls(e,n),!0)),YS=(e,t)=>IW(e,t).exists(n=>(Ls(e,n),!0)),XS=(e,t)=>CS(e,t,t?oo:so),Tl=(e,t)=>jm(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(Ls(e,n),!0)),LW=e=>Ge(["figcaption"],et(e)),$W=(e,t)=>{const n=ae(Fe,t);return xo(x.fromDom(e.container()),yn,n).filter(LW)},FW=(e,t,n)=>t?gV(e.dom,n):pV(e.dom,n),MW=(e,t)=>{const n=x.fromDom(e.getBody()),s=L.fromRangeStart(e.selection.getRng());return $W(s,n).exists(()=>{if(FW(n,t,s)){const r=jS(e,n,t?Et:db);return e.selection.setRng(r),!0}else return!1})},JS=(e,t)=>e.selection.isCollapsed()?MW(e,t):!1,QS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},UW=e=>Le(e,t=>({...QS,...t})),zW=e=>Le(e,t=>({...QS,...t})),ZS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,HW=(e,t)=>ns(UW(e),n=>ZS(n,t)?[n]:[]),jW=(e,t)=>ns(zW(e),n=>ZS(n,t)?[n]:[]),Ce=(e,...t)=>()=>e.apply(null,t),yi=(e,t)=>Ct(HW(e,t),n=>n.action()),ew=(e,t)=>hr(jW(e,t),n=>n.action()),tw=(e,t)=>{const n=t?xt.Forwards:xt.Backwards,s=e.selection.getRng();return yS(e,n,s,ni,si,is).exists(o=>(Ls(e,o),!0))},nw=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return vS(e,n,s,ni,si,is).exists(o=>(Ls(e,o),!0))},sw=(e,t)=>CS(e,t,t?si:ni),ow=cs.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),vi={...ow,none:e=>ow.none(e)},VW=(e,t)=>rw(e,t,yt),rw=(e,t,n)=>ns(Bt(e),s=>Mn(s,t)?n(s)?[s]:[]:rw(s,t,n)),WW=(e,t,n=it)=>{if(n(t))return y.none();if(Ge(e,et(t)))return y.some(t);const s=o=>Mn(o,"table")||n(o);return xa(t,e.join(","),s)},qW=(e,t)=>WW(["td","th"],e,t),KW=e=>VW(e,"th,td"),aw=(e,t)=>ko(e,"table",t),ap=(e,t,n,s,o=yt)=>{const r=s===1;if(!r&&n<=0)return vi.first(e[0]);if(r&&n>=e.length-1)return vi.last(e[e.length-1]);{const a=n+s,c=e[a];return o(c)?vi.middle(t,c):ap(e,t,a,s,o)}},iw=(e,t)=>aw(e,t).bind(n=>{const s=KW(n);return da(s,r=>Fe(e,r)).map(r=>({index:r,all:s}))}),GW=(e,t,n)=>iw(e,n).fold(()=>vi.none(e),o=>ap(o.all,e,o.index,1,t)),YW=(e,t,n)=>iw(e,n).fold(()=>vi.none(),o=>ap(o.all,e,o.index,-1,t)),XW=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),JW=(e,t)=>ns(t,n=>{const s=XW(Mo(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),QW=(e,t,n)=>cn(e,(s,o)=>s.fold(()=>y.some(o),r=>{const a=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),c=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return y.some(c<a?o:r)}),y.none()),cw=(e,t,n,s,o)=>{const r=Ut(x.fromDom(n),"td,th,caption").map(c=>c.dom),a=be(JW(e,r),c=>t(c,o));return QW(a,s,o).map(c=>c.cell)},ZW=e=>e.bottom,e3=e=>e.top,t3=(e,t)=>e.y<t,n3=(e,t)=>e.y>t,s3=ae(cw,ZW,t3),o3=ae(cw,e3,n3),r3=(e,t)=>tn(t.getClientRects()).bind(n=>s3(e,n.left,n.top)).bind(n=>Al(bV(n),t)),a3=(e,t)=>Co(t.getClientRects()).bind(n=>o3(e,n.left,n.top)).bind(n=>Al(hV(n),t)),i3=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),c3=e=>e.breakType===ys.Wrap&&e.positions.length===0,l3=e=>e.breakType===ys.Br&&e.positions.length===1,lw=(e,t,n)=>{const s=e(t,n);return c3(s)||!ut(n.getNode())&&l3(s)?!i3(e,t,s):s.breakAt.isNone()},u3=ae(lw,pi),f3=ae(lw,gi),d3=(e,t,n)=>{const s=L.fromRangeStart(t);return Br(!e,n).exists(o=>o.isEqual(s))},m3=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return fv()&&d3(t,o,n)?(Is(r,e,n,!t,!1).each(a=>{Ls(e,a)}),!0):!1},p3=(e,t,n)=>r3(t,n).orThunk(()=>tn(n.getClientRects()).bind(s=>Xm(lS(e,L.before(t)),s.left))).getOr(L.before(t)),g3=(e,t,n)=>a3(t,n).orThunk(()=>tn(n.getClientRects()).bind(s=>Xm(uS(e,L.after(t)),s.left))).getOr(L.after(t)),uw=(e,t)=>{const n=t.getNode(e);return Ts(n)?y.some(n):y.none()},h3=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?Vs:bn,o=jS(t,x.fromDom(n),s);Ls(t,o)})},fw=(e,t,n)=>{const s=uw(!!t,n),o=t===!1;s.fold(()=>Ls(e,n.toRange()),r=>Br(o,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>Ls(e,n.toRange()),a=>h3(t,e,r)))},b3=(e,t,n,s)=>{const o=e.selection.getRng(),r=L.fromRangeStart(o),a=e.getBody();if(!t&&u3(s,r)){const c=p3(a,n,r);return fw(e,t,c),!0}else if(t&&f3(s,r)){const c=g3(a,n,r);return fw(e,t,c),!0}else return!1},dw=(e,t,n)=>y.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>y.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),mw=(e,t)=>dw(e,t,m3),pw=(e,t)=>dw(e,t,b3),y3=e=>{const t=Mr.exact(e,0,e,0);return dI(t)},gw=(e,t,n)=>n.fold(y.none,y.none,(s,o)=>vL(o).map(r=>y3(r)),s=>(e.execCommand("mceTableInsertRowAfter"),hw(e,t,s))),hw=(e,t,n)=>gw(e,t,GW(n,oc)),v3=(e,t,n)=>gw(e,t,YW(n,oc)),bw=(e,t)=>{const n=["table","li","dl"],s=x.fromDom(e.getBody()),o=c=>{const l=et(c);return Fe(c,s)||Ge(n,l)},r=e.selection.getRng(),a=x.fromDom(t?r.endContainer:r.startContainer);return qW(a,o).map(c=>(aw(c,o).each(g=>{e.model.table.clearSelectedCells(g.dom)}),e.selection.collapse(!t),(t?hw:v3)(e,o,c).each(g=>{e.selection.setRng(g)}),!0)).getOr(!1)},C3=(e,t,n)=>{const s=Ie.os.isMacOS()||Ie.os.isiOS();yi([{keyCode:ie.RIGHT,action:Ce(GS,e,!0)},{keyCode:ie.LEFT,action:Ce(GS,e,!1)},{keyCode:ie.UP,action:Ce(YS,e,!1)},{keyCode:ie.DOWN,action:Ce(YS,e,!0)},...s?[{keyCode:ie.UP,action:Ce(Tl,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ie.DOWN,action:Ce(Tl,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ie.RIGHT,action:Ce(mw,e,!0)},{keyCode:ie.LEFT,action:Ce(mw,e,!1)},{keyCode:ie.UP,action:Ce(pw,e,!1)},{keyCode:ie.DOWN,action:Ce(pw,e,!0)},{keyCode:ie.RIGHT,action:Ce(tw,e,!0)},{keyCode:ie.LEFT,action:Ce(tw,e,!1)},{keyCode:ie.UP,action:Ce(nw,e,!1)},{keyCode:ie.DOWN,action:Ce(nw,e,!0)},{keyCode:ie.RIGHT,action:Ce(SS,e,t,!0)},{keyCode:ie.LEFT,action:Ce(SS,e,t,!1)},{keyCode:ie.RIGHT,ctrlKey:!s,altKey:s,action:Ce(IV,e,t)},{keyCode:ie.LEFT,ctrlKey:!s,altKey:s,action:Ce(LV,e,t)},{keyCode:ie.UP,action:Ce(JS,e,!1)},{keyCode:ie.DOWN,action:Ce(JS,e,!0)}],n).each(o=>{n.preventDefault()})},E3=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||C3(e,t,n)})},Gn=(e,t)=>({container:e,offset:t}),Ol=Ve.DOM,Pl=e=>t=>e===t?-1:0,_3=e=>t=>e.isBlock(t)||Ge(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",ip=(e,t,n)=>{if(z(e)&&t>=0)return y.some(Gn(e,t));{const s=Fo(Ol);return y.from(s.backwards(e,t,Pl(e),n)).map(o=>Gn(o.container,o.container.data.length))}},S3=(e,t,n)=>{if(z(e)&&t>=e.length)return y.some(Gn(e,t));{const s=Fo(Ol);return y.from(s.forwards(e,t,Pl(e),n)).map(o=>Gn(o.container,0))}},cp=(e,t,n)=>{if(!z(e))return y.none();const s=e.data;if(t>=0&&t<=s.length)return y.some(Gn(e,t));{const o=Fo(Ol);return y.from(o.backwards(e,t,Pl(e),n)).bind(r=>{const a=r.container.data;return cp(r.container,t+a.length,n)})}},yw=(e,t,n)=>{if(!z(e))return y.none();const s=e.data;if(t<=s.length)return y.some(Gn(e,t));{const o=Fo(Ol);return y.from(o.forwards(e,t,Pl(e),n)).bind(r=>yw(r.container,t-s.length,n))}},lp=(e,t,n,s,o)=>{const r=Fo(e,_3(e));return y.from(r.backwards(t,n,s,o))},w3=e=>e.collapsed&&z(e.startContainer),vw=e=>Os(e.toString().replace(/\u00A0/g," ")),Cw=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,up=(e,t)=>e.substring(t.length),x3=(e,t,n)=>{let s;const o=n.charAt(0);for(s=t-1;s>=0;s--){const r=e.charAt(s);if(Cw(r))return y.none();if(o===r&&Mt(e,n,s,t))break}return y.some(s)},k3=(e,t,n,s=0)=>{if(!w3(t))return y.none();const o={text:"",offset:0},r=(c,l,f)=>(o.text=f+o.text,o.offset+=l,x3(o.text,o.offset,n).getOr(l)),a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return lp(e,t.startContainer,t.startOffset,r,a).bind(c=>{const l=t.cloneRange();if(l.setStart(c.container,c.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return y.none();const f=vw(l);return f.lastIndexOf(n)!==0||up(f,n).length<s?y.none():y.some({text:up(f,n),range:l,trigger:n})})},Ew=(e,t,n,s=0)=>SL(x.fromDom(t.startContainer)).fold(()=>k3(e,t,n,s),o=>{const r=e.createRng();r.selectNode(o.dom);const a=vw(r);return y.some({range:r,text:up(a,n),trigger:n})}),A3=e=>e.nodeType===jh,N3=e=>e.nodeType===va,_w=e=>{if(A3(e))return Gn(e,e.data.length);{const t=e.childNodes;return t.length>0?_w(t[t.length-1]):Gn(e,t.length)}},Sw=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Sw(n[t],0):n.length>0&&N3(e)&&n.length===t?_w(n[n.length-1]):Gn(e,t)},R3=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return lp(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!Cw(r)}).isSome()},T3=e=>t=>{const n=Sw(t.startContainer,t.startOffset);return!R3(e,n)},O3=(e,t,n)=>hr(n.triggers,s=>Ew(e,t,s)),P3=(e,t)=>{const n=t(),s=e.selection.getRng();return O3(e.dom,s,n).bind(o=>ww(e,t,o))},ww=(e,t,n,s={})=>{var o;const r=t(),c=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",l=be(r.lookupByTrigger(n.trigger),g=>n.text.length>=g.minChars&&g.matches.getOrThunk(()=>T3(e.dom))(n.range,c,n.text));if(l.length===0)return y.none();const f=Promise.all(Le(l,g=>g.fetch(n.text,g.maxResults,s).then(h=>({matchText:n.text,items:h,columns:g.columns,onAction:g.onAction,highlightOn:g.highlightOn}))));return y.some({lookupData:f,context:n})};var Yn;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Yn||(Yn={}));const fp=(e,t,n)=>e.stype===Yn.Error?t(e.serror):n(e.svalue),D3=e=>{const t=[],n=[];return j(e,s=>{fp(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},B3=(e,t)=>e.stype===Yn.Error?{stype:Yn.Error,serror:t(e.serror)}:e,I3=(e,t)=>e.stype===Yn.Value?{stype:Yn.Value,svalue:t(e.svalue)}:e,L3=(e,t)=>e.stype===Yn.Value?t(e.svalue):e,$3=(e,t)=>e.stype===Yn.Error?t(e.serror):e,xw=e=>({stype:Yn.Value,svalue:e}),kw=e=>({stype:Yn.Error,serror:e}),Nt={fromResult:e=>e.fold(kw,xw),toResult:e=>fp(e,Xt.error,Xt.value),svalue:xw,partition:D3,serror:kw,bind:L3,bindError:$3,map:I3,mapError:B3,fold:fp},dp=e=>Xe(e)&&un(e).length>100?" removed due to size":JSON.stringify(e,null,2),F3=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Z("... (only showing first ten failures)")}]):e;return Le(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},Dl=(e,t)=>Nt.serror([{path:e,getErrorInfo:t}]),M3=(e,t,n)=>Dl(e,()=>'Could not find valid *required* value for "'+t+'" in '+dp(n)),U3=(e,t)=>Dl(e,()=>'Choice schema did not contain choice key: "'+t+'"'),z3=(e,t,n)=>Dl(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+dp(t)),H3=(e,t)=>Dl(e,Z(t)),j3=(e,t,n,s)=>Ze(n,s).fold(()=>z3(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),V3=(e,t)=>({extract:(o,r)=>Ze(r,e).fold(()=>U3(o,e),c=>j3(o,r,t,c)),toString:()=>"chooseOn("+e+"). Possible values: "+un(t)}),W3=(e,t)=>t,q3=(e,t)=>Ss(e)&&Ss(t)?Bl(e,t):t,Aw=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Se(o,r)&&(n[r]=e(n[r],o[r]))}return n},Bl=Aw(q3),K3=Aw(W3),Nw=()=>({tag:"required",process:{}}),G3=e=>({tag:"defaultedThunk",process:e}),Rw=e=>G3(Z(e)),Y3=()=>({tag:"option",process:{}}),X3=(e,t)=>e.length>0?Nt.svalue(Bl(t,K3.apply(void 0,e))):Nt.svalue(t),Tw=e=>yo(Nt.serror,ih)(e),J3={consolidateObj:(e,t)=>{const n=Nt.partition(e);return n.errors.length>0?Tw(n.errors):X3(n.values,t)},consolidateArr:e=>{const t=Nt.partition(e);return t.errors.length>0?Tw(t.errors):Nt.svalue(t.values)}},Q3=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),Z3=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Ow=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},mp=e=>{const t=(s,o)=>Nt.bindError(e(o),r=>H3(s,r)),n=Z("val");return{extract:t,toString:n}},eq=mp(Nt.svalue),tq=(e,t,n,s)=>Ze(t,n).fold(()=>M3(e,n,t),s),Pw=(e,t,n,s)=>{const o=Ze(e,t).getOrThunk(()=>n(e));return s(o)},nq=(e,t,n)=>n(Ze(e,t)),sq=(e,t,n,s)=>{const o=Ze(e,t).map(r=>r===!0?n(e):r);return s(o)},oq=(e,t,n,s,o)=>{const r=c=>o.extract(t.concat([s]),c),a=c=>c.fold(()=>Nt.svalue(y.none()),l=>{const f=o.extract(t.concat([s]),l);return Nt.map(f,y.some)});switch(e.tag){case"required":return tq(t,n,s,r);case"defaultedThunk":return Pw(n,s,e.process,r);case"option":return nq(n,s,a);case"defaultedOptionThunk":return sq(n,s,e.process,a);case"mergeWithThunk":return Pw(n,s,Z({}),c=>{const l=Bl(e.process(n),c);return r(l)})}},rq=(e,t,n)=>{const s={},o=[];for(const r of n)Ow(r,(a,c,l,f)=>{const g=oq(l,e,t,a,f);Nt.fold(g,m=>{o.push(...m)},m=>{s[c]=m})},(a,c)=>{s[a]=c(t)});return o.length>0?Nt.serror(o):Nt.svalue(s)},pp=e=>({extract:(s,o)=>rq(s,o,e),toString:()=>`obj{
`+Le(e,o=>Ow(o,(r,a,c,l)=>r+" -> "+l.toString(),(r,a)=>"state("+r+")")).join(`
`)+"}"}),Dw=e=>({extract:(s,o)=>{const r=Le(o,(a,c)=>e.extract(s.concat(["["+c+"]"]),a));return J3.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),aq=e=>mp(t=>e(t).fold(Nt.serror,Nt.svalue)),iq=(e,t,n)=>{const s=t.extract([e],n);return Nt.mapError(s,o=>({input:n,errors:o}))},cq=(e,t,n)=>Nt.toResult(iq(e,t,n)),lq=e=>`Errors: 
`+F3(e.errors).join(`
`)+`

Input object: `+dp(e.input),Bw=(e,t)=>V3(e,Ji(t,pp)),uq=Z(eq),Il=(e,t)=>mp(n=>{const s=typeof n;return e(n)?Nt.svalue(n):Nt.serror(`Expected type: ${t} but got: ${s}`)}),fq=Il(Fn,"number"),Ll=Il(ne,"string"),dq=Il(bo,"boolean"),gp=Il($e,"function"),Ci=Q3,Iw=Z3,mq=e=>aq(t=>Ge(e,t)?Xt.value(t):Xt.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),Lw=(e,t)=>Ci(e,e,Nw(),t),$w=e=>Lw(e,Ll),Fw=e=>Lw(e,gp),pq=(e,t)=>Ci(e,e,Nw(),Dw(t)),hp=(e,t)=>Ci(e,e,Y3(),t),$l=e=>hp(e,Ll),gq=e=>hp(e,gp),hq=(e,t)=>Ci(e,e,Rw(t),uq()),Kr=(e,t,n)=>Ci(e,e,Rw(t),n),Mw=(e,t)=>Kr(e,t,fq),bq=(e,t)=>Kr(e,t,Ll),Uw=(e,t,n)=>Kr(e,t,mq(n)),bp=(e,t)=>Kr(e,t,dq),yp=(e,t)=>Kr(e,t,gp),yq=(e,t,n)=>Kr(e,t,Dw(n)),vq=$w("type"),Cq=Fw("fetch"),vp=Fw("onAction"),Eq=yp("onSetup",()=>Ae),_q=$l("text"),Sq=$l("icon"),wq=$l("tooltip"),xq=$l("label"),kq=bp("active",!1),Aq=bp("enabled",!0),zw=bp("primary",!1),Nq=e=>hq("columns",e),Ei=e=>bq("type",e),Rq=pp([vq,$w("trigger"),Mw("minChars",1),Nq(1),Mw("maxResults",10),gq("matches"),Cq,vp,yq("highlightOn",[],Ll)]),Tq=e=>cq("Autocompleter",Rq,{trigger:e.ch,...e}),Cp=[Aq,wq,Sq,_q,Eq],Hw=[kq].concat(Cp),Oq=[yp("predicate",it),Uw("scope","node",["node","editor"]),Uw("position","selection",["node","selection","line"])],Pq=Cp.concat([Ei("contextformbutton"),zw,vp,Iw("original",Gt)]),Dq=Hw.concat([Ei("contextformbutton"),zw,vp,Iw("original",Gt)]),Bq=Cp.concat([Ei("contextformbutton")]),Iq=Hw.concat([Ei("contextformtogglebutton")]),Lq=Bw("type",{contextformbutton:Pq,contextformtogglebutton:Dq});pp([Ei("contextform"),yp("initValue",Z("")),xq,pq("commands",Lq),hp("launch",Bw("type",{contextformbutton:Bq,contextformtogglebutton:Iq}))].concat(Oq));const $q=e=>{const t=e.ui.registry.getAll().popups,n=Ji(t,a=>Tq(a).fold(c=>{throw new Error(lq(c))},Gt)),s=lh(zu(n,a=>a.trigger)),o=Hu(n);return{dataset:n,triggers:s,lookupByTrigger:a=>be(o,c=>c.trigger===a)}},Fq=(e,t)=>{const n=Tf(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27&&t.cancelIfNecessary()}),e.on("remove",n.cancel)},Mq=e=>{const t=Xs(),n=wt(!1),s=t.isSet,o=()=>{s()&&(k2(e),FB(e),n.set(!1),t.clear())},r=f=>{s()||(x2(e,f.range),t.set({trigger:f.trigger,matchLength:f.text.length}))},a=_o(()=>$q(e)),c=f=>t.get().map(g=>Ew(e.dom,e.selection.getRng(),g.trigger).bind(m=>ww(e,a,m,f))).getOrThunk(()=>P3(e,a)),l=f=>{c(f).fold(o,g=>{r(g.context),g.lookupData.then(m=>{t.get().map(h=>{const _=g.context;h.trigger===_.trigger&&(_.text.length-h.matchLength>=10?o():(t.set({...h,matchLength:_.text.length}),n.get()?$B(e,{lookupData:m}):(n.set(!0),LB(e,{lookupData:m}))))})})})};e.addCommand("mceAutocompleterReload",(f,g)=>{const m=Xe(g)?g.fetchOptions:{};l(m)}),e.addCommand("mceAutocompleterClose",o),Fq(e,{cancelIfNecessary:o,load:l})},jw=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Ae,inputType:n},a=Qb(new InputEvent(e));return t.dispatch(e,{...a,...r,...s})},Ep=jw("input"),_p=jw("beforeinput"),Uq=(e,t,n)=>{const s=n.keyCode===ie.BACKSPACE?"deleteContentBackward":"deleteContentForward";ew([{keyCode:ie.BACKSPACE,action:Ce(FS,e)},{keyCode:ie.BACKSPACE,action:Ce(Wm,e,!1)},{keyCode:ie.DELETE,action:Ce(Wm,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(Hm,e,!1)},{keyCode:ie.DELETE,action:Ce(Hm,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(ep,e,t,!1)},{keyCode:ie.DELETE,action:Ce(ep,e,t,!0)},{keyCode:ie.BACKSPACE,action:Ce(Xd,e,!1)},{keyCode:ie.DELETE,action:Ce(Xd,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(qm,e,!1)},{keyCode:ie.DELETE,action:Ce(qm,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(sp,e,!1)},{keyCode:ie.DELETE,action:Ce(sp,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(Um,e,!1)},{keyCode:ie.DELETE,action:Ce(Um,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(Mm,e,!1)},{keyCode:ie.DELETE,action:Ce(Mm,e,!0)},{keyCode:ie.BACKSPACE,action:Ce(tp,e,!1)},{keyCode:ie.DELETE,action:Ce(tp,e,!0)}],n).filter(o=>e.selection.isEditable()).each(o=>{n.preventDefault(),_p(e,s).isDefaultPrevented()||(o(),Ep(e,s))})},zq=(e,t,n)=>{const s=zs(),o=s.os,r=s.browser,a=o.isMacOS()?[{keyCode:ie.BACKSPACE,altKey:!0,action:Ce(bi,e)},{keyCode:ie.DELETE,altKey:!0,action:Ce(bi,e)}]:[{keyCode:ie.BACKSPACE,ctrlKey:!0,action:Ce(bi,e)},{keyCode:ie.DELETE,ctrlKey:!0,action:Ce(bi,e)}];o.isMacOS()&&n&&a.push({keyCode:r.isFirefox()?224:91,action:Ce(bi,e)}),yi([{keyCode:ie.BACKSPACE,action:Ce(Y0,e)},{keyCode:ie.DELETE,action:Ce(Y0,e)},...a],t)},Hq=(e,t)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===ie.BACKSPACE,s.isDefaultPrevented()||Uq(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||zq(e,s,n),n=!1})},jq=e=>{for(;e;){if(te(e)||z(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},_i=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=jq(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(At),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new _t(t,t);let a=t,c;for(;c=r.current();){if(z(c)){o.setStart(c,0),o.setEnd(c,0);break}if(s[c.nodeName.toLowerCase()]){o.setStartBefore(c),o.setEndBefore(c);break}a=c,c=r.next()}c||(o.setStart(a,0),o.setEnd(a,0))}else ut(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),ti(e,o)},Fl=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";)e.getContentEditable(o)==="true"&&(s=o),o=o.parentNode;return o!==n?s:n},Sp=e=>y.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Vq=e=>Sp(e).fold(Z(""),t=>t.nodeName.toUpperCase()),Wq=e=>Sp(e).filter(t=>Ra(x.fromDom(t))).isSome(),qq=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,Kq=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},Vw=(e,t)=>{const n=e==null?void 0:e.parentNode;return ee(n)&&n.nodeName===t},Ww=e=>ee(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Gq=e=>ee(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Yq=e=>Ww(e)&&Ww(e.parentNode),Ml=e=>{const t=e.parentNode;return Gq(t)?t:e},Ul=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!te(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},Xq=(e,t,n,s,o)=>{const r=e.dom,a=e.selection.getRng(),c=n.parentNode;if(n===e.getBody()||!c)return;Yq(n)&&(o="LI");let l=t(o);if(Ul(n,s,!0)&&Ul(n,s,!1))if(Vw(n,"LI")){const f=Ml(n);r.insertAfter(l,f),Kq(n)?r.remove(f):r.remove(n)}else r.replace(l,n);else if(Ul(n,s,!0))Vw(n,"LI")?(r.insertAfter(l,Ml(n)),l.appendChild(r.doc.createTextNode(" ")),l.appendChild(n)):c.insertBefore(l,n),r.remove(s);else if(Ul(n,s,!1))r.insertAfter(l,Ml(n)),r.remove(s);else{n=Ml(n);const f=a.cloneRange();f.setStartAfter(s),f.setEndAfter(n);const g=f.extractContents();o==="LI"&&qq(g,"LI")?(l=g.firstChild,r.insertAfter(g,n)):(r.insertAfter(g,n),r.insertAfter(l,n)),r.remove(s)}_i(e,l)},Jq=e=>{j(Eb(x.fromDom(e),gn),t=>{const n=t.dom;n.nodeValue=Os(n.data)})},Qq=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},Zq=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),wp=e=>{e.innerHTML='<br data-mce-bogus="1">'},xp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,kp=(e,t)=>ee(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",e4=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;te(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let a=o.length;for(;a--;)r=o[a],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||Zq(e,r))&&e.remove(r)},Ap=(e,t,n)=>z(t)?e?n===1&&t.data.charAt(n-1)===It?0:n:n===t.data.length-1&&t.data.charAt(n)===It?t.data.length:n:n,t4=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Ap(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Ap(!1,e.endContainer,e.endOffset)),t},n4=e=>{let t=e;do z(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},s4=(e,t,n)=>{const s=e.dom;y.from(n.style).map(s.parseStyle).each(l=>{const g={...ub(x.fromDom(t)),...l};s.setStyles(t,g)});const o=y.from(n.class).map(l=>l.split(/\s+/)),r=y.from(t.className).map(l=>be(l.split(/\s+/),f=>f!==""));Yt(o,r,(l,f)=>{const g=be(f,h=>!Ge(l,h)),m=[...l,...g];s.setAttrib(t,"class",m.join(" "))});const a=["style","class"],c=pa(n,(l,f)=>!Ge(a,f));s.setAttribs(t,c)},Si=(e,t)=>{if(fn(e).toLowerCase()===t.tagName.toLowerCase()){const s=ja(e);s4(e,t,s)}},o4=(e,t,n,s,o)=>{var r,a;const c=e.dom,l=(r=Fl(c,s))!==null&&r!==void 0?r:c.getRoot();let f=c.getParent(s,c.isBlock);if(!f||!kp(c,f)){if(f=f||l,!f.hasChildNodes()){const _=c.create(t);return Si(e,_),f.appendChild(_),n.setStart(_,0),n.setEnd(_,0),_}let g=s;for(;g&&g.parentNode!==f;)g=g.parentNode;let m;for(;g&&!c.isBlock(g);)m=g,g=g.previousSibling;const h=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.nodeName;if(m&&h&&e.schema.isValidChild(h,t.toLowerCase())){const _=m.parentNode,w=c.create(t);for(Si(e,w),_.insertBefore(w,m),g=m;g&&!c.isBlock(g);){const C=g.nextSibling;w.appendChild(g),g=C}n.setStart(s,o),n.setEnd(s,o)}}return s},r4=(e,t)=>{t.normalize();const n=t.lastChild;(!n||te(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},a4=(e,t)=>{const n=JO(e);return bt(t)?!1:ne(n)?Ge(q.explode(n),t.nodeName.toLowerCase()):n},qw={insert:(e,t)=>{let n,s,o,r,a=!1;const c=e.dom,l=e.schema,f=l.getNonEmptyElements(),g=e.selection.getRng(),m=fn(e),h=G=>{let W=n;const B=l.getTextInlineElements();let D;G||o==="TABLE"||o==="HR"?D=c.create(G||m):D=k.cloneNode(!1);let Q=D;if(XO(e)===!1)c.setAttrib(D,"style",null),c.setAttrib(D,"class",null);else do if(B[W.nodeName]){if(Bn(W)||_n(W))continue;const ce=W.cloneNode(!1);c.setAttrib(ce,"id",""),D.hasChildNodes()?(ce.appendChild(D.firstChild),D.appendChild(ce)):(Q=ce,D.appendChild(ce))}while((W=W.parentNode)&&W!==N);return Si(e,D),wp(Q),D},_=G=>{const W=Ap(G,n,s);if(z(n)&&(G?W>0:W<n.data.length))return!1;if(n.parentNode===k&&a&&!G||G&&te(n)&&n===k.firstChild)return!0;if(xp(n,"TABLE")||xp(n,"HR"))return a&&!G||!a&&G;const B=new _t(n,k);z(n)&&(G&&W===0?B.prev():!G&&W===n.data.length&&B.next());let D;for(;D=B.current();){if(te(D)){if(!D.getAttribute("data-mce-bogus")){const Q=D.nodeName.toLowerCase();if(f[Q]&&Q!=="br")return!1}}else if(z(D)&&!Po(D.data))return!1;G?B.prev():B.next()}return!0},w=()=>{let G;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&R!=="HGROUP"?G=h(m):G=h(),a4(e,r)&&kp(c,r)&&c.isEmpty(k)?G=c.split(r,k):c.insertAfter(G,k),_i(e,G),G};Xc(c,g).each(G=>{g.setStart(G.startContainer,G.startOffset),g.setEnd(G.endContainer,G.endOffset)}),n=g.startContainer,s=g.startOffset;const C=!!(t&&t.shiftKey),S=!!(t&&t.ctrlKey);te(n)&&n.hasChildNodes()&&(a=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,a&&z(n)?s=n.data.length:s=0);const N=Fl(c,n);if(!N||Qq(e,n))return;C||(n=o4(e,m,g,n,s));let k=c.getParent(n,c.isBlock)||c.getRoot();r=ee(k==null?void 0:k.parentNode)?c.getParent(k.parentNode,c.isBlock):null,o=k?k.nodeName.toUpperCase():"";const R=r?r.nodeName.toUpperCase():"";if(R==="LI"&&!S){const G=r;k=G,r=G.parentNode,o=R}if(/^(LI|DT|DD)$/.test(o)&&te(r)&&c.isEmpty(k)){Xq(e,h,r,k,m);return}if(k===e.getBody()||!kp(c,k))return;const T=k.parentNode;let F;if(kr(k))F=mf(k),c.isEmpty(k)&&wp(k),Si(e,F),_i(e,F);else if(_(!1))F=w();else if(_(!0)&&T)F=T.insertBefore(h(),k),_i(e,xp(k,"HR")?F:k);else{const G=t4(g).cloneRange();G.setEndAfter(k);const W=G.extractContents();Jq(W),n4(W),F=W.firstChild,c.insertAfter(W,k),e4(c,f,F),r4(c,k),c.isEmpty(k)&&wp(k),F.normalize(),c.isEmpty(F)?(c.remove(F),w()):(Si(e,F),_i(e,F))}c.setAttrib(F,"id",""),e.dispatch("NewBlock",{newBlock:F})},fakeEventName:"insertParagraph"},i4=(e,t,n)=>{const s=new _t(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||z(o)&&o.length>0)return!0;return!1},Kw=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),ti(e,s)},c4=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,a=!1;Xc(s,o).each(_=>{o.setStart(_.startContainer,_.startOffset),o.setEnd(_.endContainer,_.endOffset)});let c=o.startOffset,l=o.startContainer;if(te(l)&&l.hasChildNodes()){const _=c>l.childNodes.length-1;l=l.childNodes[Math.min(c,l.childNodes.length-1)]||l,_&&z(l)?c=l.data.length:c=0}let f=s.getParent(l,s.isBlock);const g=f&&f.parentNode?s.getParent(f.parentNode,s.isBlock):null,m=g?g.nodeName.toUpperCase():"",h=!!(t&&t.ctrlKey);m==="LI"&&!h&&(f=g),z(l)&&c>=l.data.length&&(i4(e.schema,l,f||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),a=!0)),r=s.create("br"),If(s,o,r),Kw(e,r,a),e.undoManager.add()},l4=(e,t)=>{const n=x.fromTag("br");bn(x.fromDom(t),n),e.undoManager.add()},u4=(e,t)=>{d4(e.getBody(),t)||Vs(x.fromDom(t),x.fromTag("br"));const n=x.fromTag("br");Vs(x.fromDom(t),n),Kw(e,n.dom,!1),e.undoManager.add()},f4=e=>ut(e.getNode()),d4=(e,t)=>f4(L.after(t))?!0:sn(e,L.after(t)).map(n=>ut(n.getNode())).getOr(!1),Gw=e=>e&&e.nodeName==="A"&&"href"in e,m4=e=>e.fold(it,Gw,Gw,it),p4=e=>{const t=ae(Xo,e),n=L.fromRangeStart(e.selection.getRng());return bs(t,e.getBody(),n).filter(m4)},g4=(e,t)=>{t.fold(Ae,ae(l4,e),ae(u4,e),Ae)},Yw={insert:(e,t)=>{const n=p4(e);n.isSome()?n.each(ae(g4,e)):c4(e,t)},fakeEventName:"insertLineBreak"},Xw=(e,t)=>Sp(e).filter(n=>t.length>0&&Mn(x.fromDom(n),t)).isSome(),h4=e=>Xw(e,GO(e)),b4=e=>Xw(e,YO(e)),An=cs.generate([{br:[]},{block:[]},{none:[]}]),y4=(e,t)=>b4(e),Jw=e=>(t,n)=>Wq(t)===e,Qw=(e,t)=>(n,s)=>Vq(n)===e.toUpperCase()===t,v4=e=>{const t=Fl(e.dom,e.selection.getStart());return bt(t)},wi=e=>Qw("pre",e),C4=()=>Qw("summary",!0),zl=e=>(t,n)=>qO(t)===e,E4=(e,t)=>h4(e),Hl=(e,t)=>t,_4=e=>{const t=fn(e),n=Fl(e.dom,e.selection.getStart());return ee(n)&&e.schema.isValidChild(n.nodeName,t)},In=(e,t)=>(n,s)=>cn(e,(r,a)=>r&&a(n,s),!0)?y.some(t):y.none(),S4=(e,t)=>tS([In([y4],An.none()),In([wi(!0),v4],An.none()),In([C4()],An.br()),In([wi(!0),zl(!1),Hl],An.br()),In([wi(!0),zl(!1)],An.block()),In([wi(!0),zl(!0),Hl],An.block()),In([wi(!0),zl(!0)],An.br()),In([Jw(!0),Hl],An.br()),In([Jw(!0)],An.block()),In([E4],An.br()),In([Hl],An.br()),In([_4],An.block())],[e,!!(t&&t.shiftKey)]).getOr(An.none()),jl=(e,t,n)=>{t.selection.isCollapsed()||T$(t),!(ee(n)&&_p(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),ee(n)&&Ep(t,e.fakeEventName))},Zw=(e,t)=>{const n=()=>jl(Yw,e,t),s=()=>jl(qw,e,t),o=S4(e,t);switch(KO(e)){case"linebreak":o.fold(n,n,Ae);break;case"block":o.fold(s,s,Ae);break;case"invert":o.fold(s,n,Ae);break;default:o.fold(n,s,Ae);break}},w4=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),$z(e.undoManager),e.undoManager.transact(()=>{Zw(e,t)}))},x4=e=>{e.on("keydown",t=>{t.keyCode===ie.ENTER&&w4(e,t)})},k4=(e,t,n)=>{const s=Ie.os.isMacOS()||Ie.os.isiOS();yi([{keyCode:ie.END,action:Ce(XS,e,!0)},{keyCode:ie.HOME,action:Ce(XS,e,!1)},...s?[]:[{keyCode:ie.HOME,action:Ce(Tl,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ie.END,action:Ce(Tl,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ie.END,action:Ce(sw,e,!0)},{keyCode:ie.HOME,action:Ce(sw,e,!1)},{keyCode:ie.END,action:Ce(Rl,e,!0,t)},{keyCode:ie.HOME,action:Ce(Rl,e,!1,t)}],n).each(o=>{n.preventDefault()})},A4=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||k4(e,t,n)})},N4=e=>{e.on("input",t=>{t.isComposing||c$(e)})},R4=zs(),T4=(e,t,n)=>{yi([{keyCode:ie.PAGE_UP,action:Ce(Rl,e,!1,t)},{keyCode:ie.PAGE_DOWN,action:Ce(Rl,e,!0,t)}],n)},ex=e=>e.stopImmediatePropagation(),tx=e=>e.keyCode===ie.PAGE_UP||e.keyCode===ie.PAGE_DOWN,nx=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",ex,!0):!n&&e.get()&&t.off("NodeChange",ex),e.set(n)},O4=(e,t)=>{if(R4.os.isMacOS())return;const n=wt(!1);e.on("keydown",s=>{tx(s)&&nx(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||T4(e,t,s),tx(s)&&n.get()&&(nx(n,e,!1),e.nodeChanged())})},sx=(e,t)=>{const n=t.container(),s=t.offset();return z(n)?(n.insertData(s,e),y.some(L(n,s+e.length))):Ic(t).map(o=>{const r=x.fromText(e);return t.isAtEnd()?Vs(o,r):bn(o,r),L(r.dom,e.length)})},P4=ae(sx,At),D4=ae(sx," "),B4=e=>t=>t.fold(n=>En(e.dom,L.before(n)),n=>Jt(n),n=>ds(n),n=>sn(e.dom,L.after(n))),I4=(e,t)=>n=>n$(e,n)?P4(t):D4(t),L4=e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0),$4=e=>{const t=L.fromRangeStart(e.selection.getRng()),n=x.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=ae(Xo,e),o=L.fromRangeStart(e.selection.getRng());return bs(s,e.getBody(),o).bind(B4(n)).map(r=>()=>I4(n,t)(r).each(L4(e)))}else return y.none()},F4=(e,t)=>{ew([{keyCode:ie.SPACEBAR,action:Ce($4,e)}],t).each(n=>{t.preventDefault(),_p(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Ep(e,"insertText",{data:" "}))})},M4=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||F4(e,t)})},U4=e=>oD(e)?[{keyCode:ie.TAB,action:Ce(bw,e,!0)},{keyCode:ie.TAB,shiftKey:!0,action:Ce(bw,e,!1)}]:[],z4=(e,t)=>{yi([...U4(e)],t).each(n=>{t.preventDefault()})},H4=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||z4(e,t)})},j4=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Mq(e),hs(e))return wt(null);{const t=BV(e);return TW(e),E3(e,t),Hq(e,t),x4(e),M4(e),N4(e),H4(e),A4(e,t),O4(e,t),t}};class V4{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),a={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!bd(a,n))&&t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Hc(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Hc(t)&&(t.selection.getNode().nodeName==="IMG"?wn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!kP(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,a=>a===o?!0:(r.push(a),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=ma(s.dom.getParents(t,yt,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const ox="x-tinymce/html",Vl=Z(ox),Np="<!-- "+ox+" -->",W4=e=>Np+e,q4=e=>e.replace(Np,""),rx=e=>e.indexOf(Np)!==-1,K4=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),G4=(e,t)=>{let n="<"+e;const s=zu(t,(o,r)=>r+'="'+Gs.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},Y4=(e,t,n)=>{const s=e.split(/\n\n/),o=G4(t,n),r="</"+t+">",a=Le(s,l=>l.split(/\n/).join("<br />")),c=l=>o+l+r;return a.length===1?a[0]:Le(a,c).join("")},ax="%MCEPASTEBIN%",X4=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ax);Ie.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",a=>{a.stopPropagation()}),r.focus(),s.select(r,!0)},J4=(e,t)=>{const n=e.dom;if(Rp(e)){let s;const o=t.get();for(;s=Rp(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Rp=e=>e.dom.get("mcepastebin"),Q4=e=>ee(e)&&e.id==="mcepastebin",Z4=e=>{const t=e.dom,n=(a,c)=>{a.appendChild(c),t.remove(c,!0)},[s,...o]=be(e.getBody().childNodes,Q4);j(o,a=>{n(s,a)});const r=t.select("div[id=mcepastebin]",s);for(let a=r.length-1;a>=0;a--){const c=t.create("div");s.insertBefore(c,r[a]),n(c,r[a])}return s?s.innerHTML:""},ix=e=>e===ax,e8=e=>{const t=wt(null);return{create:()=>X4(e,t),remove:()=>J4(e,t),getEl:()=>Rp(e),getHtml:()=>Z4(e),getLastRng:t.get}},cx=(e,t)=>(q.each(t,n=>{Ye(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),t8=e=>{const t=Ys(),n=Hr({},t);let s="";const o=t.getVoidElements(),r=q.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),c=l=>{const f=l.name,g=l;if(f==="br"){s+=`
`;return}if(f!=="wbr"){if(o[f]&&(s+=" "),r[f]){s+=" ";return}if(l.type===3&&(s+=l.value),!(l.name in t.getVoidElements())){let m=l.firstChild;if(m)do c(m);while(m=m.next)}a[f]&&g.next&&(s+=`
`,f==="p"&&(s+=`
`))}};return e=cx(e,[/<!\[[^\]]+\]>/g]),c(n.parse(e)),s},lx=e=>(e=cx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":At],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),n8=e=>{let t=0;return()=>e+t++},s8=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return q.hasOwn(n,t)?"image/"+n[t]:"image/"+t},o8=(e,t)=>{const n=Hr({sanitize:Vf(e)},e.schema);n.addNodeFilter("meta",o=>{q.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return to({validate:!0},e.schema).serialize(s)},ux=(e,t)=>({content:e,cancelled:t}),r8=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=UB(e,s,n);return ux(o.node.innerHTML,o.isDefaultPrevented())},a8=(e,t,n)=>{const s=MB(e,t,n),o=o8(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?r8(e,o,n):ux(o,s.isDefaultPrevented())},i8=(e,t,n)=>a8(e,t,n),Tp=(e,t)=>(e.insertContent(t,{merge:jP(e),paste:!0}),!0),Op=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),c8=(e,t)=>Op(t)&&mt(ov(e),n=>hh(t.toLowerCase(),`.${n.toLowerCase()}`)),l8=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),u8=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),f8=(e,t,n)=>!e.selection.isCollapsed()&&Op(t)?u8(e,t,n):!1,d8=(e,t,n)=>c8(e,t)?l8(e,t,n):!1,m8=(e,t)=>{q.each([f8,d8,Tp],n=>!n(e,t,Tp))},p8=(e,t,n)=>{n||!VP(e)?Tp(e,t):m8(e,t)},g8=n8("mceclip"),fx=(e,t,n,s)=>{const o=i8(e,t,n);o.cancelled||p8(e,o.content,s)},Wl=(e,t,n)=>{const s=n||rx(t);fx(e,q4(t),s,!1)},Pp=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,`
`),s=Ib(n,qP(e)),o=Y4(s,fn(e),ja(e));fx(e,o,!1,!0)},dx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},io=(e,t)=>t in e&&e[t].length>0,mx=e=>io(e,"text/html")||io(e,"text/plain"),h8=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ee(n)?e.dom.encode(n[1]):void 0},b8=(e,t,n,s)=>{const o=g8(),r=Ky(e)&&ee(n.name),a=r?h8(e,n.name):o,c=r?n.name:void 0,l=t.create(o,n,s,a,c);return t.add(l),l},y8=(e,t)=>{bm(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),a=t.file,c=e.editorUpload.blobCache,l=c.getByData(r,s),f=l??b8(e,c,a,r);Wl(e,`<img src="${f.blobUri()}">`,!1)})},v8=e=>e.type==="paste",C8=e=>Promise.all(Le(e,t=>N_(t).then(n=>({file:t,uri:n})))),E8=e=>{const t=ov(e);return n=>Pt(n.type,"image/")&&mt(t,s=>s8(s)===n.type)},_8=(e,t)=>{const n=t.items?ns(ln(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?ln(t.files):[];return be(n.length>0?n:s,E8(e))},px=(e,t,n)=>{const s=v8(t)?t.clipboardData:t.dataTransfer;if(Dc(e)&&s){const o=_8(e,s);if(o.length>0)return t.preventDefault(),C8(o).then(r=>{n&&e.selection.setRng(n),j(r,a=>{y8(e,a)})}),!0}return!1},S8=e=>{var t,n;return Ie.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},w8=e=>ie.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Dp=(e,t,n,s)=>{let o=lx(n);const r=io(t,Vl())||rx(n),a=!r&&K4(o),c=Op(o);(ix(o)||!o.length||a&&!c)&&(s=!0),(s||c)&&(io(t,"text/plain")&&a?o=t["text/plain"]:o=t8(o)),!ix(o)&&(s?Pp(e,o):Wl(e,o,r))},x8=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{w8(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||S8(r))return;const a=n.get()==="text"||s;s=!1;const c=dx(r.clipboardData);!mx(c)&&px(e,r,o())||(io(c,"text/html")?(r.preventDefault(),Dp(e,c,c["text/html"],a)):io(c,"text/plain")&&io(c,"text/uri-list")?(r.preventDefault(),Dp(e,c,c["text/plain"],a)):(t.create(),wn.setEditorTimeout(e,()=>{const l=t.getHtml();t.remove(),Dp(e,c,l,a)},0)))})},k8=e=>{const t=o=>Pt(o,"webkit-fake-url"),n=o=>Pt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,a)=>{if(!Dc(e)&&s(a))for(const c of o){const l=c.attr("src");ne(l)&&!c.attr("data-mce-object")&&l!==Ie.transparentSrc&&(t(l)||!KP(e)&&n(l))&&c.remove()}})},A8=(e,t,n)=>{x8(e,t,n),k8(e)},N8=(e,t)=>{t.get()==="text"?(t.set("html"),rC(e,!1)):(t.set("text"),rC(e,!0)),e.focus()},R8=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{N8(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&Wl(e,s.html,s.internal),s.text&&Pp(e,s.text)})},T8=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(Vl(),t),!0}catch{return!1}else return!1},gx=(e,t,n,s)=>{T8(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},hx=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(a),s.add(e.getBody(),r);const c=o.getRng();a.focus();const l=s.createRng();l.selectNodeContents(a),o.setRng(l),wn.setEditorTimeout(e,()=>{o.setRng(c),s.remove(r),n()},0)},bx=e=>({html:W4(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),O8=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),yx=e=>!e.selection.isCollapsed()||O8(e),P8=e=>t=>{!t.isDefaultPrevented()&&yx(e)&&gx(t,bx(e),hx(e),()=>{if(Ie.browser.isChromium()||Ie.browser.isFirefox()){const n=e.selection.getRng();wn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},D8=e=>t=>{!t.isDefaultPrevented()&&yx(e)&&gx(t,bx(e),hx(e),Ae)},B8=e=>{e.on("cut",P8(e)),e.on("copy",D8(e))},vx=(e,t)=>{var n,s;return Ko.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},I8=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},Cx=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},L8=e=>mt(e.files,t=>/^image\//.test(t.type)),$8=(e,t,n,s)=>{const o=e.getParent(n,r=>Do(t,r));if(o&&Se(s,"text/html")){const r=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!Pn(r.querySelector(o.nodeName.toLowerCase()))}else return!1},F8=(e,t)=>{FP(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),Dc(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&L8(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=vx(e,n);if(bt(s))return;const o=dx(n.dataTransfer),r=io(o,Vl());if((!mx(o)||I8(o))&&px(e,n,s))return;const a=o[Vl()],c=a||o["text/html"]||o["text/plain"],l=$8(e.dom,e.schema,s.startContainer,o);t.get()&&!l||c&&(n.preventDefault(),wn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{a&&e.execCommand("Delete"),Cx(e,s);const f=lx(c);o["text/html"]?Wl(e,f,r):Pp(e,f)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{Dc(e)&&!t.get()&&(n.preventDefault(),Cx(e,vx(e,n))),n.type==="dragend"&&t.set(!1)})},M8=e=>{const t=o=>r=>{o(e,r)},n=MP(e);$e(n)&&e.on("PastePreProcess",t(n));const s=UP(e);$e(s)&&e.on("PastePostProcess",t(s))},U8=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},z8=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Ex=e=>q.trim(e).replace(z8,zc).toLowerCase(),H8=(e,t,n)=>{const s=zP(e);if(n||s==="all"||!HP(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(c,l,f,g)=>{const m=r.parseStyle(r.decode(f)),h={};for(let w=0;w<o.length;w++){const C=m[o[w]];let S=C,N=r.getStyle(a,o[w],!0);/color/.test(o[w])&&(S=Ex(S),N=Ex(N)),N!==S&&(h[o[w]]=C)}const _=r.serializeStyle(h,"span");return _?l+' style="'+_+'"'+g:l+g})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,a,c,l)=>a+' style="'+c+'"'+l),t},j8=e=>{(Ie.browser.isChromium()||Ie.browser.isSafari())&&U8(e,H8)},V8=e=>{const t=wt(!1),n=wt(WP(e)?"text":"html"),s=e8(e);j8(e),R8(e,n),M8(e),e.on("PreInit",()=>{B8(e),F8(e,t),A8(e,s,n)})},W8=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},q8=e=>{e.parser.addNodeFilter("details",t=>{j(t,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),e.serializer.addNodeFilter("details",t=>{j(t,n=>{const s=n.attr("data-mce-open");n.attr("open",ne(s)?s:null),n.attr("data-mce-open",null)})})},K8=e=>{W8(e),q8(e)},G8=ut,_x=z,Y8=e=>Qe(e.dom),X8=e=>Hn(e.dom),Sx=e=>t=>Fe(x.fromDom(e),t),J8=(e,t)=>xo(x.fromDom(e),n=>X8(n)||yn(n),Sx(t)).getOr(x.fromDom(t)).dom,wx=(e,t)=>xo(x.fromDom(e),Y8,Sx(t)),xx=(e,t,n)=>{const s=new _t(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let a=n?e:o();a&&!G8(a);a=o())Dn(a)&&(r=a);return r},Q8=(e,t)=>{const s=L.fromRangeStart(e).getNode(),o=J8(s,t),r=xx(s,o,!1),a=xx(s,o,!0),c=document.createRange();return wx(r,o).fold(()=>{_x(r)?c.setStart(r,0):c.setStartBefore(r)},l=>c.setStartBefore(l.dom)),wx(a,o).fold(()=>{_x(a)?c.setEnd(a,a.data.length):c.setEndAfter(a)},l=>c.setEndAfter(l.dom)),c},Z8=e=>{const t=Q8(e.selection.getRng(),e.getBody());e.selection.setRng(tm(t))},e5=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),Z8(e))})};var Gr;(function(e){e.Before="before",e.After="after"})(Gr||(Gr={}));const t5=(e,t)=>Math.abs(e.left-t),n5=(e,t)=>Math.abs(e.right-t),s5=(e,t)=>e>=t.top&&e<=t.bottom,o5=(e,t)=>e.top<t.bottom&&e.bottom>t.top,r5=(e,t)=>{const n=iO(e,t)/Math.min(e.height,t.height);return o5(e,t)&&n>.5},a5=(e,t)=>{const n=be(e,s=>s5(t,s));return aO(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=ua(e,a=>r5(a,s));return[o,r]})},i5=(e,t)=>({node:e.node,position:t5(e,t)<n5(e,t)?Gr.Before:Gr.After}),c5=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Bp=(e,t,n)=>{const s=g=>Dn(g.node)?y.some(g):te(g.node)?Bp(ln(g.node.childNodes),t,n):y.none(),o=(g,m)=>{if(g.length>=2){const h=s(g[0]).getOr(g[0]),_=s(g[1]).getOr(g[1]);if(Math.abs(m(h,t,n)-m(_,t,n))<2){if(z(h.node))return y.some(h);if(z(_.node))return y.some(_)}}return y.none()},r=(g,m)=>{const h=vo(g,(_,w)=>m(_,t,n)-m(w,t,n));return o(h,m).orThunk(()=>hr(h,s))},[a,c]=a5(pS(e),n),{pass:l,fail:f}=ua(c,g=>g.top<n);return r(a,c5).orThunk(()=>r(f,hy)).orThunk(()=>r(l,hy))},l5=(e,t,n,s)=>{const o=(r,a)=>{const c=f=>te(f)&&f.classList.contains("mce-drag-container"),l=be(r.dom.childNodes,Gi(c));return a.fold(()=>Bp(l,n,s),f=>{const g=be(l,m=>m!==f.dom);return Bp(g,n,s)}).orThunk(()=>(Fe(r,e)?y.none():Qu(r)).bind(g=>o(g,y.some(r))))};return o(t,y.none())},u5=(e,t,n)=>{const s=x.fromDom(e),o=As(s),a=x.fromPoint(o,t,n).filter(c=>ks(s,c)).getOr(s);return l5(s,a,t,n)},kx=(e,t,n)=>u5(e,t,n).filter(s=>qa(s.node)).map(s=>i5(s,t)),Ax=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,a=o.defaultView;return{top:s.top+((t=a==null?void 0:a.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=a==null?void 0:a.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},f5=e=>e.inline?Ax(e.getBody()):{left:0,top:0},d5=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},m5=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},p5=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=Ax(e.getContentAreaContainer()),s=m5(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},g5=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),h5=(e,t)=>g5(f5(e),d5(e),p5(e,t)),b5=(e,t,n)=>({...t,dataTransfer:null,type:e,...n}),y5=(e,t)=>{const n=sh("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:e,composedPath:n,initEvent:n,preventDefault:Ae,stopImmediatePropagation:Ae,stopPropagation:Ae,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:null,...t}},Nx=e=>({target:e,srcElement:e}),v5=e=>t=>y5(e,Nx(t)),Ip=e=>(t,n)=>b5(e,t,Nx(n)),C5=Ip("dragstart"),E5=Ip("drop"),_5=v5("dragend"),Rx=Ip("dragend"),ql=32,S5=100,Kl=8,Gl=16,Tx=Qe,w5=fO(Tx,Hn),x5=(e,t,n)=>Tx(n)&&n!==t&&e.isEditable(n.parentElement),k5=(e,t,n)=>bt(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),A5=e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},N5=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),a.appendChild(r),a},R5=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Yl=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},Ox=Yl("left",-ql),Px=Yl("left",ql),Dx=Yl("top",-ql),Bx=Yl("top",ql),T5=(e,t,n,s,o,r,a,c,l,f,g,m)=>{let h=0,_=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(h=t.pageX+n-o),t.pageY+s>r&&(_=t.pageY+s-r),e.style.width=n-h+"px",e.style.height=s-_+"px";const w=l.clientHeight,C=l.clientWidth,S=a+l.getBoundingClientRect().top,N=c+l.getBoundingClientRect().left;g.on(k=>{k.intervalId.clear(),k.dragging&&m&&(a+Kl>=w?k.intervalId.set(Bx(f)):a-Kl<=0?k.intervalId.set(Dx(f)):c+Kl>=C?k.intervalId.set(Px(f)):c-Kl<=0?k.intervalId.set(Ox(f)):S+Gl>=window.innerHeight?k.intervalId.set(Bx(window)):S-Gl<=0?k.intervalId.set(Dx(window)):N+Gl>=window.innerWidth?k.intervalId.set(Px(window)):N-Gl<=0&&k.intervalId.set(Ox(window)))})},Ix=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},O5=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);Ix(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Oo(x.fromDom(n))},P5=e=>e.button===0,D5=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),B5=(e,t)=>n=>{if(P5(n)){const s=Ct(t.dom.getParents(n.target),w5).getOr(null);if(ee(s)&&x5(t.dom,t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),a=t.getDoc().documentElement;e.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:N5(t,s,s.offsetWidth,s.offsetHeight),intervalId:Y1(S5)})}}},I5=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),kx(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{const o=e._selectionOverrides.showCaret(1,s.node,s.position===Gr.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})},L5=(e,t)=>{const n=Ac((o,r)=>I5(t,o,r),0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const a=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&a>10){if(t.dispatch("dragstart",C5(o,r.element)).isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const c=o.currentTarget===t.getDoc().documentElement,l=D5(r,h5(t,o));R5(r.ghost,t.getBody()),T5(r.ghost,l,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,c),n.throttle(o.clientX,o.clientY)}})},$5=e=>{const t=e.getSel();if(ee(t)){const s=t.getRangeAt(0).startContainer;return z(s)?s.parentNode:s}else return null},F5=(e,t)=>n=>{e.on(s=>{var o;if(s.intervalId.clear(),s.dragging){if(k5(t,$5(t.selection),s.element)){const r=A5(s.element),a=(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&o!==void 0?o:t.getBody();t.dispatch("drop",E5(n,a)).isDefaultPrevented()||t.undoManager.transact(()=>{O5(t.dom,s.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()})}t.dispatch("dragend",Rx(n,t.getBody()))}}),$x(e)},Lx=(e,t,n)=>{e.on(s=>{if(s.intervalId.clear(),s.dragging){const o=n.fold(()=>_5(s.element),r=>Rx(r,s.element));t.dispatch("dragend",o)}}),$x(e)},M5=(e,t)=>n=>Lx(e,t,y.some(n)),$x=e=>{e.on(t=>{t.intervalId.clear(),Ix(t.ghost)}),e.clear()},U5=e=>{const t=Xs(),n=Ve.DOM,s=document,o=B5(t,e),r=L5(t,e),a=F5(t,e),c=M5(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",a),n.bind(s,"mousemove",r),n.bind(s,"mouseup",c),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",c)}),e.on("keydown",l=>{l.keyCode===ie.ESC&&Lx(t,e,y.none())})},z5=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(Ge(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&El(e,"Dropped file type is not supported"))}},n=o=>{Zc(e,o.target)&&t(o)},s=()=>{const o=Ve.DOM,r=e.dom,a=document,c=e.inline?e.getBody():e.getDoc(),l=["drop","dragover"];j(l,f=>{o.bind(a,f,n),r.bind(c,f,t)}),e.on("remove",()=>{j(l,f=>{o.unbind(a,f,n),r.unbind(c,f,t)})})};e.on("init",()=>{wn.setEditorTimeout(e,s,0)})},H5=e=>{U5(e),NP(e)&&z5(e)},j5=e=>{const t=Ac(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=zm(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},V5=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(is(n)){const s=Jo(e.getBody(),n),o=Qe(s)?s:n;e.selection.getNode()!==o&&mi(e,o).each(r=>e.selection.setRng(r))}})})},xi=Qe,Fx=(e,t)=>Jo(e.getBody(),t),W5=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=hD(e,s,n.isBlock,()=>Go(e)),r="sel-"+n.uniqueId(),a="data-mce-selected";let c;const l=W=>ee(W)&&n.hasClass(W,"mce-offscreen-selection"),f=W=>W!==s&&(xi(W)||is(W))&&n.isChildOf(W,s)&&n.isEditable(W.parentNode),g=W=>{W&&t.setRng(W)},m=(W,B,D,Q=!0)=>e.dispatch("ShowCaret",{target:B,direction:W,before:D}).isDefaultPrevented()?null:(Q&&t.scrollIntoView(B,W===-1),o.show(D,B)),h=W=>{W.hasAttribute("data-mce-caret")&&(mf(W),t.scrollIntoView(W))},_=()=>{e.on("click",B=>{n.isEditable(B.target)||(B.preventDefault(),e.focus())}),e.on("blur NewBlock",T),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",B=>{const D=B.target,Q=Fx(e,D);xi(Q)?(B.preventDefault(),mi(e,Q).each(R)):f(D)&&mi(e,D).each(R)},!0),e.on("mousedown",B=>{const D=B.target;if(D!==s&&D.nodeName!=="HTML"&&!n.isChildOf(D,s)||!SH(e,B.clientX,B.clientY))return;T(),G();const Q=Fx(e,D);xi(Q)?(B.preventDefault(),mi(e,Q).each(R)):kx(s,B.clientX,B.clientY).each(ce=>{B.preventDefault();const de=m(1,ce.node,ce.position===Gr.Before,!1);g(de),te(Q)?Q.focus():e.getBody().focus()})}),e.on("keypress",B=>{ie.modifierPressed(B)||xi(t.getNode())&&B.preventDefault()}),e.on("GetSelectionRange",B=>{let D=B.range;if(c){if(!c.parentNode){c=null;return}D=D.cloneRange(),D.selectNode(c),B.range=D}}),e.on("SetSelectionRange",B=>{B.range=S(B.range);const D=R(B.range,B.forward);D&&(B.range=D)});const W=B=>te(B)&&B.id==="mcepastebin";e.on("AfterSetSelectionRange",B=>{const D=B.range,Q=D.startContainer.parentElement;!C(D)&&!W(Q)&&G(),l(Q)||T()}),H5(e),j5(e),V5(e)},w=W=>vn(W)||bc(W)||yc(W),C=W=>w(W.startContainer)||w(W.endContainer),S=W=>{const B=e.schema.getVoidElements(),D=n.createRng(),Q=W.startContainer,ce=W.startOffset,de=W.endContainer,ye=W.endOffset;return Se(B,Q.nodeName.toLowerCase())?ce===0?D.setStartBefore(Q):D.setStartAfter(Q):D.setStart(Q,ce),Se(B,de.nodeName.toLowerCase())?ye===0?D.setEndBefore(de):D.setEndAfter(de):D.setEnd(de,ye),D},N=(W,B)=>{const D=x.fromDom(e.getBody()),Q=e.getDoc(),ce=ka(D,"#"+r).getOrThunk(()=>{const ke=x.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Q);return kt(ke,"id",r),Et(D,ke),ke}),de=n.createRng();_r(ce),Ao(ce,[x.fromText(At,Q),x.fromDom(B),x.fromText(At,Q)]),de.setStart(ce.dom.firstChild,1),de.setEnd(ce.dom.lastChild,0),rc(ce,{top:n.getPos(W,e.getBody()).y+"px"}),xC(ce);const ye=t.getSel();return ye&&(ye.removeAllRanges(),ye.addRange(de)),de},k=W=>{const B=W.cloneNode(!0),D=e.dispatch("ObjectSelected",{target:W,targetClone:B});if(D.isDefaultPrevented())return null;const Q=N(W,D.targetClone),ce=x.fromDom(W);return j(Ut(x.fromDom(e.getBody()),`*[${a}]`),de=>{Fe(ce,de)||Dt(de,a)}),n.getAttrib(W,a)||W.setAttribute(a,"1"),c=W,G(),Q},R=(W,B)=>{if(!W)return null;if(W.collapsed){if(!C(W)){const de=B?1:-1,ye=Xa(de,s,W),ke=ye.getNode(!B);if(ee(ke)){if(qa(ke))return m(de,ke,B?!ye.isAtEnd():!1,!1);if(Ks(ke)&&Qe(ke.nextSibling)){const Ue=n.createRng();return Ue.setStart(ke,0),Ue.setEnd(ke,0),Ue}}const De=ye.getNode(B);if(ee(De)){if(qa(De))return m(de,De,B?!1:!ye.isAtEnd(),!1);if(Ks(De)&&Qe(De.previousSibling)){const Ue=n.createRng();return Ue.setStart(De,1),Ue.setEnd(De,1),Ue}}}return null}let D=W.startContainer,Q=W.startOffset;const ce=W.endOffset;if(z(D)&&Q===0&&xi(D.parentNode)&&(D=D.parentNode,Q=n.nodeIndex(D),D=D.parentNode),!te(D))return null;if(ce===Q+1&&D===W.endContainer){const de=D.childNodes[Q];if(f(de))return k(de)}return null},T=()=>{c&&c.removeAttribute(a),ka(x.fromDom(e.getBody()),"#"+r).each(st),c=null},F=()=>{o.destroy(),c=null},G=()=>{o.hide()};return hs(e)||_(),{showCaret:m,showBlockCaretContainer:h,hideFakeCaret:G,destroy:F}},q5=(e,t)=>{let n=t;for(let s=e.previousSibling;z(s);s=s.previousSibling)n+=s.data.length;return n},Mx=(e,t,n,s,o)=>{if(z(n)&&(s<0||s>n.data.length))return[];const r=o&&z(n)?[q5(n,s)]:[s];let a=n;for(;a!==t&&a.parentNode;)r.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?r.reverse():[]},Lp=(e,t,n,s,o,r,a=!1)=>{const c=Mx(e,t,n,s,a),l=Mx(e,t,o,r,a);return{start:c,end:l}},Ux=(e,t)=>{const n=t.slice(),s=n.pop();return Fn(s)?cn(n,(r,a)=>r.bind(c=>y.from(c.childNodes[a])),y.some(e)).bind(r=>z(r)&&(s<0||s>r.data.length)?y.none():y.some({node:r,offset:s})):y.none()},zx=(e,t)=>Ux(e,t.start).bind(({node:n,offset:s})=>Ux(e,t.end).map(({node:o,offset:r})=>{const a=document.createRange();return a.setStart(n,s),a.setEnd(o,r),a})),K5=(e,t,n,s=!1)=>Lp(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Yr=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t),Yr(e,s,n)}},Xl=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(z(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),z(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Yr(e,o,n),o!==r&&Yr(e,r,n))},$p=(e,t)=>y.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Hx=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:My(s).concat(e.blockPatterns),inlinePatterns:Uy(s).concat(e.inlinePatterns)}},jx=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},G5=e=>/^\s[^\s]/.test(e),Vx=(e,t,n)=>{S3(t,0,t).each(o=>{const r=o.container;yw(r,n.start.length,t).each(l=>{const f=e.createRng();f.setStart(r,0),f.setEnd(l.container,l.offset),Xl(e,f,g=>g===t)});const a=x.fromDom(r),c=dc(a);G5(c)&&yT(a,c.slice(1))})},Y5=(e,t)=>{const n=e.dom,s=t.pattern,o=zx(n.getRoot(),t.range).getOrDie("Unable to resolve path range"),r=(a,c)=>{const l=c.get(a);return at(l)&&tn(l).exists(f=>Se(f,"block"))};return $p(e,o).each(a=>{s.type==="block-format"?r(s.format,e.formatter)&&e.undoManager.transact(()=>{Vx(e.dom,a,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{Vx(e.dom,a,s),e.execCommand(s.cmd,!1,s.value)})}),!0},X5=e=>vo(e,(t,n)=>n.start.length-t.start.length),J5=(e,t)=>{const n=X5(e),s=t.replace(At," ");return Ct(n,o=>t.indexOf(o.start)===0||s.indexOf(o.start)===0)},Q5=(e,t,n,s)=>{var o;const r=e.dom,a=fn(e);if(!r.is(t,a))return[];const c=(o=t.textContent)!==null&&o!==void 0?o:"";return J5(n.blockPatterns,c).map(l=>q.trim(c).length===l.start.length?[]:[{pattern:l,range:Lp(r,r.getRoot(),t,0,t,0,s)}]).getOr([])},Z5=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();j(t,s=>Y5(e,s)),e.selection.moveToBookmark(n)},Wx=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Jl=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},qx=(e,t,n)=>{const s=zx(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,a=s.endOffset===0?r:r.splitText(s.endOffset),c=s.startOffset===0?o:o.splitText(s.startOffset),l=c.parentNode,f=a.parentNode;return{prefix:t,end:f.insertBefore(Wx(e,t+"-end"),a),start:l.insertBefore(Wx(e,t+"-start"),c)}},Kx=(e,t,n)=>{Yr(e,e.get(t.prefix+"-end"),n),Yr(e,e.get(t.prefix+"-start"),n)},Fp=e=>e.start.length===0,e6=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),a=o.lastIndexOf(e);return a!==-1?a+e.length:r!==-1?r+1:-1},Gx=(e,t,n,s)=>{const o=t.start;return lp(e,s.container,s.offset,e6(o),n).bind(a=>{var c,l;const f=(l=(c=n.textContent)===null||c===void 0?void 0:c.indexOf(o))!==null&&l!==void 0?l:-1;if(f!==-1&&a.offset>=f+o.length){const m=e.createRng();return m.setStart(a.container,a.offset-o.length),m.setEnd(a.container,a.offset),y.some(m)}else{const m=a.offset-o.length;return cp(a.container,m,n).map(h=>{const _=e.createRng();return _.setStart(h.container,h.offset),_.setEnd(a.container,a.offset),_}).filter(h=>h.toString()===o).orThunk(()=>Gx(e,t,n,Gn(a.container,0)))}})},t6=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const a=e.createRng();return a.setStart(n,s),a.setEnd(n,s),y.some(a)}return ip(n,s,o).bind(a=>Gx(e,t,o,a).bind(l=>{var f;if(r){if(l.endContainer===a.container&&l.endOffset===a.offset)return y.none();if(a.offset===0&&((f=l.endContainer.textContent)===null||f===void 0?void 0:f.length)===l.endOffset)return y.none()}return y.some(l)}))},n6=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),a=n.pattern,c=n.position.container,l=n.position.offset;return cp(c,l-n.pattern.end.length,t).bind(f=>{const g=Lp(o,r,f.container,f.offset,c,l,s);if(Fp(a))return y.some({matches:[{pattern:a,startRng:g,endRng:g}],position:f});{const m=Ql(e,n.remainingPatterns,f.container,f.offset,t,s),h=m.getOr({matches:[],position:f}),_=h.position;return t6(o,a,_.container,_.offset,t,m.isNone()).map(C=>{const S=K5(o,r,C,s);return{matches:h.matches.concat([{pattern:a,startRng:S,endRng:g}]),position:Gn(C.startContainer,C.startOffset)}})}})},Ql=(e,t,n,s,o,r)=>{const a=e.dom;return ip(n,s,a.getRoot()).bind(c=>{const l=jx(a,o,n,s);for(let f=0;f<t.length;f++){const g=t[f];if(!hh(l,g.end))continue;const m=t.slice();m.splice(f,1);const h=n6(e,o,{pattern:g,remainingPatterns:m,position:c},r);if(h.isNone()&&s>0)return Ql(e,t,n,s-1,o,r);if(h.isSome())return h}return y.none()})},Yx=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?j(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},s6=(e,t,n,s)=>{const o=Jl(e.dom,n);Xl(e.dom,o,s),Yx(e,t,o)},o6=(e,t,n,s,o)=>{const r=e.dom,a=Jl(r,s),c=Jl(r,n);Xl(r,c,o),Xl(r,a,o);const l={prefix:n.prefix,start:n.end,end:s.start},f=Jl(r,l);Yx(e,t,f)},r6=(e,t)=>{const n=uy("mce_textpattern"),s=fa(t,(o,r)=>{const a=qx(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:a}])},[]);return fa(s,(o,r)=>{const a=s.length-o.length-1,c=Fp(r.pattern)?r.endMarker:qx(e,n+`_start${a}`,r.startRng);return o.concat([{...r,startMarker:c}])},[])},a6=e=>vo(e,(t,n)=>n.end.length-t.end.length),i6=(e,t)=>{const n=Us(e,s=>mt(t,o=>s.pattern.start===o.pattern.start&&s.pattern.end===o.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},Xx=(e,t,n,s,o,r)=>{const a=Ql(e,o.inlinePatterns,n,s,t,r).fold(()=>[],l=>l.matches),c=Ql(e,a6(o.inlinePatterns),n,s,t,r).fold(()=>[],l=>l.matches);return i6(a,c)},Jx=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=r6(n,t);j(o,r=>{const a=n.getParent(r.startMarker.start,n.isBlock),c=l=>l===a;Fp(r.pattern)?s6(e,r.pattern,r.endMarker,c):o6(e,r.pattern,r.startMarker,r.endMarker,c),Kx(n,r.endMarker,c),Kx(n,r.startMarker,c)}),e.selection.moveToBookmark(s)},c6=(e,t)=>{const n=e.selection.getRng();return $p(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),a=Hx(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),c=Xx(e,s,n.startContainer,r,a,!0),l=Q5(e,s,a,!0);return l.length>0||c.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(wr),Jx(e,c),Z5(e,l);const f=e.selection.getRng(),g=ip(f.startContainer,f.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),g.each(m=>{const h=m.container;h.data.charAt(m.offset-1)===wr&&(h.deleteData(m.offset-1,1),Yr(e.dom,h.parentNode,_=>_===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},l6=(e,t)=>{const n=e.selection.getRng();$p(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=jx(e.dom,s,n.startContainer,o),a=Hx(t,s,r),c=Xx(e,s,n.startContainer,o,a,!1);c.length>0&&e.undoManager.transact(()=>{Jx(e,c)})})},Qx=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},u6=(e,t)=>Qx(e,t,(n,s)=>n===s.keyCode&&!ie.modifierPressed(s)),f6=(e,t)=>Qx(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),d6=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>LO(GP(e),YP(e)),o=()=>eD(e);e.on("keydown",a=>{if(a.keyCode===13&&!ie.modifierPressed(a)&&e.selection.isCollapsed()){const c=s();(c.inlinePatterns.length>0||c.blockPatterns.length>0||o())&&c6(e,c)&&a.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const a=s();(a.inlinePatterns.length>0||o())&&l6(e,a)}};e.on("keyup",a=>{u6(n,a)&&r()}),e.on("keypress",a=>{f6(t,a)&&wn.setEditorTimeout(e,r)})},m6=e=>{d6(e)},p6=e=>{const t=q.each,n=ie.BACKSPACE,s=ie.DELETE,o=e.dom,r=e.selection,a=e.parser,c=Ie.browser,l=c.isFirefox(),f=c.isChromium()||c.isSafari(),g=Ie.deviceType.isiPhone()||Ie.deviceType.isiPad(),m=Ie.os.isMacOS()||Ie.os.isiOS(),h=(Y,ue)=>{try{e.getDoc().execCommand(Y,!1,String(ue))}catch{}},_=Y=>Y.isDefaultPrevented(),w=()=>{const Y=me=>{const X=o.create("body"),xe=me.cloneContents();return X.appendChild(xe),r.serializer.serialize(X,{format:"html"})},ue=me=>{const X=Y(me),xe=o.createRng();xe.selectNode(e.getBody());const we=Y(xe);return X===we};e.on("keydown",me=>{const X=me.keyCode;if(!_(me)&&(X===s||X===n)&&e.selection.isEditable()){const xe=e.selection.isCollapsed(),we=e.getBody();if(xe&&!o.isEmpty(we)||!xe&&!ue(e.selection.getRng()))return;me.preventDefault(),e.setContent(""),we.firstChild&&o.isBlock(we.firstChild)?e.selection.setCursorLocation(we.firstChild,0):e.selection.setCursorLocation(we,0),e.nodeChanged()}})},C=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},S=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",Y=>{let ue;if(Y.target===e.getDoc().documentElement)if(ue=r.getRng(),e.getBody().focus(),Y.type==="mousedown"){if(vn(ue.startContainer))return;r.placeCaretAt(Y.clientX,Y.clientY)}else r.setRng(ue)})},N=()=>{e.on("keydown",Y=>{if(!_(Y)&&Y.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const ue=r.getNode(),me=ue.previousSibling;if(ue.nodeName==="HR"){o.remove(ue),Y.preventDefault();return}me&&me.nodeName&&me.nodeName.toLowerCase()==="hr"&&(o.remove(me),Y.preventDefault())}}})},k=()=>{Range.prototype.getClientRects||e.on("mousedown",Y=>{if(!_(Y)&&Y.target.nodeName==="HTML"){const ue=e.getBody();ue.blur(),wn.setEditorTimeout(e,()=>{ue.focus()})}})},R=()=>{const Y=nv(e);e.on("click",ue=>{const me=ue.target;/^(IMG|HR)$/.test(me.nodeName)&&o.isEditable(me.parentNode)&&(ue.preventDefault(),e.selection.select(me),e.nodeChanged()),me.nodeName==="A"&&o.hasClass(me,Y)&&me.childNodes.length===0&&o.isEditable(me.parentNode)&&(ue.preventDefault(),r.select(me))})},T=()=>{const Y=()=>{const me=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const X=r.getStart();X!==e.getBody()&&(o.setAttrib(X,"style",null),t(me,xe=>{X.setAttributeNode(xe.cloneNode(!0))}))}},ue=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",me=>{let X;return!_(me)&&(me.keyCode===8||me.keyCode===46)&&ue()?(X=Y(),e.getDoc().execCommand("delete",!1),X(),me.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",me=>{if(!_(me)&&ue()){const X=Y();wn.setEditorTimeout(e,()=>{X()})}})},F=()=>{e.on("keydown",Y=>{if(!_(Y)&&Y.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const ue=r.getNode().previousSibling;if(ue&&ue.nodeName&&ue.nodeName.toLowerCase()==="table")return Y.preventDefault(),!1}return!0})},G=()=>{e.on("keydown",Y=>{if(_(Y)||Y.keyCode!==ie.BACKSPACE)return;let ue=r.getRng();const me=ue.startContainer,X=ue.startOffset,xe=o.getRoot();let we=me;if(!(!ue.collapsed||X!==0)){for(;we.parentNode&&we.parentNode.firstChild===we&&we.parentNode!==xe;)we=we.parentNode;we.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,we),ue=o.createRng(),ue.setStart(me,0),ue.setEnd(me,0),r.setRng(ue))}})},W=()=>{const Y=()=>{h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),Qy(e)||h("enableObjectResizing",!1)};ev(e)||e.on("BeforeExecCommand mousedown",Y)},B=()=>{const Y=()=>{t(o.select("a:not([data-mce-block])"),ue=>{var me;let X=ue.parentNode;const xe=o.getRoot();if((X==null?void 0:X.lastChild)===ue){for(;X&&!o.isBlock(X);){if(((me=X.parentNode)===null||me===void 0?void 0:me.lastChild)!==X||X===xe)return;X=X.parentNode}o.add(X,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",ue=>{(ue.type==="setcontent"||ue.command==="mceInsertLink")&&Y()})},D=()=>{e.on("init",()=>{h("DefaultParagraphSeparator",fn(e))})},Q=Y=>{const ue=Y.getBody(),me=Y.selection.getRng();return me.startContainer===me.endContainer&&me.startContainer===ue&&me.startOffset===0&&me.endOffset===ue.childNodes.length},ce=()=>{e.on("keyup focusin mouseup",Y=>{!ie.modifierPressed(Y)&&!Q(e)&&r.normalize()},!0)},de=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ye=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ke=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Y=>{let ue;Y.target.nodeName==="HTML"&&(ue=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(ue),e.selection.normalize(),e.nodeChanged())}))},De=()=>{m&&e.on("keydown",Y=>{ie.metaKeyPressed(Y)&&!Y.shiftKey&&(Y.keyCode===37||Y.keyCode===39)&&(Y.preventDefault(),e.selection.getSel().modify("move",Y.keyCode===37?"backward":"forward","lineboundary"))})},Ue=()=>{e.on("click",Y=>{let ue=Y.target;do if(ue.tagName==="A"){Y.preventDefault();return}while(ue=ue.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},nt=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Y=>{Y.preventDefault()})})},Rt=()=>{a.addNodeFilter("br",Y=>{let ue=Y.length;for(;ue--;)Y[ue].attr("class")==="Apple-interchange-newline"&&Y[ue].remove()})},gt=Ae,H=()=>{if(!l||e.removed)return!1;const Y=e.selection.getSel();return!Y||!Y.rangeCount||Y.rangeCount===0},re=()=>{f&&(S(),R(),nt(),C(),g&&(ye(),ke(),Ue())),l&&(k(),W(),de(),De())},Ne=()=>{G(),w(),Ie.windowsPhone||ce(),f&&(S(),R(),D(),nt(),F(),Rt(),g?(ye(),ke(),Ue()):C()),l&&(N(),k(),T(),W(),B(),de(),De(),F())};return hs(e)?re():Ne(),{refreshContentEditable:gt,isHidden:H}},Mp=Ve.DOM,g6=(e,t)=>{const n=x.fromDom(e.getBody()),s=nf(js(n)),o=x.fromTag("style");kt(o,"type","text/css"),Et(o,x.fromText(t)),Et(s,o),e.on("remove",()=>{st(o)})},h6=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Up=e=>pa(e,t=>Kt(t)===!1),Zx=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Up({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:h6(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},ek=e=>{const t=e.options.get;return Up({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},b6=e=>{const t=e.options.get;return{...Zx(e),...ek(e),...Up({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},y6=e=>{const t=Hr(Zx(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let a=n.length;for(;a--;){const c=n[a];let l=c.attr(s);if(l&&!c.attr(r)){if(l.indexOf("data:")===0||l.indexOf("blob:")===0)continue;s==="style"?(l=o.serializeStyle(o.parseStyle(l),c.name),l.length||(l=null),c.attr(r,l),c.attr(s,l)):s==="tabindex"?(c.attr(r,l),c.attr(s,null)):c.attr(r,e.convertURL(l,s,c.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),QP(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new Qt("br",1))}}),t},v6=e=>{const t=IP(e);t&&wn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},C6=e=>{const t=e.dom.getRoot();!e.inline&&(!Hc(e)||e.selection.getStart(!0)===t)&&Jt(t).each(n=>{const s=n.getNode(),o=Ts(s)?Jt(s).getOr(n):n;e.selection.setRng(o.toRange())})},E6=e=>{e.bindPendingEventDelegates(),e.initialized=!0,PB(e),e.focus(!0),C6(e),e.nodeChanged({initial:!0});const t=DP(e);$e(t)&&t.call(e,e),v6(e)},tk=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,_6=(e,t,n)=>{const s=[tk(e).loadAll(t)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])},nk=e=>{const t=tk(e),n=Jy(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let l="";q.each(e.contentStyles,f=>{l+=f+`\r
`}),e.dom.addStyle(l)}const a=Promise.all(_6(e,s,n)).then(r).catch(r),c=cP(e);return c&&g6(e,c),a},S6=e=>{const t=e.getDoc(),n=e.getBody();TB(e),LP(e)||(t.body.spellcheck=!1,Mp.setAttrib(n,"spellcheck","false")),e.quirks=p6(e),OB(e);const s=lP(e);s!==void 0&&(n.dir=s);const o=$P(e);o&&e.on("BeforeSetContent",r=>{q.each(o,a=>{r.content=r.content.replace(a,c=>"<!--mce:protected "+escape(c)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},w6=e=>{hs(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},zp=e=>{e.removed!==!0&&(w6(e),E6(e))},sk=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Mp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=ev(e),e.readonly||(e.inline&&Mp.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=KH(e),e.schema=Ys(ek(e)),e.dom=Ve(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:oP(e),referrerPolicy:zf(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=y6(e),e.serializer=b0(b6(e),e),e.selection=h0(e.dom,e.getWin(),e.serializer,e),e.annotator=Qv(e),e.formatter=P0(e),e.undoManager=B0(e),e._nodeChangeDispatcher=new V4(e),e._selectionOverrides=W5(e),vW(e),K8(e),AW(e),hs(e)||(e5(e),m6(e));const o=j4(e);hW(e,o),wW(e),cj(e),V8(e);const r=Zz(e);S6(e),r.fold(()=>{nk(e).then(()=>zp(e))},a=>{e.setProgressState(!0),nk(e).then(()=>{a().then(c=>{e.setProgressState(!1),zp(e),f0(e)},c=>{e.notificationManager.open({type:"error",text:String(c)}),zp(e),f0(e)})})})},x6=yt,k6=(e,t,n)=>rT(e,t,x6,n),Hp=Ve.DOM,A6=(e,t,n,s)=>{const o=x.fromTag("iframe");return s.each(r=>kt(o,"tabindex",r)),Hs(o,n),Hs(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Cr(o,"tox-edit-area__iframe"),o},N6=e=>{let t=jO(e)+"<html><head>";Vy(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=VO(e),s=WO(e),o=e.translate(OP(e));return Wy(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Wy(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},R6=(e,t)=>{const n=e.translate("Rich Text Area"),s=xs(x.fromDom(e.getElement()),"tabindex").bind(ec),o=A6(e.id,n,HO(e),s).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=N6(e),Hp.add(t.iframeContainer,o)},T6=e=>{const t=e.iframeElement,n=k6(x.fromDom(t),"load",()=>{n.unbind(),e.contentDocument=t.contentDocument,sk(e)});if(Ie.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close()}else t.srcdoc=e.iframeHTML},O6=(e,t)=>{R6(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Hp.isHidden(t.editorContainer)),e.getElement().style.display="none",Hp.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,T6(e)},ok=Ve.DOM,P6=(e,t,n)=>{const s=Vr.get(n),o=Vr.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=q.trim(n),s&&q.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,$e(r.init)&&(r.init(e,o),t.push(n))}catch(r){BH(e,n,r)}}},D6=e=>e.replace(/^\-/,""),B6=e=>{const t=[];j(Pc(e),n=>{P6(e,t,D6(n))})},I6=e=>{const t=q.trim(Gy(e)),n=e.ui.registry.getAll().icons,s={...Cl.get("default").icons,...Cl.get(t).icons};Je(s,(o,r)=>{Se(n,r)||e.ui.registry.addIcon(r,o)})},L6=e=>{const t=Or(e);if(ne(t)){const n=tr.get(t);e.theme=n(e,tr.urls[t])||{},$e(e.theme.init)&&e.theme.init(e,tr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},$6=e=>{const t=Hf(e),n=jr.get(t);e.model=n(e,jr.urls[t])},F6=e=>{const t=e.theme.renderUI;return t?t():ak(e)},M6=e=>{const t=e.getElement(),s=Or(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},rk=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),U6=e=>{const t=ok.create("div");return ok.insertAfter(t,e),rk(t,t)},ak=e=>{const t=e.getElement();return e.inline?rk(null):U6(t)},z6=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,ne(Or(e))?F6(e):$e(Or(e))?M6(e):ak(e)},H6=(e,t)=>{const n={show:y.from(t.show).getOr(Ae),hide:y.from(t.hide).getOr(Ae),isEnabled:y.from(t.isEnabled).getOr(yt),setEnabled:s=>{e.mode.isReadOnly()||y.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},j6=async e=>{e.dispatch("ScriptsLoaded"),I6(e),L6(e),$6(e),B6(e);const t=await z6(e);H6(e,y.from(t.api).getOr({})),e.editorContainer=t.editorContainer,FH(e),e.inline?sk(e):O6(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},nr=Ve.DOM,ik=e=>e.charAt(0)==="-",V6=(e,t)=>{const n=Yy(t),s=rP(t);if(!jn.hasCode(n)&&n!=="en"){const o=ss(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{OH(t,o,n)})}},W6=(e,t)=>{const n=Or(e);if(ne(n)&&!ik(n)&&!Se(tr.urls,n)){const s=pP(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;tr.load(n,o).catch(()=>{PH(e,o,n)})}},q6=(e,t)=>{const n=Hf(e);if(n!=="plugin"&&!Se(jr.urls,n)){const s=gP(e),o=ne(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;jr.load(n,o).catch(()=>{DH(e,o,n)})}},K6=e=>y.from(ZO(e)).filter(ss).map(t=>({url:t,name:y.none()})),ck=(e,t,n)=>y.from(t).filter(s=>ss(s)&&!Cl.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:y.some(s)})),G6=(e,t,n)=>{const s=ck(t,"default",n),o=K6(t).orThunk(()=>ck(t,Gy(t),""));j(pR([s,o]),r=>{e.add(r.url).catch(()=>{TH(t,r.url,r.name.getOrUndefined())})})},Y6=(e,t)=>{const n=(s,o)=>{Vr.load(s,o).catch(()=>{RH(e,o,s)})};Je(AP(e),(s,o)=>{n(o,s),e.options.set("plugins",Pc(e).concat(o))}),j(Pc(e),s=>{s=q.trim(s),s&&!Vr.urls[s]&&!ik(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},X6=e=>{const t=Or(e);return!ne(t)||ee(tr.get(t))},J6=e=>{const t=Hf(e);return ee(jr.get(t))},Q6=(e,t)=>{const n=Ps.ScriptLoader,s=()=>{!e.removed&&X6(e)&&J6(e)&&j6(e)};W6(e,t),q6(e,t),V6(n,e),G6(n,e,t),Y6(e,t),n.loadQueue().then(s,s)},Z6=(e,t)=>jb.forElement(e,{contentCssCors:tv(t),referrerPolicy:zf(t)}),eK=e=>{const t=e.id;jn.setCode(Yy(e));const n=()=>{nr.unbind(window,"ready",n),e.render()};if(!Io.Event.domLoaded){nr.bind(window,"ready",n);return}if(!e.getElement())return;const s=x.fromDom(e.getElement()),o=qh(s);e.on("remove",()=>{rh(s.dom.attributes,a=>Dt(s,a.name)),Hs(s,o)}),e.ui.styleSheetLoader=Z6(s,e),jf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||nr.getParent(t,"form");r&&(e.formElement=r,EP(e)&&!af(e.getElement())&&(nr.insertAfter(nr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},nr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),_P(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=w0(e),e.notificationManager=S0(e),sD(e)&&e.on("GetContent",a=>{a.save&&(a.content=nr.encode(a.content))}),SP(e)&&e.on("submit",()=>{e.initialized&&e.save()}),wP(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Q6(e,e.suffix)},tK=(e,t)=>({sections:Z(e),options:Z(t)}),lk=zs().deviceType,uk=lk.isPhone(),nK=lk.isTablet(),ki=e=>{if(bt(e))return[];{const t=at(e)?e:e.split(/[ ,]/),n=Le(t,yr);return be(n,ss)}},sK=(e,t)=>{const n=UN(t,(s,o)=>Ge(e,o));return tK(n.t,n.f)},oK=(e,t,n={})=>{const s=e.sections(),o=Ze(s,t).getOr({});return q.extend({},n,o)},jp=(e,t)=>Se(e.sections(),t),rK=(e,t)=>jp(e,t)?e.sections()[t]:{},aK=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ze(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),iK=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?q.extend({},e.external_plugins,s):s},cK=(e,t)=>[...ki(e),...ki(t)],lK=(e,t,n,s)=>e&&jp(t,"mobile")?s:n,uK=(e,t,n,s)=>{const o=ki(n.forced_plugins),r=ki(s.plugins),a=rK(t,"mobile"),c=a.plugins?ki(a.plugins):r,l=lK(e,t,r,c),f=cK(o,l);return q.extend(s,{forced_plugins:o,plugins:f})},fK=(e,t)=>e&&jp(t,"mobile"),dK=(e,t,n,s,o)=>{var r;const a=e?{mobile:aK((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},c=sK(["mobile"],Bl(a,o)),l=q.extend(n,s,c.options(),fK(e,c)?oK(c,"mobile"):{},{external_plugins:iK(s,c.options())});return uK(e,c,s,l)},mK=(e,t)=>dK(uk||nK,uk,t,e,t),pK=(e,t)=>w2(e,t),gK=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{j("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},hK=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return mt(o,r=>ee(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},bK=e=>{gK(e),hK(e)},yK=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ie.os.isMacOS()||Ie.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"+")),e.notificationManager.open({text:o,type:"error"})}}})},vK=(e,t,n)=>{const s=x.fromDom(e.getRoot());return oi(s,L.fromRangeStart(t))?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),ri(s,L.fromRangeEnd(t))?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},CK=e=>{if(typeof e!="string"){const t=q.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},EK=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?vK(s,n.getRng(),t):t},Zl=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:s}=CK(t);Am(e,{...s,content:EK(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=_2(e,o.content,s);Nm(e,r,o),e.addVisual()})}},_K=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Zl(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Zl(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Zl(e,s)},mceInsertContent:(t,n,s)=>{Zl(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},SK={"font-size":"size","font-family":"face"},wK=Yu("font"),xK=(e,t,n)=>{const s=r=>ac(r,e).orThunk(()=>wK(r)?Ze(SK,e).bind(a=>xs(r,a)):y.none()),o=r=>Fe(x.fromDom(t),r);return rm(x.fromDom(n),r=>s(r),o)},kK=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),AK=(e,t)=>y.from(Ve.DOM.getStyle(t,e,!0)),fk=e=>(t,n)=>y.from(n).map(x.fromDom).filter(nn).bind(s=>xK(e,t,s.dom).or(AK(e,s.dom))).getOr(""),NK=fk("font-size"),RK=yo(kK,fk("font-family")),TK=e=>Jt(e.getBody()).bind(t=>{const n=t.container();return y.from(z(n)?n.parentNode:n)}),OK=e=>y.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?y.none():y.from(e.selection.getStart(!0))}),PK=(e,t)=>OK(e).orThunk(ae(TK,e)).map(x.fromDom).filter(nn).bind(t),Vp=(e,t)=>PK(e,nh(y.some,t)),dk=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=tD(e),o=nD(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},DK=e=>{const t=e.split(/\s*,\s*/);return Le(t,n=>n.indexOf(" ")!==-1&&!(Pt(n,'"')||Pt(n,"'"))?`'${n}'`:n).join(",")},BK=(e,t)=>{const n=dk(e,t);e.formatter.toggle("fontname",{value:DK(n)}),e.nodeChanged()},IK=e=>Vp(e,t=>RK(e.getBody(),t.dom)).getOr(""),LK=(e,t)=>{e.formatter.toggle("fontsize",{value:dk(e,t)}),e.nodeChanged()},$K=e=>Vp(e,t=>NK(e.getBody(),t.dom)).getOr(""),FK=e=>Vp(e,t=>{const n=x.fromDom(e.getBody()),s=rm(t,r=>ac(r,"line-height"),ae(Fe,n)),o=()=>{const r=parseFloat(as(t,"line-height")),a=parseFloat(as(t,"font-size"));return String(r/a)};return s.getOrThunk(o)}).getOr(""),MK=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},UK=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{BK(e,o)},FontSize:(n,s,o)=>{LK(e,o)},LineHeight:(n,s,o)=>{MK(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(ne(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},zK=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>IK(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>$K(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>FK(e))},HK=e=>{UK(e),zK(e)},jK=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},VK=e=>{e.editorCommands.addCommands({Indent:()=>{mW(e)},Outdent:()=>{$S(e)}}),e.editorCommands.addCommands({Outdent:()=>DS(e)},"state")},WK=e=>{const t=(n,s,o)=>{const r=ne(o)?{href:o}:o,a=e.dom.getParent(e.selection.getNode(),"a");Xe(r)&&ne(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!a||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")},mceInsertLink:t,createLink:t})},qK=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const o=e.selection.getBookmark();e.dom.split(s,n),e.selection.moveToBookmark(o)}}}})},KK=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&(t==="insertunorderedlist"&&n.tagName==="UL"||t==="insertorderedlist"&&n.tagName==="OL")}},"state")},GK=e=>{qK(e),KK(e)},YK=e=>{e.editorCommands.addCommands({insertParagraph:()=>{jl(qw,e)},mceInsertNewLine:(t,n,s)=>{Zw(e,s)},InsertLineBreak:(t,n,s)=>{jl(Yw,e)}})},XK=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>te(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Hn);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},JK=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{fL(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},QK=e=>{bK(e),yK(e),jK(e),XK(e),_K(e),WK(e),VK(e),YK(e),GK(e),HK(e),JK(e)},ZK=["toggleview"],mk=e=>Ge(ZK,e.toLowerCase());class pk{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,a=t.toLowerCase(),c=o==null?void 0:o.skip_focus;if(r.removed||(a!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)&&!c?r.focus():VI(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const f=this.commands.exec[a];return $e(f)?(f(a,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(!mk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return $e(s)?s(n):!1}queryCommandValue(t){if(!mk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return $e(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;Je(t,(o,r)=>{j(r.toLowerCase().split(","),a=>{s[n][a]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,a,c)=>n.call(s??this.editor,a,c)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}const sr="data-mce-contenteditable",e9=(e,t,n)=>{Ju(e,t)&&!n?Ea(e,t):n&&Cr(e,t)},Wp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},eu=(e,t)=>{e.dom.contentEditable=t?"true":"false"},t9=e=>{j(Ut(e,'*[contenteditable="true"]'),t=>{kt(t,sr,"true"),eu(t,!1)})},n9=e=>{j(Ut(e,`*[${sr}="true"]`),t=>{Dt(t,sr),eu(t,!0)})},s9=e=>{y.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},o9=e=>{e.selection.setRng(e.selection.getRng())},r9=(e,t)=>{const n=x.fromDom(e.getBody());e9(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),s9(e),e.readonly=!0,eu(n,!1),t9(n)):(e.readonly=!1,eu(n,!0),n9(n),Wp(e,"StyleWithCSS",!1),Wp(e,"enableInlineTableEditing",!1),Wp(e,"enableObjectResizing",!1),lL(e)&&e.focus(),o9(e),e.nodeChanged())},or=e=>e.readonly,gk=e=>{e.parser.addAttributeFilter("contenteditable",t=>{or(e)&&j(t,n=>{n.attr(sr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(sr,t=>{or(e)&&j(t,n=>{n.attr("contenteditable",n.attr(sr))})}),e.serializer.addTempAttr(sr)},a9=e=>{e.serializer?gk(e):e.on("PreInit",()=>{gk(e)})},i9=e=>e.type==="click",c9=["copy"],l9=e=>Ge(c9,e.type),u9=(e,t)=>ko(t,"a",s=>Fe(s,x.fromDom(e.getBody()))).bind(s=>xs(s,"href")),f9=(e,t)=>{if(i9(t)&&!ie.metaKeyPressed(t)){const n=x.fromDom(t.target);u9(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${gh(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else l9(t)&&e.dispatch(t.type,t)},d9=e=>{e.on("ShowCaret",t=>{or(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{or(e)&&t.preventDefault()})},m9=q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class qp{constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||it}static isNative(t){return!!m9[t.toLowerCase()]}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=xf(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let a=0,c=r.length;a<c;a++){const l=r[a];if(!l.removed){if(l.once&&this.off(s,l.func),o.isImmediatePropagationStopped())return o;if(l.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=it),n){const r={func:n,removed:!1};o&&q.extend(r,o);const a=t.toLowerCase().split(" ");let c=a.length;for(;c--;){const l=a[c];let f=this.bindings[l];f||(f=[],this.toggleEvent(l,!0)),s?f=[r,...f]:f=[...f,r],this.bindings[l]=f}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let a=this.bindings[r];if(!r)return Je(this.bindings,(c,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(!n)a.length=0;else{const c=ua(a,l=>l.func===n);a=c.fail,this.bindings[r]=a,j(c.pass,l=>{l.removed=!0})}a.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else Je(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const Ai=e=>(e._eventDispatcher||(e._eventDispatcher=new qp({scope:e,toggleEvent:(t,n)=>{qp.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Kp={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return xf(e.toLowerCase(),t??{},s);const o=Ai(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return Ai(this).on(e,t,n)},off(e,t){return Ai(this).off(e,t)},once(e,t){return Ai(this).once(e,t)},hasEventListeners(e){return Ai(this).has(e)}},tu=Ve.DOM;let rr;const nu=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Zy(e);return n?(e.eventRoot||(e.eventRoot=tu.select(n)[0]),e.eventRoot):e.getBody()},p9=e=>!e.hidden&&!or(e),hk=(e,t,n)=>{p9(e)?e.dispatch(t,n):or(e)&&f9(e,n)},bk=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=nu(e,t);if(Zy(e)){if(rr||(rr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||rr&&(Je(rr,(o,r)=>{e.dom.unbind(nu(e,r))}),rr=null)})),rr[t])return;const s=o=>{const r=o.target,a=e.editorManager.get();let c=a.length;for(;c--;){const l=a[c].getBody();(l===r||tu.isChildOf(r,l))&&hk(a[c],t,o)}};rr[t]=s,tu.bind(n,t,s)}else{const s=o=>{hk(e,t,o)};tu.bind(n,t,s),e.delegates[t]=s}},yk={...Kp,bindPendingEventDelegates(){const e=this;q.each(e._pendingNativeEvents,t=>{bk(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?bk(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(nu(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Je(e.delegates,(s,o)=>{e.dom.unbind(nu(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},g9=e=>ne(e)?{value:e.split(/[ ,]/),valid:!0}:gr(e,ne)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},h9=e=>{const t=(()=>{switch(e){case"array":return at;case"boolean":return bo;case"function":return $e;case"number":return Fn;case"object":return Xe;case"string":return ne;case"string[]":return g9;case"object[]":return n=>gr(n,Xe);case"regexp":return n=>Ye(n,RegExp);default:return yt}})();return n=>Gp(n,t,`The value must be a ${e}.`)},b9=e=>ne(e.processor),vk=(e,t)=>{const n=ba(t.message)?"":`. ${t.message}`;return e+n},Ck=e=>e.valid,Gp=(e,t,n="")=>{const s=t(e);return bo(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},y9=(e,t,n)=>{if(!Kt(t)){const s=Gp(t,n);if(Ck(s))return s.value;console.error(vk(`Invalid default value passed for the "${e}" option`,s))}},v9=(e,t)=>{const n={},s={},o=(m,h,_)=>{const w=Gp(h,_);return Ck(w)?(s[m]=w.value,!0):(console.warn(vk(`Invalid value passed for the ${m} option`,w)),!1)},r=(m,h)=>{const _=b9(h)?h9(h.processor):h.processor,w=y9(m,h.default,_);n[m]={...h,default:w,processor:_},Ze(s,m).orThunk(()=>Ze(t,m)).each(S=>o(m,S,_))},a=m=>Se(n,m);return{register:r,isRegistered:a,get:m=>Ze(s,m).orThunk(()=>Ze(n,m).map(h=>h.default)).getOrUndefined(),set:(m,h)=>{if(a(m)){const _=n[m];return _.immutable?(console.error(`"${m}" is an immutable option and cannot be updated`),!1):o(m,h,_.processor)}else return console.warn(`"${m}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:m=>{const h=a(m);return h&&delete s[m],h},isSet:m=>Se(s,m)}},C9=["design","readonly"],Ek=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(a){console.error(`problem while activating editor mode ${s}:`,a);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&r9(e,r.editorReadOnly),t.set(s),AB(e,s)},E9=(e,t,n,s)=>{if(s!==n.get()){if(!Se(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?Ek(e,n,t,s):e.on("init",()=>Ek(e,n,t,s))}},_9=(e,t,n)=>{if(Ge(C9,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},S9=e=>{const t=wt("design"),n=wt({design:{activate:Ae,deactivate:Ae,editorReadOnly:!1},readonly:{activate:Ae,deactivate:Ae,editorReadOnly:!0}});return a9(e),d9(e),{isReadOnly:()=>or(e),set:s=>E9(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(_9(n.get(),s,o))}}},Yp=q.each,Xp=q.explode,w9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},_k=q.makeMap("alt,ctrl,shift,meta,access"),x9=e=>e in _k,k9=e=>{const t={},n=Ie.os.isMacOS()||Ie.os.isiOS();Yp(Xp(e.toLowerCase(),"+"),r=>{x9(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=w9[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in _k)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Sk{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(Yp(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,a=r.normalizeCommandFunc(s);return Yp(Xp(q.trim(t)),c=>{const l=r.createShortcut(c,n,a,o);r.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:q.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=q.map(Xp(t,">"),k9);return r[r.length-1]=q.extend(r[r.length-1],{func:s,scope:o||this.editor}),q.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const A9=()=>{const e={},t={},n={},s={},o={},r={},a={},c={},l=(g,m)=>(h,_)=>{g[h.toLowerCase()]={..._,type:m}},f=(g,m)=>s[g.toLowerCase()]=m;return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(r,"contexttoolbar"),addContextForm:l(r,"contextform"),addSidebar:l(a,"sidebar"),addView:l(c,"views"),addIcon:f,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:a,views:c})}},N9=()=>{const e=A9();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},ar=Ve.DOM,wk=q.extend,R9=q.each;class su{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,wk(this,yk);const o=this;this.id=t,this.hidden=!1;const r=mK(s.defaultOptions,n);this.options=v9(o,r),zO(o);const a=this.options.get;a("deprecation_warnings")&&uH(n,r);const c=a("suffix");c&&(s.suffix=c),this.suffix=s.suffix;const l=a("base_url");l&&s._setBaseUrl(l),this.baseUri=s.baseURI;const f=zf(o);f&&(Ps.ScriptLoader._setReferrerPolicy(f),Ve.DOM.styleSheetLoader._setReferrerPolicy(f));const g=tv(o);ee(g)&&Ve.DOM.styleSheetLoader._setContentCssCors(g),jt.languageLoad=a("language_load"),jt.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new Kn(Vy(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=jf(o),this.hasVisual=RP(o),this.shortcuts=new Sk(this),this.editorCommands=new pk(this),QK(this);const m=a("cache_suffix");m&&(Ie.cacheSuffix=m.replace(/^[\?\&]+/,"")),this.ui={registry:N9(),styleSheetLoader:void 0,show:Ae,hide:Ae,setEnabled:Ae,isEnabled:yt},this.mode=S9(o),s.dispatch("SetupEditor",{editor:this});const h=PP(o);$e(h)&&h.call(o,o)}render(){eK(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Go(this)}translate(t){return jn.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(ee(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:yt,default:n})),!o.isSet(t)&&!Kt(n)?n:o.get(t)}hasPlugin(t,n){return Ge(Pc(this),t)?n?Vr.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(ar.show(t.getContainer()),ar.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(ar.hide(t.getContainer()),ar.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=af(s)?s.value:s.innerHTML,a=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),a}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const a={...o,content:r};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),r=a.content,af(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const c=ar.getParent(n.id,"form");c&&R9(c.elements,l=>l.name===n.id?(l.value=r,!1):!0)}return a.element=o.element=s=null,a.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return Lm(this,t,n)}getContent(t){return J2(this,t)}insertContent(t,n){n&&(t=wk({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Lm(this,this.startContent,{format:"raw"}):Lm(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||ar.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ar.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,a=BP(o);return $e(a)?a.call(o,t,s,!0,n):!r("convert_urls")||s==="link"||Xe(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){pK(this,t)}remove(){pH(this)}destroy(t){gH(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Xr=Ve.DOM,ou=q.each;let xk=!1,ru,Zt=[];const au=e=>{const t=e.type;ou(co.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},kk=e=>{if(e!==xk){const t=Ve.DOM;e?(t.bind(window,"resize",au),t.bind(window,"scroll",au)):(t.unbind(window,"resize",au),t.unbind(window,"scroll",au)),xk=e}},Ak=e=>{const t=Zt;return Zt=be(Zt,n=>e!==n),co.activeEditor===e&&(co.activeEditor=Zt.length>0?Zt[0]:null),co.focusedEditor===e&&(co.focusedEditor=null),t.length!==Zt.length},T9=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Ak(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},O9=document.compatMode!=="CSS1Compat",co={...Kp,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.1",releaseDate:"2023-03-29",i18n:jn,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=Kn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let a=0;a<r.length;a++){const c=r[a].src||"";if(c==="")continue;const l=c.substring(c.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){l.indexOf(".min")!==-1&&(n=".min"),t=c.substring(0,c.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;a.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}e.baseURL=new Kn(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new Kn(e.baseURL),e.suffix=n,tL(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&Je(s,(o,r)=>{jt.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(g,m)=>g.inline&&m.tagName.toLowerCase()in s,r=g=>{let m=g.id;return m||(m=Ze(g,"name").filter(h=>!Xr.get(h)).getOrThunk(Xr.uniqueId),g.setAttribute("id",m)),m},a=g=>{const m=e[g];if(m)return m.apply(t,[])},c=g=>Ie.browser.isIE()||Ie.browser.isEdge()?(_l("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):O9?(_l("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ne(g.selector)?Xr.select(g.selector):ee(g.target)?[g.target]:[];let l=g=>{n=g};const f=()=>{let g=0;const m=[];let h;const _=(w,C,S)=>{const N=new su(w,C,t);m.push(N),N.on("init",()=>{++g===h.length&&l(m)}),N.targetElm=N.targetElm||S,N.render()};Xr.unbind(window,"ready",f),a("onpageload"),h=$N(c(e)),q.each(h,w=>{T9(t.get(w.id))}),h=q.grep(h,w=>!t.get(w.id)),h.length===0?l([]):ou(h,w=>{o(e,w)?_l("Could not initialize inline editor on invalid inline target element",w):_(r(w),e,w)})};return Xr.bind(window,"ready",f),new Promise(g=>{n?g(n):l=m=>{g(m)}})},get(e){return arguments.length===0?Zt.slice(0):ne(e)?Ct(Zt,t=>t.id===e).getOr(null):Fn(e)&&Zt[e]?Zt[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&Zt.push(e),kk(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),ru||(ru=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",ru))),e},createEditor(e,t){return this.add(new su(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=Zt.length-1;s>=0;s--)t.remove(Zt[s]);return}if(ne(e)){ou(Xr.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,Pn(t.get(n.id))?null:(Ak(n)&&t.dispatch("RemoveEditor",{editor:n}),Zt.length===0&&window.removeEventListener("beforeunload",ru),n.remove(),kk(Zt.length>0),n)},execCommand(e,t,n){var s;const o=this,r=Xe(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const a=n.options;new su(r,a,o).render()}return!0}case"mceRemoveEditor":{const a=o.get(r);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(r);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{ou(Zt,e=>{e.save()})},addI18n:(e,t)=>{jn.add(e,t)},translate:e=>jn.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Kn(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Kn(this.baseURL)}};co.setup();const P9=(()=>{const e=Xs(),t=r=>({items:r,types:un(r),getType:a=>Ze(r,a).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Nk=Math.min,Jr=Math.max,iu=Math.round,Rk=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,a=e.h,c=t.w,l=t.h,f=(n||"").split("");return f[0]==="b"&&(o+=l),f[1]==="r"&&(s+=c),f[0]==="c"&&(o+=iu(l/2)),f[1]==="c"&&(s+=iu(c/2)),f[3]==="b"&&(o-=a),f[4]==="r"&&(s-=r),f[3]==="c"&&(o-=iu(a/2)),f[4]==="c"&&(s-=iu(r/2)),Qr(s,o,r,a)},D9=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=Rk(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},B9=(e,t,n)=>Qr(e.x-t,e.y-n,e.w+t*2,e.h+n*2),I9=(e,t)=>{const n=Jr(e.x,t.x),s=Jr(e.y,t.y),o=Nk(e.x+e.w,t.x+t.w),r=Nk(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Qr(n,s,o-n,r-s)},L9=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,a=e.y+e.h;const c=t.x+t.w,l=t.y+t.h,f=Jr(0,t.x-s),g=Jr(0,t.y-o),m=Jr(0,r-c),h=Jr(0,a-l);return s+=f,o+=g,n&&(r+=f,a+=g,s-=m,o-=h),r-=m,a-=h,Qr(s,o,r-s,a-o)},Qr=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),$9={inflate:B9,relativePosition:Rk,findBestRelativePosition:D9,intersect:I9,clamp:L9,create:Qr,fromClientRect:e=>Qr(e.left,e.top,e.width,e.height)},F9=(e,t,n=1e3)=>{let s=!1,o=null;const r=f=>(...g)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),f.apply(null,g))},a=r(e),c=r(t);return{start:(...f)=>{!s&&o===null&&(o=setTimeout(()=>c.apply(null,f),n))},resolve:a,reject:c}},M9=(()=>{const e={},t={};return{load:(r,a)=>{const c=`Script at URL "${a}" failed to load`,l=`Script at URL "${a}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(e[r]!==void 0)return e[r];{const f=new Promise((g,m)=>{const h=F9(g,m);t[r]=h.resolve,Ps.ScriptLoader.loadScript(a).then(()=>h.start(l),()=>h.reject(c))});return e[r]=f,f}},add:(r,a)=>{t[r]!==void 0&&(t[r](a),delete t[r]),e[r]=Promise.resolve(a)},unload:r=>{delete e[r]}}})(),U9=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let Ni;try{const e="__storage_test__";Ni=window.localStorage,Ni.setItem(e,e),Ni.removeItem(e)}catch{Ni=U9()}var z9=Ni;const H9={geom:{Rect:$9},util:{Delay:wn,Tools:q,VK:ie,URI:Kn,EventDispatcher:qp,Observable:Kp,I18n:jn,LocalStorage:z9,ImageUploader:qH},dom:{EventUtils:Io,TreeWalker:_t,TextSeeker:Fo,DOMUtils:Ve,ScriptLoader:Ps,RangeUtils:Ko,Serializer:b0,StyleSheetLoader:Hb,ControlSelection:iC,BookmarkManager:Za,Selection:h0,Event:Io.Event},html:{Styles:wf,Entities:Gs,Node:Qt,Schema:Ys,DomParser:Hr,Writer:WC,Serializer:to},Env:Ie,AddOnManager:jt,Annotator:Qv,Formatter:P0,UndoManager:B0,EditorCommands:pk,WindowManager:w0,NotificationManager:S0,EditorObservable:yk,Shortcuts:Sk,Editor:su,FocusManager:TC,EditorManager:co,DOM:Ve.DOM,ScriptLoader:Ps.ScriptLoader,PluginManager:Vr,ThemeManager:tr,ModelManager:jr,IconManager:Cl,Resource:M9,FakeClipboard:P9,trim:q.trim,isArray:q.isArray,is:q.is,toArray:q.toArray,makeMap:q.makeMap,each:q.each,map:q.map,grep:q.grep,inArray:q.inArray,extend:q.extend,walk:q.walk,resolve:q.resolve,explode:q.explode,_addCacheSuffix:q._addCacheSuffix},Tk=q.extend(co,H9),j9=e=>{try{i.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Tk),j9(Tk)})()})(aX);const iX=Rg;iX.init({selector:"textarea"});window.Alpine=PN;PN.start();
